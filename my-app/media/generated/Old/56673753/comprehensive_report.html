<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Comprehensive SIP Financial Plan</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: #f9fafb; color: #111827; }
    .container { max-width: 1000px; margin: 0 auto; padding: 2rem; background-color: white; box-shadow: 0 4px 6px rgba(0,0,0,0.1); border-radius: 8px; }
    h1, h2, h3 { color: #111827; font-weight: 600; margin-top: 1.5em; margin-bottom: 0.5em; }
    h1 { font-size: 1.875rem; border-bottom: 2px solid #e5e7eb; padding-bottom: 0.5rem; }
    h2 { font-size: 1.5rem; }
    h3 { font-size: 1.25rem; }
    section { margin-bottom: 2rem; }
    table { width: 100%; border-collapse: collapse; margin: 1.5em 0; }
    th, td { border: 1px solid #d1d5db; padding: 0.75rem; text-align: left; }
    th { background-color: #f3f4f6; font-weight: 600; }
    .callout { padding: 1rem; border-radius: 6px; margin: 1rem 0; border-left-width: 4px; }
    .callout.warning { background-color: #fffbeb; border-color: #f59e0b; color: #b45309; }
    .callout h4 { font-weight: bold; margin-top: 0; }
    .no-print { display: block; }
    @media print {
      .no-print { display: none; }
      body { box-shadow: none; }
      .container { box-shadow: none; border: none; margin: 0; max-width: 100%; }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- 1) Title / Header -->
    <header>
      <h1>üìä Comprehensive SIP Financial Plan</h1>
      <p><strong>Goal:</strong> General Wealth Creation</p>
      <p><strong>Generated on:</strong> <script>document.write(new Date().toLocaleDateString());</script></p>
    </header>

    <!-- 2) Executive Summary -->
    <section id="executive-summary">
      <h2>üéØ Executive Summary</h2>
      <p>This report outlines a 10-year financial plan for <strong>General Wealth Creation</strong>, targeting a corpus of <strong>‚Çπ2,00,00,000</strong>. After adjusting for 5.5% annual inflation, the required future value is <strong>‚Çπ3,41,62,889</strong>. The plan proposes a monthly SIP of <strong>‚Çπ1,57,676</strong> based on an 11% expected annual return and a 'High-Moderate' risk profile.</p>
      <div class="callout warning">
        <h4>‚ö†Ô∏è Critical Plan Flaw Identified</h4>
        <p>A validation check revealed a <strong>critical mathematical error</strong> in the SIP calculation. The recommended monthly investment is insufficient, projecting a final corpus of ‚Çπ3,30,85,758, resulting in a <strong>shortfall of over ‚Çπ10.7 Lakhs</strong>. The SIP amount must be recalculated before implementation.</p>
      </div>
      <p>The strategic asset allocation is 60% Equity and 40% Debt. A gap was identified as no funds were shortlisted for the 'Short Duration Funds' category, which constitutes 20% of the portfolio. This must be addressed to maintain the intended risk profile.</p>
    </section>

    <!-- 3) Goal Inputs -->
    <section id="goal-inputs">
      <h2>‚Ö°. Goal Inputs & Investor Profile</h2>
      <table>
        <thead><tr><th>Parameter</th><th>Value</th></tr></thead>
        <tbody>
          <tr><td><strong>Financial Goal</strong></td><td>General Wealth Creation</td></tr>
          <tr><td><strong>Target Amount</strong></td><td>‚Çπ2,00,00,000</td></tr>
          <tr><td><strong>Investment Horizon</strong></td><td>10 Years (120 Months)</td></tr>
          <tr><td><strong>Risk Appetite</strong></td><td>High-Moderate</td></tr>
        </tbody>
      </table>
    </section>

    <!-- 4) Inflation Adjustment -->
    <section id="inflation-adjustment">
      <h2>‚Ö¢. Inflation Adjustment Analysis</h2>
       <table>
        <thead><tr><th>Metric</th><th>Value</th></tr></thead>
        <tbody>
          <tr><td>Unadjusted Target Corpus</td><td>‚Çπ2,00,00,000</td></tr>
          <tr><td>Assumed Annual Inflation Rate</td><td>5.5%</td></tr>
          <tr><td>Investment Duration</td><td>10 Years</td></tr>
          <tr><td><strong>Inflation-Adjusted Target Corpus</strong></td><td><strong>‚Çπ3,41,62,889</strong></td></tr>
        </tbody>
      </table>
    </section>

    <!-- 5) SIP Calculation -->
    <section id="sip-calculation">
      <h2>‚Ö£. SIP Calculation & Projections</h2>
      <table>
        <thead><tr><th>Metric</th><th>Value</th></tr></thead>
        <tbody>
          <tr><td>Inflation-Adjusted Target</td><td>‚Çπ3,41,62,889</td></tr>
          <tr><td>Assumed Annual Rate of Return</td><td>11% (based on 'High-Moderate' risk)</td></tr>
          <tr><td><strong>Calculated Monthly SIP Amount</strong></td><td><strong>‚Çπ1,57,676</strong></td></tr>
        </tbody>
      </table>
      <div class="callout warning">
        <h4>üö® Critical Calculation Error Detected</h4>
        <p>The calculated monthly SIP of <strong>‚Çπ1,57,676 is mathematically incorrect.</strong> The projection based on this amount culminates in a final corpus of ‚Çπ3,30,85,758, which is <strong>‚Çπ10,77,131 short</strong> of the required ‚Çπ3,41,62,889. The plan cannot succeed with this investment amount. A corrected, higher SIP amount is required.</p>
      </div>
    </section>

    <!-- 6) Asset Allocation Plan -->
    <section id="asset-allocation">
      <h2>‚Ö§. Asset Allocation & Fund Strategy</h2>
      <h3>Strategic Allocation: 60% Equity / 40% Debt</h3>
      <table>
        <thead><tr><th>Asset Class</th><th>Category</th><th>Target Allocation</th><th>Status</th></tr></thead>
        <tbody>
          <tr><td><strong>Equity</strong></td><td>Large & Mid Cap Funds</td><td>60%</td><td style="color: green;">‚úÖ Coverage Found</td></tr>
          <tr><td rowspan="2"><strong>Debt</strong></td><td>Corporate Bond Funds</td><td>20%</td><td style="color: green;">‚úÖ Coverage Found</td></tr>
          <tr><td>Short Duration Funds</td><td>20%</td><td style="color: red;">‚ùå GAP IDENTIFIED</td></tr>
        </tbody>
      </table>
    </section>

    <!-- 7) Key Recommendations -->
    <section id="key-recommendations">
      <h2>‚Ö•. Key Recommendations</h2>
      <ol class="list-decimal list-inside space-y-2">
        <li><strong>Correct the Core Calculation (Critical):</strong> Immediately recalculate the required monthly SIP amount to accurately target the inflation-adjusted goal of ‚Çπ3.41 Cr.</li>
        <li><strong>Address the Allocation Gap (High):</strong> Identify and select suitable 'Short Duration Funds' to fulfill the 20% allocation target and balance the portfolio's risk profile.</li>
        <li><strong>Conduct Thorough Due Diligence (High):</strong> Perform a comprehensive review of all shortlisted funds (prospectus, expense ratio, manager track record) before committing capital.</li>
      </ol>
    </section>

    <!-- 8) Risk Factors & Uncertainties -->
    <section id="risk-factors">
      <h2>‚Ö¶. Risk Factors & Uncertainties</h2>
      <p>All investments carry inherent risks. Understanding these factors is crucial for the success of this financial plan. Key risks include:</p>
      <ul class="list-disc list-inside space-y-2">
        <li><strong>Model Integrity Risk:</strong> As highlighted, a critical error exists in the SIP calculation. Following the plan with the current investment amount guarantees failure to meet the goal. This is the most immediate and certain risk and must be mitigated by recalculating the SIP.</li>
        <li><strong>Market Risk:</strong> The assumed 11% annual return is an average and not guaranteed. Equity and debt markets are volatile and can underperform for extended periods, which could lead to a lower final corpus. Diversification helps mitigate, but not eliminate, this risk.</li>
        <li><strong>Inflation Risk:</strong> The plan assumes a 5.5% inflation rate. If actual inflation is higher, the purchasing power of the final corpus will be eroded, even if the nominal target is achieved.</li>
        <li><strong>Diversification Risk:</strong> The identified gap in the 'Short Duration Funds' category could lead to over-concentration in corporate bonds, increasing sensitivity to interest rate changes and altering the portfolio's intended risk and liquidity profile.</li>
        <li><strong>Discipline Risk:</strong> The success of a SIP depends on consistent monthly contributions for the entire 120-month period. Pausing or stopping contributions, especially during market downturns, will severely impact the final outcome and the power of compounding.</li>
      </ul>
    </section>

    <!-- 9) Charts Section (FIXED v11 LAYOUT) -->
    <section id="sip-charts">
      <h2>üìä SIP Projection & Allocation Charts</h2>
      <div style="display: block;">
        <!-- Asset Allocation FIRST (TOP) -->
        <div class="chart-container" style="margin-bottom: 30px; text-align: center;">
          <h3>Asset Allocation</h3>
          <div style="max-width: 500px; margin: 0 auto;">
            <canvas id="sipAllocationChart" width="400" height="300" style="max-width: 100%; height: auto;"></canvas>
          </div>
        </div>
        
        <!-- SIP Growth Projection SECOND (BOTTOM) -->
        <div class="chart-container" style="text-align: center;">
          <h3>SIP Growth Projection</h3>
          <div style="max-width: 800px; margin: 0 auto;">
            <canvas id="sipProjectionChart" width="600" height="400" style="max-width: 100%; height: auto;"></canvas>
          </div>
        </div>
      </div>
    </section>

    <!-- 10) Monthly Projection Table -->
    <section id="monthly-projection">
      <h2>üìà Monthly Projection (First 12 Months)</h2>
      <table>
        <thead>
          <tr><th>Month</th><th>Cumulative Contribution</th><th>Projected Corpus Value</th></tr>
        </thead>
        <tbody>
          <tr><td>1</td><td>‚Çπ1,57,676</td><td>‚Çπ1,57,676</td></tr>
          <tr><td>2</td><td>‚Çπ3,15,352</td><td>‚Çπ3,16,798</td></tr>
          <tr><td>3</td><td>‚Çπ4,73,028</td><td>‚Çπ4,77,378</td></tr>
          <tr><td>4</td><td>‚Çπ6,30,703</td><td>‚Çπ6,39,426</td></tr>
          <tr><td>5</td><td>‚Çπ7,88,379</td><td>‚Çπ8,02,953</td></tr>
          <tr><td>6</td><td>‚Çπ9,46,055</td><td>‚Çπ9,67,970</td></tr>
          <tr><td>7</td><td>‚Çπ11,03,731</td><td>‚Çπ11,34,488</td></tr>
          <tr><td>8</td><td>‚Çπ12,61,407</td><td>‚Çπ13,02,517</td></tr>
          <tr><td>9</td><td>‚Çπ14,19,083</td><td>‚Çπ14,72,070</td></tr>
          <tr><td>10</td><td>‚Çπ15,76,759</td><td>‚Çπ16,43,157</td></tr>
          <tr><td>11</td><td>‚Çπ17,34,435</td><td>‚Çπ18,15,790</td></tr>
          <tr><td>12</td><td>‚Çπ18,92,110</td><td>‚Çπ19,89,980</td></tr>
        </tbody>
      </table>
    </section>

    <!-- 11) Print/Download Controls -->
    <div class="no-print" style="margin: 40px 0; text-align: center; border-top: 1px solid #e5e7eb; padding-top: 20px;">
      <button onclick="window.print()" style="margin: 5px; padding: 10px 20px; background-color: #3b82f6; color: white; border: none; border-radius: 6px; cursor: pointer;">Print Report</button>
      <button onclick="downloadHTML()" style="margin: 5px; padding: 10px 20px; background-color: #10b981; color: white; border: none; border-radius: 6px; cursor: pointer;">Download HTML</button>
    </div>

  </div>

  <!-- Load Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Embed chart data -->
  <script id="sip-chart-data" type="application/json">
  {"projection":{"labels":["M1","M2","M3","M4","M5","M6","M7","M8","M9","M10","M11","M12","M13","M14","M15","M16","M17","M18","M19","M20","M21","M22","M23","M24","M25","M26","M27","M28","M29","M30","M31","M32","M33","M34","M35","M36","M37","M38","M39","M40","M41","M42","M43","M44","M45","M46","M47","M48","M49","M50","M51","M52","M53","M54","M55","M56","M57","M58","M59","M60","M61","M62","M63","M64","M65","M66","M67","M68","M69","M70","M71","M72","M73","M74","M75","M76","M77","M78","M79","M80","M81","M82","M83","M84","M85","M86","M87","M88","M89","M90","M91","M92","M93","M94","M95","M96","M97","M98","M99","M100","M101","M102","M103","M104","M105","M106","M107","M108","M109","M110","M111","M112","M113","M114","M115","M116","M117","M118","M119","M120"],"datasets":{"cumulative_contribution":[157675.87,315351.74,473027.61,630703.48,788379.35,946055.22,1103731.09,1261406.96,1419082.83,1576758.7,1734434.57,1892110.44,2049786.31,2207462.18,2365138.05,2522813.92,2680489.79,2838165.66,2995841.53,3153517.4,3311193.27,3468869.14,3626545.01,3784220.88,3941896.75,4099572.62,4257248.49,4414924.36,4572600.23,4730276.1,4887951.97,5045627.84,5203303.71,5360979.58,5518655.45,5676331.32,5834007.19,5991683.06,6149358.93,6307034.8,6464710.67,6622386.54,6780062.41,6937738.28,7095414.15,7253090.02,7410765.89,7568441.76,7726117.63,7883793.5,8041469.37,8199145.24,8356821.11,8514496.98,8672172.85,8829848.72,8987524.59,9145200.46,9302876.33,9460552.2,9618228.07,9775903.94,9933579.81,10091255.68,10248931.55,10406607.42,10564283.29,10721959.16,10879635.03,11037310.9,11194986.77,11352662.64,11510338.51,11668014.38,11825690.25,11983366.12,12141041.99,12298717.86,12456393.73,12614069.6,12771745.47,12929421.34,13087097.21,13244773.08,13402448.95,13560124.82,13717800.69,13875476.56,14033152.43,14190828.3,14348504.17,14506180.04,14663855.91,14821531.78,14979207.65,15136883.52,15294559.39,15452235.26,15609911.13,15767587.0,15925262.87,16082938.74,16240614.61,16398290.48,16555966.35,16713642.22,16871318.09,17028993.96,17186669.83,17344345.7,17502021.57,17659697.44,17817373.31,17975049.18,18132725.05,18290400.92,18448076.79,18605752.66,18763428.53,18921104.4],"projected_corpus":[157675.87,316798.43,477378.3,639426.27,802953.2,967969.97,1134487.6,1302517.16,1472069.83,1643156.89,1815789.75,1989980.0,2165739.31,2343079.5,2522012.48,2702550.28,2884705.02,3068488.91,3253914.28,3440993.59,3629739.43,3820164.52,4012281.71,4206103.96,4401644.41,4598916.34,4797933.15,4998708.38,5201255.67,5405588.79,5611721.61,5819668.08,6029442.27,6241058.41,6454530.82,6669873.94,6887102.26,7106220.37,7327242.92,7550184.69,7775050.56,8001855.51,8230614.59,8461342.93,8694055.77,8928768.45,9165496.42,9404255.23,9645060.5,9887927.91,10132873.28,10379912.51,10629061.6,10880336.63,11133753.79,1138929.39,11647079.88,11907021.84,12169172.01,12433547.24,12700164.55,12969041.07,13240194.03,13513640.8,13789398.88,14067485.91,14347919.64,14630718.01,14915899.04,15203480.9,15493481.9,15785920.47,16080815.15,16378184.66,16678047.88,16980423.86,17285331.81,17592791.09,17902821.22,18215441.9,18530672.93,18848534.28,19169046.06,19492228.51,19818101.99,20146687.01,20478004.2,20812074.27,21148918.02,21488556.39,21831010.42,22176301.29,22524450.31,22875478.89,23229408.57,23586261.01,23946057.94,24308821.21,24674572.76,2504334.69,25415129.2,25789978.58,26167905.2,26548931.57,26933080.31,27320374.19,27710836.1,28104489.04,28501356.12,28901460.55,29304825.64,29711474.88,30121431.87,30534720.35,30951364.17,31371387.31,31794813.91,32221668.27,32651974.9,33085758.42]}},"allocation":{"labels":["Equity","Debt"],"data":[60,40]}}
  </script>

  <!-- ENHANCED chart rendering with proper layout and sizing -->
  <script>
  function initCharts() {
    if (typeof Chart === 'undefined') {
      console.error('Chart.js not loaded');
      return;
    }
    
    let data;
    try {
      const script = document.getElementById('sip-chart-data');
      data = script ? JSON.parse(script.textContent) : null;
    } catch (e) {
      console.warn('Chart data parse failed');
      data = null;
    }
    
    // Enhanced fallback with complete timeline
    if (!data) {
      data = {
        projection: {
          labels: ["M1","M2","M3","M4","M5","M6","M7","M8","M9","M10","M11","M12","M13","M14","M15","M16","M17","M18","M19","M20","M21","M22","M23","M24","M25","M26","M27","M28","M29","M30","M31","M32","M33","M34","M35","M36","M37","M38","M39","M40","M41","M42","M43","M44","M45","M46","M47","M48","M49","M50","M51","M52","M53","M54","M55","M56","M57","M58","M59","M60","M61","M62","M63","M64","M65","M66","M67","M68","M69","M70","M71","M72","M73","M74","M75","M76","M77","M78","M79","M80","M81","M82","M83","M84","M85","M86","M87","M88","M89","M90","M91","M92","M93","M94","M95","M96","M97","M98","M99","M100","M101","M102","M103","M104","M105","M106","M107","M108","M109","M110","M111","M112","M113","M114","M115","M116","M117","M118","M119","M120"],
          datasets: {
            cumulative_contribution: [25000,50000,75000,100000,125000,150000,175000,200000,225000,250000,275000,300000,325000,350000,375000,400000,425000,450000,475000,500000,525000,550000,575000,600000,625000,650000,675000,700000,725000,750000,775000,800000,825000,850000,875000,900000,925000,950000,975000,1000000,1025000,1050000,1075000,1100000,1125000,1150000,1175000,1200000,1225000,1250000,1275000,1300000,1325000,1350000,1375000,1400000,1425000,1450000,1475000,1500000,1525000,1550000,1575000,1600000,1625000,1650000,1675000,1700000,1725000,1750000,1775000,1800000,1825000,1850000,1875000,1900000,1925000,1950000,1975000,2000000,2025000,2050000,2075000,2100000,2125000,2150000,2175000,2200000,2225000,2250000,2275000,2300000,2325000,2350000,2375000,2400000,2425000,2450000,2475000,2500000,2525000,2550000,2575000,2600000,2625000,2650000,2675000,2700000,2725000,2750000,2775000,2800000,2825000,2850000,2875000,2900000,2925000,2950000,2975000,3000000],
            projected_corpus: [25250,50755,76519,102543,128831,155386,182212,209312,236692,264356,292308,320552,349093,377935,407082,436540,466312,496404,526821,557567,588648,620068,651832,683945,716412,749239,782430,815991,849927,884244,918948,954045,989540,1025440,1061750,1098476,1135626,1173205,1211220,1249678,1288586,1327951,1367780,1408080,1448859,1490125,1531885,1574148,1616922,1660215,1704035,1748392,1793293,1838750,1884770,1931365,1978544,2026318,2074697,2123692,2173315,2223577,2274490,2326066,2378316,2431252,2484887,2539233,2594302,2650106,2706658,2763971,2822058,2880932,2940607,3001097,3062415,3124575,3187591,3251477,3316247,3381916,3448499,3516010,3584465,3653879,3724267,3795645,3868028,3941432,4015873,4091366,4167928,4245574,4324322,4404188,4485188,4567340,4650661,4735168,4821880,4909814,4999990,5091425,5184139,5278150,5373478,5470142,5568161,5667556,5768346,5870552,5974194,6079293,6185870,6293947,6403545,6514686,6627391]
          }
        },
        allocation: { labels: ["Equity", "Debt"], data: [70, 30] }
      };
    }
    
    // Create allocation chart FIRST (TOP POSITION)
    const allocCtx = document.getElementById('sipAllocationChart');
    if (allocCtx) {
      new Chart(allocCtx, {
        type: 'doughnut',
        data: {
          labels: data.allocation.labels,
          datasets: [{ 
            data: data.allocation.data, 
            backgroundColor: ['#3B82F6', '#10B981'],
            borderWidth: 2 
          }]
        },
        options: { 
          responsive: true,
          maintainAspectRatio: true,
          aspectRatio: 1.33,
          plugins: {
            legend: { 
              position: 'bottom',
              labels: { padding: 15 }
            }
          }
        }
      });
    }
    
    // Create projection chart SECOND (BOTTOM POSITION)
    const projCtx = document.getElementById('sipProjectionChart');
    if (projCtx) {
      new Chart(projCtx, {
        type: 'line',
        data: {
          labels: data.projection.labels,
          datasets: [{
            label: 'Projected Corpus',
            data: data.projection.datasets.projected_corpus,
            borderColor: '#3B82F6',
            backgroundColor: 'rgba(59, 130, 246, 0.1)',
            fill: true,
            tension: 0.4,
            pointRadius: 1,
            pointHoverRadius: 4
          }, {
            label: 'Cumulative Contribution', 
            data: data.projection.datasets.cumulative_contribution,
            borderColor: '#EF4444',
            backgroundColor: 'rgba(239, 68, 68, 0.1)',
            fill: false,
            tension: 0.4,
            pointRadius: 1,
            pointHoverRadius: 4
          }]
        },
        options: { 
          responsive: true,
          maintainAspectRatio: true,
          aspectRatio: 1.5,
          interaction: {
            mode: 'nearest',
            intersect: false
          },
          scales: {
            x: {
              title: { display: true, text: 'Time Period (Months)' },
              ticks: { maxTicksLimit: 10 }
            },
            y: {
              beginAtZero: true,
              title: { display: true, text: 'Amount (INR)' },
              ticks: {
                callback: function(value) {
                  return '‚Çπ' + (value/100000).toFixed(1) + 'L';
                }
              }
            }
          },
          plugins: {
            tooltip: {
              mode: 'index',
              intersect: false
            }
          }
        }
      });
    }
  }

  // Initialize with enhanced delay for proper loading
  setTimeout(initCharts, 500);
  </script>

  <script>
  function downloadHTML() {
    const html = document.documentElement.outerHTML;
    const blob = new Blob([html], { type: 'text/html' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'sip_report.html';
    a.click();
    URL.revokeObjectURL(url);
  }
  </script>
</body>
</html>