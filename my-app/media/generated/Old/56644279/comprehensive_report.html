<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Comprehensive SIP Analysis Report</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; margin: 0; padding: 20px; background-color: #f9fafb; color: #111827; }
    .container { max-width: 1000px; margin: 0 auto; background-color: #ffffff; padding: 2rem; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
    h1, h2, h3 { color: #1f2937; border-bottom: 2px solid #e5e7eb; padding-bottom: 8px; margin-top: 24px;}
    h1 { font-size: 2em; }
    h2 { font-size: 1.5em; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; margin-bottom: 20px; }
    th, td { border: 1px solid #ddd; padding: 12px; text-align: left; vertical-align: top;}
    th { background-color: #f3f4f6; font-weight: 600; }
    ul, ol { margin-left: 20px; }
    li { margin-bottom: 8px; }
    .controls { text-align: center; margin-bottom: 24px; padding: 16px; background-color: #f3f4f6; border-radius: 8px; }
    .controls button { background-color: #3B82F6; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-weight: bold; margin: 5px; transition: background-color 0.3s; }
    .controls button:hover { background-color: #2563EB; }
    .chart-container { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 8px; }
    @media print {
      body { padding: 0; }
      .container { box-shadow: none; border: none; }
      .controls { display: none; }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="controls">
      <button onclick="window.print()">Print Report</button>
      <button onclick="downloadHTML()">Download HTML</button>
    </div>

    <header style="text-align: center; margin-bottom: 2rem;">
      <h1>Financial Goal Plan: Child Marriage</h1>
      <p>A comprehensive analysis and investment strategy report.</p>
    </header>

    <section id="executive-summary">
      <h2>üéØ Executive Summary</h2>
      <p>This report outlines a comprehensive financial plan designed to achieve the goal of 'Child Marriage' with a target of <b>‚Çπ25,00,000</b> over a <b>7-year</b> period. After adjusting for a projected annual inflation rate of 5.5%, the required future corpus is calculated to be <b>‚Çπ36,36,697.58</b>. Based on a 'Moderate' risk profile with an expected annual return of 10%, a Systematic Investment Plan (SIP) of <b>‚Çπ30,051.48 per month</b> is required. The investment strategy recommends a balanced <b>50% allocation to Equity</b> and <b>50% to Debt</b>. At the end of the 84-month term, the projected corpus is estimated to be <b>‚Çπ36,53,839.84</b>, successfully meeting the financial objective. A key consideration in this plan is the consolidation of the entire equity portion into Large Cap funds due to a data retrieval issue preventing the shortlisting of Mid Cap funds; this introduces a concentration risk that is detailed further in the report.</p>
    </section>

    <section id="goal-inputs">
      <h2>üìù Goal Inputs</h2>
      <table>
        <thead><tr><th>Parameter</th><th>Value</th></tr></thead>
        <tbody>
          <tr><td>Financial Goal</td><td>Child Marriage</td></tr>
          <tr><td>Initial Target Amount</td><td>‚Çπ25,00,000.00</td></tr>
          <tr><td>Time Horizon</td><td>7 Years (84 Months)</td></tr>
          <tr><td>Risk Appetite</td><td>Moderate</td></tr>
          <tr><td>Currency</td><td>INR</td></tr>
        </tbody>
      </table>
    </section>

    <section id="inflation-adjustment">
      <h2>üí® Inflation Adjustment</h2>
       <p>Financial goals must account for inflation, which erodes the purchasing power of money over time. Assuming a conservative annual inflation rate of 5.5%, the initial target amount has been adjusted to reflect its future value at the end of the 7-year investment period.</p>
      <table>
        <thead><tr><th>Parameter</th><th>Value</th></tr></thead>
        <tbody>
          <tr><td>Unadjusted Target (Today's Value)</td><td>‚Çπ25,00,000.00</td></tr>
          <tr><td>Assumed Annual Inflation</td><td>5.5%</td></tr>
          <tr><td>Investment Period</td><td>7 Years</td></tr>
          <tr><td><b>Inflation-Adjusted Target (Future Value)</b></td><td><b>‚Çπ36,36,697.58</b></td></tr>
        </tbody>
      </table>
    </section>

    <section id="sip-calculation">
      <h2>üßÆ SIP Calculation</h2>
       <p>To reach the inflation-adjusted target, a specific monthly investment is calculated. This calculation is based on the 'Moderate' risk profile, which assumes an average annual return of 10% (or 0.833% per month) over the 84-month investment horizon.</p>
      <table>
        <thead><tr><th>Parameter</th><th>Value</th></tr></thead>
        <tbody>
          <tr><td>Adjusted Target Corpus</td><td>‚Çπ36,36,697.58</td></tr>
          <tr><td>Investment Duration (n)</td><td>84 Months</td></tr>
          <tr><td>Assumed Monthly Rate of Return (r)</td><td>0.833%</td></tr>
          <tr><td><b>Required Monthly SIP</b></td><td><b>‚Çπ30,051.48</b></td></tr>
        </tbody>
      </table>
    </section>

    <section id="asset-allocation-plan">
      <h2>üè¶ Asset Allocation & Fund Recommendations</h2>
      <p>The investment plan is structured around a balanced 50/50 split between equity and debt to align with the moderate risk profile. The following table details the final allocation and specific fund recommendations. <i>Note: The entire 50% equity allocation is directed to Large Cap funds as no Mid Cap funds were shortlisted due to a data retrieval error.</i></p>
      <table>
        <thead><tr><th>Asset Class</th><th>Category</th><th>Allocation %</th><th>Recommended Funds</th></tr></thead>
        <tbody>
            <tr><td><b>Equity</b></td><td>Large Cap Funds</td><td>50.0%</td><td><ul><li>Nippon India Large Cap Fund</li><li>Invesco India Largecap Fund</li><li>Canara Robeco Bluechip Equity Fund</li></ul></td></tr>
            <tr><td><b>Debt</b></td><td>Corporate Bond Funds</td><td>25.0%</td><td><ul><li>ICICI Prudential Corporate Bond Fund</li><li>Nippon India Corporate Bond Fund</li><li>Axis Corporate Bond Fund</li></ul></td></tr>
            <tr><td><b>Debt</b></td><td>Short Duration Funds</td><td>25.0%</td><td><ul><li>ICICI Prudential Short Term Fund</li><li>HDFC Short Term Debt Fund</li><li>Aditya Birla Sun Life Short Term Fund</li></ul></td></tr>
        </tbody>
      </table>
    </section>

    <section id="key-recommendations">
        <h2>üîë Key Recommendations</h2>
        <ol>
            <li><b>Implement the SIP:</b> Begin investing the monthly SIP of <b>‚Çπ30,051.48</b>. Distribute this amount according to the specified percentages: 50% (‚Çπ15,025.74) to a selected Large Cap fund, 25% (‚Çπ7,512.87) to a Corporate Bond fund, and 25% (‚Çπ7,512.87) to a Short Duration fund.</li>
            <li><b>Enhance Diversification:</b> To mitigate concentration risk, consider manually researching and adding a suitable Mid Cap fund to the portfolio in the future. This would involve rebalancing the 50% equity allocation between Large and Mid Cap funds.</li>
            <li><b>Annual Review:</b> Review the portfolio performance and asset allocation annually. Rebalance if the allocations deviate significantly from the 50/50 target due to market movements. This ensures the portfolio remains aligned with your risk profile.</li>
        </ol>
    </section>

    <section id="risk-factors-uncertainties">
      <h2>‚öñÔ∏è Risk Factors and Uncertainties</h2>
      <p>All investments carry inherent risks, and it is crucial to understand them. The projected returns of 10% annually are not guaranteed and are based on historical market performance and economic assumptions that may not hold true in the future. Market volatility can cause the value of equity investments to fluctuate significantly in the short term. Furthermore, this specific plan carries a notable <b>Concentration Risk</b>. Because the entire 50% equity portion is invested in Large Cap funds, the portfolio is less diversified than intended and may be overly exposed to the performance of large-capitalization stocks. This deviation from the original strategy, caused by a data retrieval error, leads to a <b>Missed Growth Opportunity</b>, as Mid Cap funds often provide higher growth potential. Investors should also be aware of <b>Interest Rate Risk</b>, which can affect the value of the debt fund portion of the portfolio, and <b>Inflation Risk</b>, where actual inflation could exceed the projected 5.5%, reducing the real return on investment. The plan's success is dependent on disciplined, consistent monthly investments and a long-term perspective.</p>
    </section>

    <section id="sip-charts">
      <h2>üìä SIP Projection & Allocation Charts</h2>
      <div style="display: block;">
        <!-- Asset Allocation FIRST (TOP) -->
        <div class="chart-container" style="margin-bottom: 30px; text-align: center;">
          <h3>Asset Allocation</h3>
          <div style="max-width: 500px; margin: 0 auto;">
            <canvas id="sipAllocationChart" width="400" height="300" style="max-width: 100%; height: auto;"></canvas>
          </div>
        </div>
        
        <!-- SIP Growth Projection SECOND (BOTTOM) -->
        <div class="chart-container" style="text-align: center;">
          <h3>SIP Growth Projection</h3>
          <div style="max-width: 800px; margin: 0 auto;">
            <canvas id="sipProjectionChart" width="600" height="400" style="max-width: 100%; height: auto;"></canvas>
          </div>
        </div>
      </div>
    </section>

    <section id="monthly-projection">
      <h2>üìà Monthly Projection (First 12 Months)</h2>
      <table>
        <thead><tr><th>Month</th><th>Cumulative Contribution</th><th>Projected Corpus</th></tr></thead>
        <tbody>
            <tr><td>M1</td><td>‚Çπ30,051.48</td><td>‚Çπ30,051.48</td></tr>
            <tr><td>M2</td><td>‚Çπ60,102.96</td><td>‚Çπ60,351.90</td></tr>
            <tr><td>M3</td><td>‚Çπ90,154.44</td><td>‚Çπ90,903.85</td></tr>
            <tr><td>M4</td><td>‚Çπ120,205.92</td><td>‚Çπ1,21,709.88</td></tr>
            <tr><td>M5</td><td>‚Çπ150,257.40</td><td>‚Çπ1,52,772.59</td></tr>
            <tr><td>M6</td><td>‚Çπ180,308.88</td><td>‚Çπ1,84,094.61</td></tr>
            <tr><td>M7</td><td>‚Çπ210,360.36</td><td>‚Çπ2,15,678.59</td></tr>
            <tr><td>M8</td><td>‚Çπ240,411.84</td><td>‚Çπ2,47,527.24</td></tr>
            <tr><td>M9</td><td>‚Çπ270,463.32</td><td>‚Çπ2,79,643.29</td></tr>
            <tr><td>M10</td><td>‚Çπ300,514.80</td><td>‚Çπ3,12,029.50</td></tr>
            <tr><td>M11</td><td>‚Çπ330,566.28</td><td>‚Çπ3,44,688.66</td></tr>
            <tr><td>M12</td><td>‚Çπ360,617.76</td><td>‚Çπ3,77,623.59</td></tr>
        </tbody>
      </table>
    </section>
  </div>

  <!-- Load Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Embed chart data -->
  <script id="sip-chart-data" type="application/json">
  {"projection":{"labels":["M1","M2","M3","M4","M5","M6","M7","M8","M9","M10","M11","M12","M13","M14","M15","M16","M17","M18","M19","M20","M21","M22","M23","M24","M25","M26","M27","M28","M29","M30","M31","M32","M33","M34","M35","M36","M37","M38","M39","M40","M41","M42","M43","M44","M45","M46","M47","M48","M49","M50","M51","M52","M53","M54","M55","M56","M57","M58","M59","M60","M61","M62","M63","M64","M65","M66","M67","M68","M69","M70","M71","M72","M73","M74","M75","M76","M77","M78","M79","M80","M81","M82","M83","M84"],"datasets":{"cumulative_contribution":[30051.48,60102.96,90154.44,120205.92,150257.4,180308.88,210360.36,240411.84,270463.32,300514.8,330566.28,360617.76,390669.24,420720.72,450772.2,480823.68,510875.16,540926.64,570978.12,601029.6,631081.08,661132.56,691184.04,721235.52,751287,781338.48,811389.96,841441.44,871492.92,901544.4,931595.88,961647.36,991698.84,1021750.32,1051801.8,1081853.28,1111904.76,1141956.24,1172007.72,1202059.2,1232110.68,1262162.16,1292213.64,1322265.12,1352316.6,1382368.08,1412419.56,1442471.04,1472522.52,1502574,1532625.48,1562676.96,1592728.44,1622779.92,1652831.4,1682882.88,1712934.36,1742985.84,1773037.32,1803088.8,1833140.28,1863191.76,1893243.24,1923294.72,1953346.2,1983397.68,2013449.16,2043500.64,2073552.12,2103603.6,2133655.08,2163706.56,2193758.04,2223809.52,2253861,2283912.48,2313963.96,2344015.44,2374066.92,2404118.4,2434169.88,2464221.36,2494272.84,2524324.32],"projected_corpus":[30051.48,60351.9,90903.85,121709.88,152772.59,184094.61,215678.59,247527.24,279643.29,312029.5,344688.66,377623.59,410837.15,444332.2,478111.66,512178.47,546535.59,581185.99,616132.67,651378.63,686926.9,722780.51,758942.5,795415.93,832203.88,869309.45,906735.77,944485.95,982563.13,1020970.49,1059711.24,1098788.54,1138205.61,1177965.66,1218071.98,1258527.9,1299336.78,1340502.01,1382026.99,1423915.19,1466170.15,1508795.42,1551794.57,1595171.21,1638928.98,1683071.55,1727602.66,1772526.07,1817845.59,1863565.04,1909688.24,1956219.04,2003161.35,2050519.06,2098296.11,2146496.48,2195124.18,2244183.25,2293677.77,2343611.83,2393989.59,2444815.22,2496092.88,2547826.79,2600021.31,2652680.82,2705809.83,2759412.91,2813494.69,2868059.81,2923112.99,2978658.93,3034702.42,3091248.27,3148301.31,3205866.49,3263948.78,3322553.19,3381684.77,3441348.61,3501550.85,3562296.64,3623591.24,3653839.84]}},"allocation":{"labels":["Equity","Debt"],"data":[50,50]}}
  </script>

  <!-- FIXED v11 chart rendering script -->
  <script>
  function initCharts() {
    if (typeof Chart === 'undefined') {
      console.error('Chart.js not loaded');
      return;
    }
    
    let data;
    try {
      const script = document.getElementById('sip-chart-data');
      data = script ? JSON.parse(script.textContent) : null;
    } catch (e) {
      console.warn('Chart data parse failed');
      data = null;
    }
    
    // Enhanced fallback with complete timeline
    if (!data) {
      data = {
        projection: {
          labels: ["M1","M2","M3","M4","M5","M6","M7","M8","M9","M10","M11","M12","M13","M14","M15","M16","M17","M18","M19","M20","M21","M22","M23","M24","M25","M26","M27","M28","M29","M30","M31","M32","M33","M34","M35","M36","M37","M38","M39","M40","M41","M42","M43","M44","M45","M46","M47","M48","M49","M50","M51","M52","M53","M54","M55","M56","M57","M58","M59","M60","M61","M62","M63","M64","M65","M66","M67","M68","M69","M70","M71","M72","M73","M74","M75","M76","M77","M78","M79","M80","M81","M82","M83","M84","M85","M86","M87","M88","M89","M90","M91","M92","M93","M94","M95","M96","M97","M98","M99","M100","M101","M102","M103","M104","M105","M106","M107","M108","M109","M110","M111","M112","M113","M114","M115","M116","M117","M118","M119","M120"],
          datasets: {
            cumulative_contribution: [25000,50000,75000,100000,125000,150000,175000,200000,225000,250000,275000,300000,325000,350000,375000,400000,425000,450000,475000,500000,525000,550000,575000,600000,625000,650000,675000,700000,725000,750000,775000,800000,825000,850000,875000,900000,925000,950000,975000,1000000,1025000,1050000,1075000,1100000,1125000,1150000,1175000,1200000,1225000,1250000,1275000,1300000,1325000,1350000,1375000,1400000,1425000,1450000,1475000,1500000,1525000,1550000,1575000,1600000,1625000,1650000,1675000,1700000,1725000,1750000,1775000,1800000,1825000,1850000,1875000,1900000,1925000,1950000,1975000,2000000,2025000,2050000,2075000,2100000,2125000,2150000,2175000,2200000,2225000,2250000,2275000,2300000,2325000,2350000,2375000,2400000,2425000,2450000,2475000,2500000,2525000,2550000,2575000,2600000,2625000,2650000,2675000,2700000,2725000,2750000,2775000,2800000,2825000,2850000,2875000,2900000,2925000,2950000,2975000,3000000],
            projected_corpus: [25250,50755,76519,102543,128831,155386,182212,209312,236692,264356,292308,320552,349093,377935,407082,436540,466312,496404,526821,557567,588648,620068,651832,683945,716412,749239,782430,815991,849927,884244,918948,954045,989540,1025440,1061750,1098476,1135626,1173205,1211220,1249678,1288586,1327951,1367780,1408080,1448859,1490125,1531885,1574148,1616922,1660215,1704035,1748392,1793293,1838750,1884770,1931365,1978544,2026318,2074697,2123692,2173315,2223577,2274490,2326066,2378316,2431252,2484887,2539233,2594302,2650106,2706658,2763971,2822058,2880932,2940607,3001097,3062415,3124575,3187591,3251477,3316247,3381916,3448499,3516010,3584465,3653879,3724267,3795645,3868028,3941432,4015873,4091366,4167928,4245574,4324322,4404188,4485188,4567340,4650661,4735168,4821880,4909814,4999990,5091425,5184139,5278150,5373478,5470142,5568161,5667556,5768346,5870552,5974194,6079293,6185870,6293947,6403545,6514686,6627391]
          }
        },
        allocation: { labels: ["Equity", "Debt"], data: [70, 30] }
      };
    }
    
    // Create allocation chart FIRST (TOP POSITION)
    const allocCtx = document.getElementById('sipAllocationChart');
    if (allocCtx) {
      new Chart(allocCtx, {
        type: 'doughnut',
        data: {
          labels: data.allocation.labels,
          datasets: [{ 
            data: data.allocation.data, 
            backgroundColor: ['#3B82F6', '#10B981'],
            borderWidth: 2 
          }]
        },
        options: { 
          responsive: true,
          maintainAspectRatio: true,
          aspectRatio: 1.33,
          plugins: {
            legend: { 
              position: 'bottom',
              labels: { padding: 15 }
            }
          }
        }
      });
    }
    
    // Create projection chart SECOND (BOTTOM POSITION)
    const projCtx = document.getElementById('sipProjectionChart');
    if (projCtx) {
      new Chart(projCtx, {
        type: 'line',
        data: {
          labels: data.projection.labels,
          datasets: [{
            label: 'Projected Corpus',
            data: data.projection.datasets.projected_corpus,
            borderColor: '#3B82F6',
            backgroundColor: 'rgba(59, 130, 246, 0.1)',
            fill: true,
            tension: 0.4,
            pointRadius: 1,
            pointHoverRadius: 4
          }, {
            label: 'Cumulative Contribution', 
            data: data.projection.datasets.cumulative_contribution,
            borderColor: '#EF4444',
            backgroundColor: 'rgba(239, 68, 68, 0.1)',
            fill: false,
            tension: 0.4,
            pointRadius: 1,
            pointHoverRadius: 4
          }]
        },
        options: { 
          responsive: true,
          maintainAspectRatio: true,
          aspectRatio: 1.5,
          interaction: {
            mode: 'nearest',
            intersect: false
          },
          scales: {
            x: {
              title: { display: true, text: 'Time Period (Months)' },
              ticks: { maxTicksLimit: 10 }
            },
            y: {
              beginAtZero: true,
              title: { display: true, text: 'Amount (INR)' },
              ticks: {
                callback: function(value) {
                  return '‚Çπ' + (value/100000).toFixed(1) + 'L';
                }
              }
            }
          },
          plugins: {
            tooltip: {
              mode: 'index',
              intersect: false
            }
          }
        }
      });
    }
  }

  // Initialize with enhanced delay for proper loading
  setTimeout(initCharts, 500);
  </script>

  <script>
  function downloadHTML() {
    const html = document.documentElement.outerHTML;
    const blob = new Blob([html], { type: 'text/html' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'sip_report.html';
    a.click();
    URL.revokeObjectURL(url);
  }
  </script>
</body>
</html>