<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Comprehensive SIP Goal Analysis Report: Retirement</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; margin: 0; padding: 20px; background-color: #f9fafb; color: #1f2937; }
    .container { max-width: 1200px; margin: 0 auto; background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
    h1 { font-size: 2.25rem; font-weight: bold; color: #111827; border-bottom: 2px solid #3B82F6; padding-bottom: 0.5rem; margin-bottom: 1.5rem; }
    h2 { font-size: 1.5rem; font-weight: bold; color: #111827; margin-top: 2rem; margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 1px solid #e5e7eb; }
    table { width: 100%; border-collapse: collapse; margin: 1.5rem 0; font-size: 0.9rem; }
    th, td { border: 1px solid #ddd; padding: 12px; text-align: left; vertical-align: top; }
    th { background-color: #f8f9fa; font-weight: 600; }
    p { line-height: 1.6; margin-bottom: 1rem; }
    ul, ol { margin-left: 1.5rem; margin-bottom: 1rem; }
    li { margin-bottom: 0.5rem; }
    .executive-summary { background-color: #eff6ff; border-left: 4px solid #3B82F6; padding: 1.5rem; margin-bottom: 2rem; border-radius: 4px; }
    .warning { background-color: #fffbeb; border-left: 4px solid #f59e0b; padding: 1rem; margin: 1rem 0; border-radius: 4px; }
    .no-print { display: block; }
    
    /* FIXED CHART CONTAINER STYLING - v15 NO GRID */
    .chart-container {
      margin-bottom: 30px; 
      padding: 20px; 
      border: 1px solid #e5e7eb; 
      border-radius: 8px; 
      text-align: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05); 
    }
    .chart-container h3 { 
      text-align: center; 
      font-size: 1.25rem; 
      font-weight: 600; 
      margin-bottom: 15px; 
      color: #1f2937;
    }
    .chart-container > div {
      margin: 0 auto;
    }

    @media print {
      .no-print { display: none; }
      body { padding: 0; background-color: #fff; -webkit-print-color-adjust: exact; }
      .container { box-shadow: none; border: none; padding: 0.5rem; }
      h1, h2 { margin-top: 1.5rem; }
      .chart-container { 
        page-break-inside: avoid; 
        margin: 15px 0;
      }
      canvas { max-height: 300px !important; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üìä Comprehensive SIP Goal Analysis Report: Retirement</h1>

    <div style="margin: 20px 0; text-align: center;" class="no-print">
      <button onclick="window.print()" style="margin: 5px; padding: 12px 24px; background-color: #3B82F6; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 1rem; font-weight: 500;">Print Report</button>
      <button onclick="downloadHTML()" style="margin: 5px; padding: 12px 24px; background-color: #10B981; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 1rem; font-weight: 500;">Download HTML</button>
    </div>

    <section id="executive-summary">
      <div class="executive-summary">
        <h2>üéØ Executive Summary</h2>
        <p>This report provides a detailed financial plan to achieve a retirement goal of <b>‚Çπ10,000,000</b> over a <b>10-year</b> period for a 50-year-old investor with a 'low_moderate' risk appetite. After factoring in an assumed annual inflation rate of 5.5%, the future value of the target corpus is calculated to be <b>‚Çπ17,081,444.58</b>. To meet this inflation-adjusted goal, a monthly Systematic Investment Plan (SIP) of <b>‚Çπ93,368.96</b> is required, assuming an 8% annualized return. The recommended strategic asset allocation is <b>40% in Equity</b> and <b>60% in Debt</b>. The projections and charts below illustrate the growth trajectory over 120 months, with the final projected corpus reaching approximately <b>‚Çπ17,040,198.90</b>.</p>
      </div>
    </section>

    <section id="goal-inputs">
      <h2>üìù Goal Inputs</h2>
      <table><thead><tr><th>Parameter</th><th>Value</th></tr></thead><tbody><tr><td>Financial Goal</td><td>Retirement</td></tr><tr><td>Current Age</td><td>50 years</td></tr><tr><td>Target Retirement Age</td><td>60 years</td></tr><tr><td>Time Horizon</td><td>10 years (120 months)</td></tr><tr><td>Target Amount (Today's Value)</td><td>‚Çπ10,000,000</td></tr><tr><td>Risk Appetite</td><td>Low-Moderate</td></tr></tbody></table>
    </section>

    <section id="inflation-adjustment">
      <h2>üéà Inflation Adjustment</h2>
      <p>To maintain purchasing power, the target amount has been adjusted for inflation over the 10-year horizon.</p>
      <table><thead><tr><th>Parameter</th><th>Value</th></tr></thead><tbody><tr><td>Assumed Annual Inflation</td><td>5.5%</td></tr><tr><td>Unadjusted Target</td><td>‚Çπ10,000,000.00</td></tr><tr><td><b>Inflation-Adjusted Target Corpus</b></td><td><b>‚Çπ17,081,444.58</b></td></tr></tbody></table>
    </section>

    <section id="sip-calculation">
      <h2>üßÆ SIP Calculation</h2>
      <p>The required monthly SIP is calculated based on the future value target and an expected rate of return consistent with the investor's risk profile.</p>
      <table><thead><tr><th>Parameter</th><th>Value</th></tr></thead><tbody><tr><td>Expected Annual Return (p.a.)</td><td>8.00%</td></tr><tr><td>Monthly Rate of Return</td><td>0.6667%</td></tr><tr><td>Investment Duration (Months)</td><td>120</td></tr><tr><td><b>Required Monthly SIP</b></td><td><b>‚Çπ93,368.96</b></td></tr></tbody></table>
    </section>

    <section id="asset-allocation">
      <h2>‚öñÔ∏è Asset Allocation Plan</h2>
      <p>Based on a 'low_moderate' risk appetite, the following strategic asset allocation is recommended to balance growth with capital preservation.</p>
      <div class='warning'>‚ö†Ô∏è <b>Data Integrity Warning:</b> An automated process to retrieve and verify currently available mutual funds failed (as reported in step T013). Therefore, while the categories listed below are strategically sound, their availability could not be confirmed. Fund selection should only proceed after this data issue is resolved.</div>
      <table><thead><tr><th>Asset Class</th><th>Allocation</th><th>Recommended Fund Categories</th></tr></thead><tbody><tr><td>Equity</td><td>40%</td><td><ul><li>Large Cap Funds</li><li>Mid Cap Funds</li></ul></td></tr><tr><td>Debt</td><td>60%</td><td><ul><li>Corporate Bond Funds</li><li>Short Duration Funds</li></ul></td></tr></tbody></table>
    </section>

    <section id="allocation-notes">
      <h2>üóíÔ∏è Allocation Notes & Risk Profiles</h2>
      <p>The chosen allocation aligns with the 'Low-Moderate' risk profile. This table provides context on how allocation strategies shift with different risk appetites.</p>
      <table><thead><tr><th>Risk Profile</th><th>Guideline & Description</th></tr></thead><tbody><tr><td>Very Low</td><td>Extremely conservative, e.g., 90% debt / 10% equity</td></tr><tr><td>Low</td><td>Conservative, e.g., 70% debt / 30% equity</td></tr><tr><td style='background-color: #e0f2fe;'><b>Low-Moderate (Selected)</b></td><td><b>Tilted conservative, e.g., 60% debt / 40% equity</b></td></tr><tr><td>Moderate</td><td>Balanced mix, e.g., 50% equity / 50% debt</td></tr><tr><td>High-Moderate</td><td>Tilted aggressive, e.g., 60% equity / 40% debt</td></tr><tr><td>High</td><td>Aggressive, e.g., 70% equity / 30% debt</td></tr><tr><td>Very High</td><td>Extremely aggressive, e.g., 90% equity / 10% debt</td></tr></tbody></table>
    </section>

    <!-- v15 FIXED CHART LAYOUT -->
    <section id="sip-charts">
      <h2>üìä SIP Projection & Allocation Charts</h2>
      <div style="display: block; max-width: 1000px; margin: 0 auto;">
        <!-- Asset Allocation FIRST (TOP) -->
        <div class="chart-container">
          <h3 style="margin-bottom: 15px;">Asset Allocation</h3>
          <div style="max-width: 500px; margin: 0 auto;">
            <canvas id="sipAllocationChart" width="400" height="300" style="max-width: 100%; height: auto;"></canvas>
          </div>
        </div>
        
        <!-- SIP Growth Projection SECOND (BOTTOM) -->
        <div class="chart-container">
          <h3 style="margin-bottom: 15px;">SIP Growth Projection</h3>
          <div style="max-width: 800px; margin: 0 auto;">
            <canvas id="sipProjectionChart" width="600" height="400" style="max-width: 100%; height: auto;"></canvas>
          </div>
        </div>
      </div>
    </section>

    <section id="key-recommendations">
      <h2>üîë Key Recommendations</h2>
      <ul>
        <li><b>Begin Immediately:</b> Start the monthly SIP of ‚Çπ93,368.96 to maximize the benefits of compounding over the 120-month horizon.</li>
        <li><b>Maintain Discipline:</b> Adhere to the 40% Equity and 60% Debt allocation strategy. Avoid making impulsive changes based on short-term market fluctuations.</li>
        <li><b>Annual Review:</b> Review the portfolio's performance and asset allocation at least once a year. Rebalance if the allocation deviates significantly (e.g., by more than 5%) from the target.</li>
        <li><b>Resolve Data Gaps:</b> Before selecting specific funds, the upstream data retrieval failure must be addressed to ensure that chosen funds align with the recommended categories and are available for investment.</li>
      </ul>
    </section>

    <section id="risk-factors">
      <h2>üìâ Risk Factors and Uncertainties</h2>
      <p>This financial plan is based on projections and assumptions that carry inherent risks. It is crucial to understand these uncertainties before committing to the investment strategy.</p>
      <ul>
        <li><b>Market Risk:</b> The assumed 8% annual return is an estimate, not a guarantee. Equity markets are volatile, and returns can fluctuate significantly in the short to medium term. A prolonged bear market could result in the final corpus being lower than projected.</li>
        <li><b>Inflation Risk:</b> The plan assumes a 5.5% average annual inflation rate. If actual inflation is consistently higher, the real value of the final corpus will be lower, potentially failing to meet retirement needs. This would necessitate a higher SIP amount or a higher-risk investment strategy.</li>
        <li><b>Interest Rate Risk:</b> The 60% allocation to debt funds is subject to interest rate risk. If interest rates rise, the value of existing bonds (and thus the NAV of bond funds) may fall. This primarily affects longer-duration funds.</li>
        <li><b>Data Integrity Risk:</b> As highlighted, the automated verification of available fund categories failed. This introduces a significant uncertainty into the plan. The recommended categories may not have suitable, high-quality funds available, requiring a revision of the strategy once accurate data is obtained.</li>
        <li><b>Execution Risk:</b> The success of this plan is entirely dependent on the investor's discipline. Missing SIP payments, withdrawing funds prematurely, or making emotional investment decisions can severely impact the final outcome and jeopardize the retirement goal.</li>
      </ul>
    </section>

    <section id="sip-projection-summary">
      <h2>üí∞ SIP Projection Summary (Full Horizon)</h2>
      <p>Over the full 10-year (120-month) investment period, the plan is projected to achieve the following results:</p>
      <table><thead><tr><th>Metric</th><th>Projected Value</th></tr></thead><tbody><tr><td>Total Contributions</td><td>‚Çπ11,204,275.20</td></tr><tr><td><b>Final Corpus Value</b></td><td><b>‚Çπ17,040,198.90</b></td></tr><tr><td>Total Wealth Gain</td><td>‚Çπ5,835,923.70</td></tr></tbody></table>
    </section>

    <section id="monthly-projection">
      <h2>üìà Monthly Projection (First 12 Months)</h2>
      <table><thead><tr><th>Month</th><th>Cumulative Contribution</th><th>Projected Corpus</th></tr></thead><tbody><tr><td>M1</td><td>‚Çπ93,368.96</td><td>‚Çπ93,368.96</td></tr><tr><td>M2</td><td>‚Çπ186,737.92</td><td>‚Çπ187,360.38</td></tr><tr><td>M3</td><td>‚Çπ280,106.88</td><td>‚Çπ281,978.41</td></tr><tr><td>M4</td><td>‚Çπ373,475.84</td><td>‚Çπ377,227.20</td></tr><tr><td>M5</td><td>‚Çπ466,844.80</td><td>‚Çπ473,111.00</td></tr><tr><td>M6</td><td>‚Çπ560,213.76</td><td>‚Çπ569,634.05</td></tr><tr><td>M7</td><td>‚Çπ653,582.72</td><td>‚Çπ666,800.64</td></tr><tr><td>M8</td><td>‚Çπ746,951.68</td><td>‚Çπ764,615.08</td></tr><tr><td>M9</td><td>‚Çπ840,320.64</td><td>‚Çπ863,081.71</td></tr><tr><td>M10</td><td>‚Çπ933,689.60</td><td>‚Çπ962,204.91</td></tr><tr><td>M11</td><td>‚Çπ1,027,058.56</td><td>‚Çπ1,061,989.12</td></tr><tr><td>M12</td><td>‚Çπ1,120,427.52</td><td>‚Çπ1,162,438.80</td></tr></tbody></table>
      <p><em>Note: Complete projection timeline (120 months) is visualized in the chart section above.</em></p>
    </section>

  </div>

  <!-- v15 SCRIPTING AND DATA EMBEDDING -->
  <script id="chart-data" type="application/json">
    {"projection":{"labels":["M1","M2","M3","M4","M5","M6","M7","M8","M9","M10","M11","M12","M13","M14","M15","M16","M17","M18","M19","M20","M21","M22","M23","M24","M25","M26","M27","M28","M29","M30","M31","M32","M33","M34","M35","M36","M37","M38","M39","M40","M41","M42","M43","M44","M45","M46","M47","M48","M49","M50","M51","M52","M53","M54","M55","M56","M57","M58","M59","M60","M61","M62","M63","M64","M65","M66","M67","M68","M69","M70","M71","M72","M73","M74","M75","M76","M77","M78","M79","M80","M81","M82","M83","M84","M85","M86","M87","M88","M89","M90","M91","M92","M93","M94","M95","M96","M97","M98","M99","M100","M101","M102","M103","M104","M105","M106","M107","M108","M109","M110","M111","M112","M113","M114","M115","M116","M117","M118","M119","M120"],"datasets":{"cumulative_contribution":[93368.96,186737.92,280106.88,373475.84,466844.8,560213.76,653582.72,746951.68,840320.64,933689.6,1027058.56,1120427.52,1213796.48,1307165.44,1400534.4,1493903.36,1587272.32,1680641.28,1774010.24,1867379.2,1960748.16,2054117.12,2147486.08,2240855.04,2334224,2427592.96,2520961.92,2614330.88,2707699.84,2801068.8,2894437.76,2987806.72,3081175.68,3174544.64,3267913.6,3361282.56,3454651.52,3548020.48,3641389.44,3734758.4,3828127.36,3921496.32,4014865.28,4108234.24,4201603.2,4294972.16,4388341.12,4481710.08,4575079.04,4668448,4761816.96,4855185.92,4948554.88,5041923.84,5135292.8,5228661.76,5322030.72,5415399.68,5508768.64,5602137.6,5695506.56,5788875.52,5882244.48,5975613.44,6068982.4,6162351.36,6255720.32,6349089.28,6442458.24,6535827.2,6629196.16,6722565.12,6815934.08,6909303.04,7002672,7096040.96,7189409.92,7282778.88,7376147.84,7469516.8,7562885.76,7656254.72,7749623.68,7842992.64,7936361.6,8029730.56,8123099.52,8216468.48,8309837.44,8403206.4,8496575.36,8589944.32,8683313.28,8776682.24,8870051.2,8963420.16,9056789.12,9150158.08,9243527.04,9336896,9430264.96,9523633.92,9617002.88,9710371.84,9803740.8,9897109.76,9990478.72,10083847.68,10177216.64,10270585.6,10363954.56,10457323.52,10550692.48,10644061.44,10737430.4,10830799.36,10924168.32,11017537.28,11110906.24,11204275.2],"projected_corpus":[93368.96,187360.38,281978.41,377227.2,473111,569634.05,666800.64,764615.08,863081.71,962204.91,1061989.12,1162438.8,1263558.46,1365352.64,1467825.91,1570982.84,1674828.02,1779366.07,1884601.64,1990539.39,2097184.01,2204540.23,2312612.78,2421406.44,2530926,2641176.28,2752162.13,2863888.42,2976360.03,3089581.87,3203558.85,3318295.94,3433798.11,3550070.38,3667117.76,3784945.31,3903558.11,4022961.28,4143159.94,4264159.27,4385964.47,4508580.77,4632013.43,4756267.75,4881349.07,5007262.78,5134014.28,5261608.99,5390052.39,5519349.95,5649507.2,5780529.7,5912423.01,6045192.7,6178844.38,6313383.67,6448816.21,6585147.66,6722383.68,6860529.97,6999592.2,7139576.08,7280487.35,7422331.75,7565115.02,7708842.94,7853521.28,7999155.85,8145752.47,8293316.99,8441855.27,8591373.21,8741876.71,8893371.69,9045864.09,9199359.88,9353865.01,9509385.46,9665927.2,9823496.22,9982098.53,10141740.15,10302427.13,10464165.52,10626961.42,10790820.94,10955750.21,11121755.39,11288842.66,11457018.23,11626288.35,11796659.3,11968137.36,12140728.84,12314440.06,12489277.37,12665247.16,12842355.83,13020609.8,13200015.53,13380579.51,13562308.26,13745208.31,13929286.22,14114548.59,14301002.04,14488653.22,14677508.79,14867575.46,15058860,15251369.2,15445109.89,15640088.92,15836313.19,16033789.62,16232525.17,16432526.83,16633801.65,16836356.66,17040198.9]}},"allocation":{"labels":["Equity","Debt"],"data":[40,60],"meta":{"recommended_fund_categories":{"equity":["Large Cap Funds","Mid Cap Funds"],"debt":["Corporate Bond Funds","Short Duration Funds"],"elss_optional":true}}}}
  </script>

  <script>
    function initCharts() {
      if (typeof Chart === 'undefined') {
        console.error('Chart.js not loaded');
        return;
      }
      
      let data;
      try {
        const script = document.getElementById('chart-data');
        data = script ? JSON.parse(script.textContent) : null;
      } catch (e) {
        console.warn('Chart data parse failed');
        data = null;
      }
      
      if (!data) {
        console.error('No chart data found or parsed.');
        return;
      }
      
      // Create allocation chart FIRST (TOP POSITION)
      const allocCtx = document.getElementById('sipAllocationChart');
      if (allocCtx) {
        new Chart(allocCtx, {
          type: 'doughnut',
          data: {
            labels: data.allocation.labels,
            datasets: [{ 
              data: data.allocation.data, 
              backgroundColor: ['#3B82F6', '#10B981'],
              borderWidth: 2 
            }]
          },
          options: { 
            responsive: true,
            maintainAspectRatio: true,
            aspectRatio: 1.33,
            plugins: {
              legend: { 
                position: 'bottom',
                labels: { padding: 15 }
              }
            }
          }
        });
      }
      
      // Create projection chart SECOND (BOTTOM POSITION)
      const projCtx = document.getElementById('sipProjectionChart');
      if (projCtx) {
        new Chart(projCtx, {
          type: 'line',
          data: {
            labels: data.projection.labels,
            datasets: [{
              label: 'Projected Corpus',
              data: data.projection.datasets.projected_corpus,
              borderColor: '#3B82F6',
              backgroundColor: 'rgba(59, 130, 246, 0.1)',
              fill: true,
              tension: 0.4,
              pointRadius: 1,
              pointHoverRadius: 4
            }, {
              label: 'Cumulative Contribution', 
              data: data.projection.datasets.cumulative_contribution,
              borderColor: '#EF4444',
              backgroundColor: 'rgba(239, 68, 68, 0.1)',
              fill: false,
              tension: 0.4,
              pointRadius: 1,
              pointHoverRadius: 4
            }]
          },
          options: { 
            responsive: true,
            maintainAspectRatio: true,
            aspectRatio: 1.5,
            interaction: {
              mode: 'nearest',
              intersect: false
            },
            scales: {
              x: {
                title: { display: true, text: 'Time Period (Months)' },
                ticks: { maxTicksLimit: 12 }
              },
              y: {
                beginAtZero: true,
                title: { display: true, text: 'Amount (INR)' },
                ticks: {
                  callback: function(value) {
                    return '‚Çπ' + (value/100000).toFixed(1) + 'L';
                  }
                }
              }
            },
            plugins: {
              tooltip: {
                mode: 'index',
                intersect: false
              }
            }
          }
        });
      }
    }

    function downloadHTML() {
      const html = document.documentElement.outerHTML;
      const blob = new Blob([html], { type: 'text/html' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'comprehensive_sip_report.html';
      a.click();
      URL.revokeObjectURL(url);
    }

    setTimeout(initCharts, 500);
  </script>
</body>
</html>