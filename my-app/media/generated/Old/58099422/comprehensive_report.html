<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Comprehensive Retirement SIP Analysis</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background-color: #f9fafb; }
    .container { max-width: 1000px; margin: 0 auto; background-color: white; padding: 2rem; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
    h1, h2, h3 { color: #111827; margin-top: 1.5em; margin-bottom: 0.5em; }
    h1 { font-size: 2em; border-bottom: 2px solid #e5e7eb; padding-bottom: 0.5rem; }
    h2 { font-size: 1.5em; border-bottom: 1px solid #e5e7eb; padding-bottom: 0.3rem; }
    h3 { font-size: 1.2em; }
    table { width: 100%; border-collapse: collapse; margin: 20px 0; }
    th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
    th { background-color: #f8f9fa; font-weight: bold; }
    p, li { line-height: 1.6; color: #374151; }
    .chart-container { margin: 20px 0; padding: 20px; border: 1px solid #e5e7eb; border-radius: 8px; }
    .no-print { display: block; }
    @media print { .no-print { display: none; } }
    .button { margin: 5px; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; color: white; font-weight: bold; }
    .print-btn { background-color: #3B82F6; }
    .download-btn { background-color: #10B981; }
  </style>
</head>
<body>
  <div class="container">
    <h1>üìä Comprehensive Retirement SIP Analysis</h1>

    <section id="executive-summary">
      <h2>üéØ Executive Summary</h2>
      <p>This report outlines a strategic investment plan designed to achieve a retirement goal of <b>‚Çπ3,00,00,000</b> over a <b>10-year</b> period for an investor with a 'moderate' risk appetite. After factoring in a projected annual inflation rate of 5.5%, the target corpus is adjusted to <b>‚Çπ5,12,44,333.72</b>. To reach this goal, a monthly Systematic Investment Plan (SIP) of <b>‚Çπ2,50,161.41</b> is required, assuming a conservative 10% annualized return. The core of the strategy is a balanced asset allocation of <b>50% in Equity</b> and <b>50% in Debt</b>, aimed at capturing growth while mitigating volatility. Key recommendations include adopting this allocation, selecting appropriate funds, and implementing a disciplined annual rebalancing strategy.</p>
    </section>

    <section id="goal-inputs">
      <h2>üßÆ Goal Inputs & Investor Profile</h2>
      <table>
        <thead><tr><th>Parameter</th><th>Value</th></tr></thead>
        <tbody>
          <tr><td>Goal Type</td><td>Retirement</td></tr>
          <tr><td>Target Amount</td><td>‚Çπ3,00,00,000</td></tr>
          <tr><td>Time Horizon</td><td>10 Years (120 Months)</td></tr>
          <tr><td>Risk Appetite</td><td>Moderate</td></tr>
        </tbody>
      </table>
    </section>

    <section id="inflation-adjustment">
      <h2>üéà Inflation-Adjusted Target</h2>
      <p>To ensure future purchasing power is preserved, the target amount has been adjusted for inflation. This calculation provides a more realistic goal for retirement planning.</p>
      <table>
        <thead><tr><th>Parameter</th><th>Value</th></tr></thead>
        <tbody>
          <tr><td>Unadjusted Target</td><td>‚Çπ3,00,00,000.00</td></tr>
          <tr><td>Assumed Annual Inflation</td><td>5.5%</td></tr>
          <tr><td>Investment Duration</td><td>10 Years</td></tr>
          <tr><td><b>Inflation-Adjusted Target</b></td><td><b>‚Çπ5,12,44,333.72</b></td></tr>
        </tbody>
      </table>
    </section>

    <section id="sip-calculation">
      <h2>üî¢ Monthly SIP Calculation</h2>
      <p>The following calculation determines the required monthly investment to reach the inflation-adjusted target corpus based on the investor's risk profile and time horizon.</p>
      <table>
        <thead><tr><th>Parameter</th><th>Value</th></tr></thead>
        <tbody>
          <tr><td>Adjusted Target Corpus</td><td>‚Çπ5,12,44,333.72</td></tr>
          <tr><td>Assumed Annual Return (Moderate Risk)</td><td>10.0%</td></tr>
          <tr><td>Total Investment Period</td><td>120 Months</td></tr>
          <tr><td><b>Required Monthly SIP</b></td><td><b>‚Çπ2,50,161.41</b></td></tr>
        </tbody>
      </table>
    </section>

    <section id="asset-allocation">
      <h2>üß≠ Strategic Asset Allocation Plan</h2>
      <p>A balanced allocation is recommended to align with the 'moderate' risk profile, spreading investments across growth and stability-oriented assets.</p>
      <table>
        <thead><tr><th>Asset Class</th><th>Fund Category</th><th>Target Allocation</th></tr></thead>
        <tbody>
          <tr><td>Equity</td><td>Large Cap Funds</td><td>30%</td></tr>
          <tr><td>Equity</td><td>Mid Cap Funds</td><td>20%</td></tr>
          <tr><td>Debt</td><td>Corporate Bond Funds</td><td>30%</td></tr>
          <tr><td>Debt</td><td>Short Duration Funds</td><td>20%</td></tr>
        </tbody>
      </table>
    </section>

    <section id="key-recommendations">
        <h2>üîë Key Recommendations</h2>
        <ol>
            <li><b>Adopt the proposed 50/50 Equity/Debt allocation</b> with the sub-category breakdown: 30% Large Cap, 20% Mid Cap, 30% Corporate Bond, and 20% Short Duration.</li>
            <li><b>Initiate a selection process</b> to identify high-quality funds within each recommended category to build a diversified portfolio.</li>
            <li><b>Maintain Investment Discipline:</b> Consistently invest the monthly SIP amount regardless of market fluctuations to benefit from rupee cost averaging.</li>
            <li><b>Establish a formal rebalancing policy</b> to review the portfolio annually and adjust allocations back to their original targets if they drift by more than 5%.</li>
        </ol>
    </section>

    <section id="risk-factors">
      <h2>‚ö†Ô∏è Risk Factors and Uncertainties</h2>
      <p>While this plan is built on sound financial principles, all investments are subject to risks. It is crucial to understand these factors. The primary risk is <b>Market Risk</b>; the value of equity investments can fluctuate significantly due to economic conditions, political events, and market sentiment. The projected 10% return is an average, and actual returns may vary. Another key factor is <b>Inflation Risk</b>, where the actual rate of inflation could exceed the 5.5% assumption, eroding the real value of the final corpus. The debt portion of the portfolio is exposed to <b>Interest Rate Risk</b>; a rise in interest rates can lead to a fall in the value of existing bonds. There is also <b>Execution Risk</b>, which stems from investor behavior. Failing to consistently invest the SIP amount, panicking during market downturns, or neglecting to rebalance the portfolio can lead to significant underperformance relative to the plan's projection. Finally, <b>Fund Selection Risk</b> is inherent in this strategy; choosing underperforming funds within the recommended categories will directly impact the ability to achieve the target corpus. Diligent research and ongoing monitoring are essential mitigants.</p>
    </section>

    <section id="sip-charts">
      <h2>üìä SIP Projection & Allocation Charts</h2>
      <div style="display: block;">
        <!-- Asset Allocation FIRST (TOP) -->
        <div class="chart-container" style="margin-bottom: 30px; text-align: center;">
          <h3>Asset Allocation</h3>
          <div style="max-width: 500px; margin: 0 auto;">
            <canvas id="sipAllocationChart" width="400" height="300" style="max-width: 100%; height: auto;"></canvas>
          </div>
        </div>
        <!-- SIP Growth Projection SECOND (BOTTOM) -->
        <div class="chart-container" style="text-align: center;">
          <h3>SIP Growth Projection</h3>
          <div style="max-width: 800px; margin: 0 auto;">
            <canvas id="sipProjectionChart" width="600" height="400" style="max-width: 100%; height: auto;"></canvas>
          </div>
        </div>
      </div>
    </section>

    <section id="monthly-projection">
      <h2>üìà Monthly Projection (First 12 Months)</h2>
      <table>
        <thead>
          <tr><th>Month</th><th>Cumulative Contribution</th><th>Projected Corpus</th></tr>
        </thead>
        <tbody>
          <tr><td>M1</td><td>‚Çπ2,50,161.41</td><td>‚Çπ2,50,161.41</td></tr>
          <tr><td>M2</td><td>‚Çπ5,00,322.82</td><td>‚Çπ5,02,407.50</td></tr>
          <tr><td>M3</td><td>‚Çπ7,50,484.23</td><td>‚Çπ7,56,755.63</td></tr>
          <tr><td>M4</td><td>‚Çπ10,00,645.64</td><td>‚Çπ10,13,225.96</td></tr>
          <tr><td>M5</td><td>‚Çπ12,50,807.05</td><td>‚Çπ12,71,838.65</td></tr>
          <tr><td>M6</td><td>‚Çπ15,00,968.46</td><td>‚Çπ15,32,613.97</td></tr>
          <tr><td>M7</td><td>‚Çπ17,51,129.87</td><td>‚Çπ17,95,572.42</td></tr>
          <tr><td>M8</td><td>‚Çπ20,01,291.28</td><td>‚Çπ20,60,734.59</td></tr>
          <tr><td>M9</td><td>‚Çπ22,51,452.69</td><td>‚Çπ23,28,121.21</td></tr>
          <tr><td>M10</td><td>‚Çπ25,01,614.10</td><td>‚Çπ25,97,753.22</td></tr>
          <tr><td>M11</td><td>‚Çπ27,51,775.51</td><td>‚Çπ28,69,651.83</td></tr>
          <tr><td>M12</td><td>‚Çπ30,01,936.92</td><td>‚Çπ31,43,838.43</td></tr>
        </tbody>
      </table>
      <p><em>Note: The full 120-month projection is visualized in the SIP Growth Projection chart above.</em></p>
    </section>

    <div class="no-print" style="margin: 40px 0; text-align: center;">
      <button onclick="window.print()" class="button print-btn">Print Report</button>
      <button onclick="downloadHTML()" class="button download-btn">Download HTML</button>
    </div>

  </div>

  <!-- Load Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Embed chart data -->
  <script id="sip-chart-data" type="application/json">
  {"projection":{"labels":["M1","M2","M3","M4","M5","M6","M7","M8","M9","M10","M11","M12","M13","M14","M15","M16","M17","M18","M19","M20","M21","M22","M23","M24","M25","M26","M27","M28","M29","M30","M31","M32","M33","M34","M35","M36","M37","M38","M39","M40","M41","M42","M43","M44","M45","M46","M47","M48","M49","M50","M51","M52","M53","M54","M55","M56","M57","M58","M59","M60","M61","M62","M63","M64","M65","M66","M67","M68","M69","M70","M71","M72","M73","M74","M75","M76","M77","M78","M79","M80","M81","M82","M83","M84","M85","M86","M87","M88","M89","M90","M91","M92","M93","M94","M95","M96","M97","M98","M99","M100","M101","M102","M103","M104","M105","M106","M107","M108","M109","M110","M111","M112","M113","M114","M115","M116","M117","M118","M119","M120"],"datasets":{"cumulative_contribution":[250161.41,500322.82,750484.23,1000645.64,1250807.05,1500968.46,1751129.87,2001291.28,2251452.69,2501614.1,2751775.51,3001936.92,3252098.33,3502259.74,3752421.15,4002582.56,4252743.97,4502905.38,4753066.79,5003228.2,5253389.61,5503551.02,5753712.43,6003873.84,6254035.25,6504196.66,6754358.07,7004519.48,7254680.89,7504842.3,7755003.71,8005165.12,8255326.53,8505487.94,8755649.35,9005810.76,9255972.17,9506133.58,9756294.99,10006456.4,10256617.81,10506779.22,10756940.63,11007102.04,11257263.45,11507424.86,11757586.27,12007747.68,12257909.09,12508070.5,12758231.91,13008393.32,13258554.73,13508716.14,13758877.55,14009038.96,14259200.37,14509361.78,14759523.19,15009684.6,15259846.01,15510007.42,15760168.83,16010330.24,16260491.65,16510653.06,16760814.47,17010975.88,17261137.29,17511298.7,17761460.11,18011621.52,18261782.93,18511944.34,18762105.75,19012267.16,19262428.57,19512589.98,19762751.39,20012912.8,20263074.21,20513235.62,20763397.03,21013558.44,21263719.85,21513881.26,21764042.67,22014204.08,22264365.49,22514526.9,22764688.31,23014849.72,23265011.13,23515172.54,23765333.95,24015495.36,24265656.77,24515818.18,24765979.59,25016141.0,25266302.41,25516463.82,25766625.23,26016786.64,26266948.05,26517109.46,26767270.87,27017432.28,27267593.69,27517755.1,27767916.51,28018077.92,28268239.33,28518400.74,28768562.15,29018723.56,29268884.97,29519046.38,29769207.79,30019369.2],"projected_corpus":[250161.41,502407.5,756755.63,1013225.96,1271838.65,1532613.97,1795572.42,2060734.59,2328121.21,2597753.22,2869651.83,3143838.43,3420334.42,3699161.21,3980340.22,4263893.05,4549841.32,4838206.66,5129010.82,5422275.58,5718022.9,6016274.75,6317053.11,6620380.05,6926277.89,7234768.97,7545875.71,7859620.67,8176026.51,8495116.03,8816912.16,9141437.93,9468716.48,9798770.98,10131624.74,10467301.28,10805824.16,11147217.03,11491503.54,11838707.37,12188852.26,12541962.06,12898060.75,13257172.29,13619320.72,13984530.1,14352824.51,14724228.18,15098765.41,15476460.49,15857337.82,16241421.97,16628737.66,17019309.64,17413162.89,17810322.42,18210813.44,18614661.22,19021891.06,19432528.32,19846598.42,20264126.91,20685139.3,21109661.13,21537718.01,21969335.66,22404540.09,22843357.29,23285813.3,23731934.25,24181746.36,24635275.92,2509259.22,25553592.79,26018433.22,26487097.16,26959611.3,27435992.42,27916267.36,28400463.12,28888606.68,29380725.13,29876845.54,30376995.05,30881199.84,31389487.17,31901884.23,32418418.27,32939116.75,33464007.25,33993117.31,34526474.62,35064106.94,35606042.17,36152308.22,36702933.12,37257945.06,37817372.27,38381243.04,38949585.74,39522428.92,40099801.32,40681731.83,41268249.62,41859384.03,42455164.53,43055620.57,43660781.74,44270677.58,44885337.89,45504792.71,46129072.18,46758206.61,47392226.33,48031161.85,48675043.66,49323902.32,49977768.47,50636673.54,51300649.02]}},"allocation":{"labels":["Equity","Debt"],"data":[50,50],"meta":{"recommended_fund_categories":{"equity":["Large Cap Funds","Mid Cap Funds"],"debt":["Corporate Bond Funds","Short Duration Funds"],"elss_optional":true}}}} 
  </script>

  <!-- ENHANCED chart rendering with proper layout and sizing -->
  <script>
  function initCharts() {
    if (typeof Chart === 'undefined') {
      console.error('Chart.js not loaded');
      return;
    }
    
    let data;
    try {
      const script = document.getElementById('sip-chart-data');
      data = script ? JSON.parse(script.textContent) : null;
    } catch (e) {
      console.warn('Chart data parse failed');
      data = null;
    }
    
    // Enhanced fallback with complete timeline
    if (!data) {
      console.warn('Using fallback chart data.');
      data = {
        projection: {
          labels: ["M1","M2","M3","M4","M5","M6","M7","M8","M9","M10","M11","M12","M13","M14","M15","M16","M17","M18","M19","M20","M21","M22","M23","M24","M25","M26","M27","M28","M29","M30","M31","M32","M33","M34","M35","M36","M37","M38","M39","M40","M41","M42","M43","M44","M45","M46","M47","M48","M49","M50","M51","M52","M53","M54","M55","M56","M57","M58","M59","M60","M61","M62","M63","M64","M65","M66","M67","M68","M69","M70","M71","M72","M73","M74","M75","M76","M77","M78","M79","M80","M81","M82","M83","M84","M85","M86","M87","M88","M89","M90","M91","M92","M93","M94","M95","M96","M97","M98","M99","M100","M101","M102","M103","M104","M105","M106","M107","M108","M109","M110","M111","M112","M113","M114","M115","M116","M117","M118","M119","M120"],
          datasets: {
            cumulative_contribution: [25000,50000,75000,100000,125000,150000,175000,200000,225000,250000,275000,300000,325000,350000,375000,400000,425000,450000,475000,500000,525000,550000,575000,600000,625000,650000,675000,700000,725000,750000,775000,800000,825000,850000,875000,900000,925000,950000,975000,1000000,1025000,1050000,1075000,1100000,1125000,1150000,1175000,1200000,1225000,1250000,1275000,1300000,1325000,1350000,1375000,1400000,1425000,1450000,1475000,1500000,1525000,1550000,1575000,1600000,1625000,1650000,1675000,1700000,1725000,1750000,1775000,1800000,1825000,1850000,1875000,1900000,1925000,1950000,1975000,2000000,2025000,2050000,2075000,2100000,2125000,2150000,2175000,2200000,2225000,2250000,2275000,2300000,2325000,2350000,2375000,2400000,2425000,2450000,2475000,2500000,2525000,2550000,2575000,2600000,2625000,2650000,2675000,2700000,2725000,2750000,2775000,2800000,2825000,2850000,2875000,2900000,2925000,2950000,2975000,3000000],
            projected_corpus: [25250,50755,76519,102543,128831,155386,182212,209312,236692,264356,292308,320552,349093,377935,407082,436540,466312,496404,526821,557567,588648,620068,651832,683945,716412,749239,782430,815991,849927,884244,918948,954045,989540,1025440,1061750,1098476,1135626,1173205,1211220,1249678,1288586,1327951,1367780,1408080,1448859,1490125,1531885,1574148,1616922,1660215,1704035,1748392,1793293,1838750,1884770,1931365,1978544,2026318,2074697,2123692,2173315,2223577,2274490,2326066,2378316,2431252,2484887,2539233,2594302,2650106,2706658,2763971,2822058,2880932,2940607,3001097,3062415,3124575,3187591,3251477,3316247,3381916,3448499,3516010,3584465,3653879,3724267,3795645,3868028,3941432,4015873,4091366,4167928,4245574,4324322,4404188,4567340,4650661,4735168,4821880,4909814,4999990,5091425,5184139,5278150,5373478,5470142,5568161,5667556,5768346,5870552,5974194,6079293,6185870,6293947,6403545,6514686,6627391]
          }
        },
        allocation: { labels: ["Equity", "Debt"], data: [70, 30] }
      };
    }
    
    // Create allocation chart FIRST (TOP POSITION)
    const allocCtx = document.getElementById('sipAllocationChart');
    if (allocCtx) {
      new Chart(allocCtx, {
        type: 'doughnut',
        data: {
          labels: data.allocation.labels,
          datasets: [{ 
            data: data.allocation.data, 
            backgroundColor: ['#3B82F6', '#10B981'],
            borderWidth: 2 
          }]
        },
        options: { 
          responsive: true,
          maintainAspectRatio: true,
          aspectRatio: 1.33,
          plugins: {
            legend: { 
              position: 'bottom',
              labels: { padding: 15 }
            }
          }
        }
      });
    }
    
    // Create projection chart SECOND (BOTTOM POSITION)
    const projCtx = document.getElementById('sipProjectionChart');
    if (projCtx) {
      new Chart(projCtx, {
        type: 'line',
        data: {
          labels: data.projection.labels,
          datasets: [{
            label: 'Projected Corpus',
            data: data.projection.datasets.projected_corpus,
            borderColor: '#3B82F6',
            backgroundColor: 'rgba(59, 130, 246, 0.1)',
            fill: true,
            tension: 0.4,
            pointRadius: 1,
            pointHoverRadius: 4
          }, {
            label: 'Cumulative Contribution', 
            data: data.projection.datasets.cumulative_contribution,
            borderColor: '#EF4444',
            backgroundColor: 'rgba(239, 68, 68, 0.1)',
            fill: false,
            tension: 0.4,
            pointRadius: 1,
            pointHoverRadius: 4
          }]
        },
        options: { 
          responsive: true,
          maintainAspectRatio: true,
          aspectRatio: 1.5,
          interaction: {
            mode: 'nearest',
            intersect: false
          },
          scales: {
            x: {
              title: { display: true, text: 'Time Period (Months)' },
              ticks: { maxTicksLimit: 10 }
            },
            y: {
              beginAtZero: true,
              title: { display: true, text: 'Amount (INR)' },
              ticks: {
                callback: function(value) {
                  if (value >= 10000000) return '‚Çπ' + (value/10000000).toFixed(2) + 'Cr';
                  return '‚Çπ' + (value/100000).toFixed(1) + 'L';
                }
              }
            }
          },
          plugins: {
            tooltip: {
              mode: 'index',
              intersect: false
            }
          }
        }
      });
    }
  }

  // Initialize with enhanced delay for proper loading
  setTimeout(initCharts, 500);

  function downloadHTML() {
    const html = document.documentElement.outerHTML;
    const blob = new Blob([html], { type: 'text/html' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'sip_comprehensive_report.html';
    a.click();
    URL.revokeObjectURL(url);
  }
  </script>
</body>
</html>