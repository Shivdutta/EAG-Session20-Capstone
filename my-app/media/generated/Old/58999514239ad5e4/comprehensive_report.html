<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Comprehensive SIP Report for Retirement</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; margin: 0; padding: 20px; background-color: #f9fafb; color: #1f2937; }
    .container { max-width: 1200px; margin: 0 auto; background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
    h1 { font-size: 2.25rem; font-weight: bold; color: #111827; border-bottom: 2px solid #3B82F6; padding-bottom: 0.5rem; margin-bottom: 1.5rem; }
    h2 { font-size: 1.5rem; font-weight: bold; color: #111827; margin-top: 2rem; margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 1px solid #e5e7eb; }
    table { width: 100%; border-collapse: collapse; margin: 1.5rem 0; }
    th, td { border: 1px solid #ddd; padding: 12px; text-align: left; vertical-align: top; }
    th { background-color: #f8f9fa; font-weight: 600; }
    p { line-height: 1.6; margin-bottom: 1rem; }
    ul, ol { margin-left: 1.5rem; margin-bottom: 1rem; }
    li { margin-bottom: 0.5rem; }
    .executive-summary { background-color: #eff6ff; border-left: 4px solid #3B82F6; padding: 1.5rem; margin-bottom: 2rem; border-radius: 4px; }
    .chart-container { margin: 25px auto; padding: 20px; border: 1px solid #e5e7eb; border-radius: 8px; text-align: center; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
    .chart-container h3 { text-align: center; font-size: 1.1rem; font-weight: 600; margin-bottom: 15px; color: #1f2937; }
    .chart-container > div { margin: 0 auto; }
    .no-print { display: block; }
    @media print {
      .no-print { display: none; }
      body { padding: 0; background-color: #fff; }
      .container { box-shadow: none; border: none; padding: 0.5rem; }
      h1, h2 { margin-top: 1.5rem; }
      .chart-container { page-break-inside: avoid; margin: 15px 0; }
      canvas { max-height: 300px !important; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üìä Systematic Investment Plan (SIP) for Retirement</h1>
    
    <section id="executive-summary">
      <div class="executive-summary">
        <h2>üéØ Executive Summary</h2>
        <p>This report outlines a personalized Systematic Investment Plan (SIP) designed to achieve your retirement goal. The primary objective is to accumulate a corpus of <b>‚Çπ10,000,000</b> in <b>10 years</b>. After adjusting for an assumed annual inflation rate of 5.5%, the target corpus required at retirement is <b>‚Çπ1,70,81,444.57</b>. To reach this goal with a 'moderate' risk profile (assuming a 10% annualized return), a monthly SIP of <b>‚Çπ83,387.27</b> is required. The recommended asset allocation is a balanced 50/50 split between equity and debt instruments.</p>
        <ul>
          <li><b>Final Projected Corpus:</b> ‚Çπ17,325,477.72</li>
          <li><b>Total Capital Invested:</b> ‚Çπ10,006,472.39</li>
          <li><b>Total Estimated Gains:</b> ‚Çπ7,319,005.33</li>
        </ul>
        <p>This plan is built on a foundation of disciplined monthly investment, strategic asset allocation, and a long-term perspective. The following sections provide a detailed breakdown of the calculations, strategy, and projections.</p>
      </div>
    </section>

    <div class="no-print" style="margin: 20px 0; text-align: center;">
        <button onclick="window.print()" style="margin: 5px; padding: 12px 24px; background-color: #3B82F6; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 1rem; font-weight: 500;">Print Report</button>
        <button onclick="downloadHTML()" style="margin: 5px; padding: 12px 24px; background-color: #10B981; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 1rem; font-weight: 500;">Download HTML</button>
    </div>

    <section id="goal-inputs">
      <h2>üìù Goal & Investor Profile</h2>
      <p>The following inputs form the basis of all calculations and recommendations in this report.</p>
      <table><thead><tr><th>Parameter</th><th>Value</th></tr></thead><tbody><tr><td>Goal Type</td><td>Retirement</td></tr><tr><td>Current Age</td><td>50 years</td></tr><tr><td>Target Retirement Age</td><td>60 years</td></tr><tr><td>Initial Target Amount</td><td>‚Çπ10,000,000</td></tr><tr><td>Time Horizon</td><td>10 Years (120 months)</td></tr><tr><td>Risk Appetite</td><td>Moderate</td></tr></tbody></table>
    </section>

    <section id="inflation-adjustment">
      <h2>üìà Inflation-Adjusted Target</h2>
      <p>To ensure the final corpus has the desired purchasing power at retirement, the initial target amount must be adjusted for inflation.</p>
      <table><thead><tr><th>Parameter</th><th>Value</th></tr></thead><tbody><tr><td>Unadjusted Target Amount</td><td>‚Çπ10,000,000.00</td></tr><tr><td>Assumed Annual Inflation</td><td>5.5%</td></tr><tr><td>Investment Horizon</td><td>10 Years</td></tr><tr><td><b>Inflation-Adjusted Target</b></td><td><b>‚Çπ1,70,81,444.57</b></td></tr></tbody></table>
    </section>

    <section id="sip-calculation">
      <h2>üßÆ Monthly SIP Calculation</h2>
      <p>The required monthly SIP is calculated using the future value of the goal, the time horizon, and the expected rate of return based on the investor's risk profile.</p>
      <table><thead><tr><th>Parameter</th><th>Value</th></tr></thead><tbody><tr><td>Adjusted Target Corpus</td><td>‚Çπ1,70,81,444.57</td></tr><tr><td>Investment Period</td><td>120 Months</td></tr><tr><td>Assumed Annual Return (Moderate Risk)</td><td>10.0%</td></tr><tr><td><b>Required Monthly SIP</b></td><td><b>‚Çπ83,387.27</b></td></tr></tbody></table>
    </section>

    <section id="asset-allocation">
      <h2>üìä Asset Allocation Strategy</h2>
      <p>A balanced asset allocation is crucial for managing risk and achieving consistent growth. The 'moderate' risk profile suggests an equal split between growth-oriented equity and stability-focused debt assets.</p>
      <table><thead><tr><th>Asset Class</th><th>Allocation</th></tr></thead><tbody><tr><td>Equity</td><td>50%</td></tr><tr><td>Debt</td><td>50%</td></tr></tbody></table>
      <h3>Recommended Fund Categories</h3>
      <table><thead><tr><th>Asset Class</th><th>Recommended Category</th></tr></thead><tbody><tr><td rowspan='2'>Equity</td><td>Large Cap Funds</td></tr><tr><td>Mid Cap Funds</td></tr><tr><td rowspan='2'>Debt</td><td>Corporate Bond Funds</td></tr><tr><td>Short Duration Funds</td></tr></tbody></table>
    </section>

    <section id="sip-charts">
      <h2>üìä SIP Projection & Allocation Charts</h2>
      <div style="display: block; max-width: 1000px; margin: 0 auto;">
        <!-- Asset Allocation FIRST (TOP) -->
        <div class="chart-container" style="margin-bottom: 30px; text-align: center; border: 1px solid #e5e7eb; padding: 20px; border-radius: 8px;">
          <h3 style="margin-bottom: 15px;">Asset Allocation</h3>
          <div style="max-width: 500px; margin: 0 auto;">
            <canvas id="sipAllocationChart" width="400" height="300" style="max-width: 100%; height: auto;"></canvas>
          </div>
        </div>
        
        <!-- SIP Growth Projection SECOND (BOTTOM) -->
        <div class="chart-container" style="margin-bottom: 30px; text-align: center; border: 1px solid #e5e7eb; padding: 20px; border-radius: 8px;">
          <h3 style="margin-bottom: 15px;">SIP Growth Projection</h3>
          <div style="max-width: 800px; margin: 0 auto;">
            <canvas id="sipProjectionChart" width="600" height="400" style="max-width: 100%; height: auto;"></canvas>
          </div>
        </div>
      </div>
    </section>

    <section id="monthly-projection">
      <h2>üóìÔ∏è Monthly Projection (First 12 Months)</h2>
      <table><thead><tr><th>Month</th><th>Cumulative Contribution</th><th>Projected Corpus</th></tr></thead><tbody><tr><td>M1</td><td>‚Çπ83,387.27</td><td>‚Çπ83,387.27</td></tr><tr><td>M2</td><td>‚Çπ166,774.54</td><td>‚Çπ167,469.07</td></tr><tr><td>M3</td><td>‚Çπ250,161.81</td><td>‚Çπ252,251.92</td></tr><tr><td>M4</td><td>‚Çπ333,549.08</td><td>‚Çπ337,743.00</td></tr><tr><td>M5</td><td>‚Çπ416,936.35</td><td>‚Çπ423,949.53</td></tr><tr><td>M6</td><td>‚Çπ500,323.62</td><td>‚Çπ510,878.78</td></tr><tr><td>M7</td><td>‚Çπ583,710.89</td><td>‚Çπ598,538.08</td></tr><tr><td>M8</td><td>‚Çπ667,098.16</td><td>‚Çπ686,934.89</td></tr><tr><td>M9</td><td>‚Çπ750,485.43</td><td>‚Çπ776,076.71</td></tr><tr><td>M10</td><td>‚Çπ833,872.70</td><td>‚Çπ865,971.04</td></tr><tr><td>M11</td><td>‚Çπ917,259.97</td><td>‚Çπ956,625.49</td></tr><tr><td>M12</td><td>‚Çπ1,000,647.24</td><td>‚Çπ1,048,047.69</td></tr></tbody></table>
      <p><em>Note: Complete projection timeline (120 months) is visualized in the chart above.</em></p>
    </section>

    <section id="key-recommendations">
      <h2>üîë Key Recommendations & Next Steps</h2>
      <ol>
        <li><b>Begin Immediately:</b> The power of compounding is most effective over time. It is recommended to start the monthly SIP of <b>‚Çπ83,387.27</b> at the earliest opportunity.</li>
        <li><b>Diversify as Planned:</b> Implement the 50% equity and 50% debt allocation by selecting funds within the recommended categories (Large Cap, Mid Cap, Corporate Bond, Short Duration).</li>
        <li><b>Annual Portfolio Review:</b> At least once a year, review the portfolio's performance against expectations. Rebalance if the asset allocation deviates significantly (e.g., by more than 5%) from the target 50/50 split.</li>
        <li><b>Consider Step-Up SIP:</b> To potentially build a larger corpus or reach the goal sooner, consider increasing the SIP amount annually, for instance, by 5-10%, in line with any increase in income.</li>
        <li><b>Maintain Discipline:</b> The success of this plan is critically dependent on consistent, uninterrupted investment for the entire 120-month period. Avoid pausing or stopping the SIP based on short-term market movements.</li>
      </ol>
    </section>

    <section id="risk-factors">
      <h2>‚öñÔ∏è Risk Factors & Uncertainties</h2>
      <p>This financial plan is based on assumptions and is subject to various risks. It is crucial to understand these factors before proceeding. This is not exhaustive financial advice, and consulting a registered financial advisor is recommended.</p>
      <ul>
        <li><b>Market Risk:</b> The assumed 10% annual return is a long-term average for a moderate-risk portfolio and is not guaranteed. Equity markets are volatile and can experience periods of negative returns. The final corpus value could be lower or higher than the projection.</li>
        <li><b>Inflation Risk:</b> The plan assumes a 5.5% average annual inflation rate. If actual inflation is higher, the purchasing power of the final corpus will be less than anticipated, potentially requiring a higher target amount or SIP.</li>
        <li><b>Interest Rate Risk:</b> This primarily affects the debt portion of the portfolio. If interest rates in the economy rise, the value of existing bonds (and thus the NAV of debt funds) can fall, particularly for those with longer maturities.</li>
        <li><b>Credit Risk:</b> Corporate Bond Funds invest in debt issued by companies. There is a risk that a company may default on its payments, leading to a loss of capital. Fund managers mitigate this, but the risk is never zero.</li>
        <li><b>Execution Risk:</b> The success of the plan is entirely dependent on the investor's discipline. Failing to invest the specified amount every month for the full 10-year term will result in a significant shortfall from the target goal. Emotional decisions, such as stopping investments during a market downturn, are a primary cause of goal failure.</li>
        <li><b>Regulatory & Tax Risk:</b> Changes in government policies, financial regulations, or tax laws concerning mutual funds and capital gains could impact the net returns and the overall investment strategy.</li>
      </ul>
    </section>

  </div>

  <script id="chart-data" type="application/json">
    {"projection":{"labels":["M1","M2","M3","M4","M5","M6","M7","M8","M9","M10","M11","M12","M13","M14","M15","M16","M17","M18","M19","M20","M21","M22","M23","M24","M25","M26","M27","M28","M29","M30","M31","M32","M33","M34","M35","M36","M37","M38","M39","M40","M41","M42","M43","M44","M45","M46","M47","M48","M49","M50","M51","M52","M53","M54","M55","M56","M57","M58","M59","M60","M61","M62","M63","M64","M65","M66","M67","M68","M69","M70","M71","M72","M73","M74","M75","M76","M77","M78","M79","M80","M81","M82","M83","M84","M85","M86","M87","M88","M89","M90","M91","M92","M93","M94","M95","M96","M97","M98","M99","M100","M101","M102","M103","M104","M105","M106","M107","M108","M109","M110","M111","M112","M113","M114","M115","M116","M117","M118","M119","M120"],"datasets":{"cumulative_contribution":[83387.27,166774.54,250161.81,333549.08,416936.35,500323.62,583710.89,667098.16,750485.43,833872.7,917259.97,1000647.24,1084034.51,1167421.78,1250809.05,1334196.32,1417583.59,1500970.86,1584358.13,1667745.4,1751132.67,1834519.94,1917907.21,2001294.48,2084681.75,2168069.02,2251456.29,2334843.56,2418230.83,2501618.1,2585005.37,2668392.64,2751779.91,2835167.18,2918554.45,3001941.72,3085328.99,3168716.26,3252103.53,3335490.8,3418878.07,3502265.34,3585652.61,3669039.88,3752427.15,3835814.42,3919201.69,4002588.96,4085976.23,4169363.5,4252750.77,4336138.04,4419525.31,4502912.58,4586299.85,4669687.12,4753074.39,4836461.66,4919848.93,5003236.2,5086623.47,5170010.74,5253398.01,5336785.28,5420172.55,5503559.82,5586947.09,5670334.36,5753721.63,5837108.9,5920496.17,6003883.44,6087270.71,6170657.98,6254045.25,6337432.52,6420819.79,6504207.06,6587594.33,6670981.6,6754368.87,6837756.14,6921143.41,7004530.68,7087917.95,7171305.22,7254692.49,7338079.76,7421467.03,7504854.3,7588241.57,7671628.84,7755016.11,7838403.38,7921790.65,8005177.92,8088565.19,8171952.46,8255339.73,8338726.99,8422114.26,8505501.53,8588888.8,8672276.07,8755663.34,8839050.61,8922437.88,9005825.15,9089212.42,9172599.69,9255986.96,9339374.23,9422761.5,9506148.77,9589536.04,9672923.31,9756310.58,9839697.85,9923085.12,10006472.39],"projected_corpus":[83387.27,167469.07,252251.92,337743.0,423949.53,510878.78,598538.08,686934.89,776076.71,865971.04,956625.49,1048047.69,1140245.28,1233225.99,1326997.58,1421567.88,1516944.76,1613136.14,1710149.98,1807994.27,1906677.05,2006206.42,2106590.54,2207837.59,2309955.77,2412953.3,2516838.45,2621619.47,2727304.67,2833902.37,2941421.02,3049869.03,3159254.91,3269587.2,3380874.49,3493125.44,3606348.8,3720553.34,3835747.92,3951941.48,4069142.96,4187361.32,4306605.5,4426884.45,4548207.16,4670582.55,4794019.59,4918527.35,5044114.95,5170791.54,5298566.27,5427448.32,5557446.86,5688571.12,5820830.41,5954234.03,6088791.31,6224511.59,6361404.22,6499478.58,6638744.07,6779210.14,6920886.26,7063781.94,7207906.77,7353270.32,7499882.21,7647752.12,7796889.72,7947304.79,8099007.03,8252006.12,8406311.8,8561933.77,8718881.88,8877166.03,9036796.22,9197782.52,9360135.04,9523864.0,9688979.7,9855492.53,10023413.0,10192751.64,10363519.04,10535725.86,10709382.74,10884500.33,11061089.33,11239160.41,11418724.41,11599792.11,11782374.37,11966482.16,12152126.5,12339318.42,12528068.97,12718389.25,12910290.36,13103783.45,13298879.64,13495590.14,13693926.24,13893899.29,14095520.62,14298801.62,14503753.64,14710388.12,14918716.59,15128750.62,15340501.91,15553982.16,15769203.04,15986176.37,16204914.0,16425427.82,16647730.05,16871831.0,17097743.06,17325477.72]}},"allocation":{"labels":["Equity","Debt"],"data":[50,50],"meta":{"recommended_fund_categories":{"equity":["Large Cap Funds","Mid Cap Funds"],"debt":["Corporate Bond Funds","Short Duration Funds"],"elss_optional":true}}}}
  </script>

  <script>
    function downloadHTML() {
      const html = document.documentElement.outerHTML;
      const blob = new Blob([html], { type: 'text/html' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'comprehensive_sip_report.html';
      a.click();
      URL.revokeObjectURL(url);
    }

    function initCharts() {
      if (typeof Chart === 'undefined') {
        console.error('Chart.js not loaded');
        return;
      }
      
      let data;
      try {
        const script = document.getElementById('chart-data');
        data = script ? JSON.parse(script.textContent) : null;
      } catch (e) {
        console.warn('Chart data parse failed');
        data = null;
      }
      
      if (!data) {
        console.error('Could not load chart data.');
        return; // Exit if no data is available at all
      }
      
      // Create allocation chart FIRST (TOP POSITION)
      const allocCtx = document.getElementById('sipAllocationChart');
      if (allocCtx) {
        new Chart(allocCtx, {
          type: 'doughnut',
          data: {
            labels: data.allocation.labels,
            datasets: [{ 
              data: data.allocation.data, 
              backgroundColor: ['#3B82F6', '#10B981'],
              borderWidth: 2 
            }]
          },
          options: { 
            responsive: true,
            maintainAspectRatio: true,
            aspectRatio: 1.33,
            plugins: {
              legend: { 
                position: 'bottom',
                labels: { padding: 15 }
              }
            }
          }
        });
      }
      
      // Create projection chart SECOND (BOTTOM POSITION)
      const projCtx = document.getElementById('sipProjectionChart');
      if (projCtx) {
        new Chart(projCtx, {
          type: 'line',
          data: {
            labels: data.projection.labels,
            datasets: [{
              label: 'Projected Corpus',
              data: data.projection.datasets.projected_corpus,
              borderColor: '#3B82F6',
              backgroundColor: 'rgba(59, 130, 246, 0.1)',
              fill: true,
              tension: 0.4,
              pointRadius: 1,
              pointHoverRadius: 4
            }, {
              label: 'Cumulative Contribution', 
              data: data.projection.datasets.cumulative_contribution,
              borderColor: '#EF4444',
              backgroundColor: 'rgba(239, 68, 68, 0.1)',
              fill: false,
              tension: 0.4,
              pointRadius: 1,
              pointHoverRadius: 4
            }]
          },
          options: { 
            responsive: true,
            maintainAspectRatio: true,
            aspectRatio: 1.5,
            interaction: {
              mode: 'nearest',
              intersect: false
            },
            scales: {
              x: {
                title: { display: true, text: 'Time Period (Months)' },
                ticks: { maxTicksLimit: 10 }
              },
              y: {
                beginAtZero: true,
                title: { display: true, text: 'Amount (INR)' },
                ticks: {
                  callback: function(value) {
                    return '‚Çπ' + (value/100000).toFixed(1) + 'L';
                  }
                }
              }
            },
            plugins: {
              tooltip: {
                mode: 'index',
                intersect: false
              }
            }
          }
        });
      }
    }

    // Initialize with a short delay for proper loading
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', function() { setTimeout(initCharts, 500); });
    } else {
        setTimeout(initCharts, 500);
    }
  </script>
</body>
</html>