<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Comprehensive SIP Analysis for Retirement Goal</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; margin: 0; padding: 20px; background-color: #f9fafb; color: #1f2937; }
    .container { max-width: 1000px; margin: 0 auto; background-color: #ffffff; padding: 2rem; border-radius: 0.5rem; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); }
    h1, h2, h3 { color: #111827; font-weight: 600; margin-bottom: 0.75rem; border-bottom: 1px solid #e5e7eb; padding-bottom: 0.5rem; }
    h1 { font-size: 1.875rem; }
    h2 { font-size: 1.5rem; margin-top: 2rem; }
    p, ul { line-height: 1.6; margin-bottom: 1rem; }
    table { width: 100%; border-collapse: collapse; margin: 1.5rem 0; }
    th, td { border: 1px solid #e5e7eb; padding: 12px; text-align: left; }
    th { background-color: #f3f4f6; font-weight: 600; }
    .callout { padding: 1rem; margin-bottom: 1rem; border-left-width: 4px; border-radius: 0.25rem; }
    .callout.warning { border-color: #f59e0b; background-color: #fffbeb; }
    .no-print { display: block; }
    @media print { 
      .no-print { display: none; } 
      body, .container { box-shadow: none; margin: 0; padding: 0; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üìä Comprehensive SIP Analysis for Retirement Goal</h1>
    
    <section id="executive-summary">
      <h2>üéØ Executive Summary</h2>
      <p>This report provides a detailed financial plan for a <b>Retirement</b> goal with a target corpus of <b>‚Çπ3 Crore</b>. Over a <b>10-year horizon</b> and accounting for a 5.5% annual inflation rate, the future value of this goal is estimated to be <b>‚Çπ5,12,44,333.71</b>. Based on a 'high' risk appetite and an expected annual return of 12%, the required monthly Systematic Investment Plan (SIP) is calculated to be <b>‚Çπ2,22,763.58</b>. The recommended asset allocation is an aggressive <b>70% in Equity</b> and <b>30% in Debt</b>. While the core calculations are sound, a validation check revealed a minor discrepancy: the final projected corpus (‚Çπ5,09,81,135.80) shows a ~0.51% shortfall against the target, likely due to cumulative floating-point precision errors in the projection model. Furthermore, descriptive summaries for recommended fund categories were unavailable due to an upstream data processing failure, a key risk factor to consider before investment.</p>
    </section>

    <section id="goal-inputs">
      <h2>üìù Goal & Investor Profile</h2>
      <p>The investment strategy is based on the following user-defined parameters.</p>
      <table>
        <thead><tr><th>Parameter</th><th>Value</th></tr></thead>
        <tbody>
          <tr><td>Goal Type</td><td>Retirement</td></tr>
          <tr><td>Target Amount (Present Value)</td><td>‚Çπ3,00,00,000</td></tr>
          <tr><td>Time Horizon</td><td>10 Years (120 Months)</td></tr>
          <tr><td>Risk Appetite</td><td>High</td></tr>
          <tr><td>Assumed Annual Return</td><td>12%</td></tr>
          <tr><td>Assumed Annual Inflation</td><td>5.5%</td></tr>
        </tbody>
      </table>
    </section>

    <section id="sip-calculation">
      <h2>üßÆ SIP Calculation & Inflation Adjustment</h2>
      <p>To ensure the investment goal maintains its purchasing power, the target amount was adjusted for inflation. The required monthly SIP was then calculated based on this future value.</p>
      <table>
        <thead><tr><th>Calculation Metric</th><th>Value</th><th>Notes</th></tr></thead>
        <tbody>
          <tr><td>Unadjusted Target Corpus</td><td>‚Çπ3,00,00,000</td><td>The initial goal amount in today's terms.</td></tr>
          <tr><td><b>Inflation-Adjusted Target</b></td><td><b>‚Çπ5,12,44,333.71</b></td><td>The target corpus after factoring in 5.5% inflation over 10 years.</td></tr>
          <tr><td>Monthly Rate of Return (r)</td><td>1.00%</td><td>Derived from the 12% annual return assumption.</td></tr>
          <tr><td><b>Required Monthly SIP</b></td><td><b>‚Çπ2,22,763.58</b></td><td>The monthly investment needed to reach the adjusted target.</td></tr>
        </tbody>
      </table>
    </section>

    <section id="asset-allocation">
      <h2>üß© Asset Allocation Strategy</h2>
      <p>Based on the 'high' risk profile, a growth-oriented asset allocation is recommended. The following table details the split and suggested mutual fund categories.</p>
      <table>
        <thead><tr><th>Asset Class</th><th>Target Allocation (%)</th><th>Recommended Fund Category</th><th>Summary Status</th></tr></thead>
        <tbody>
          <tr><td>Equity</td><td>70</td><td>Large Cap Funds</td><td>Unavailable due to T012 data failure</td></tr>
          <tr><td>Equity</td><td>70</td><td>Mid Cap Funds</td><td>Unavailable due to T012 data failure</td></tr>
          <tr><td>Equity</td><td>70</td><td>Small Cap Funds</td><td>Unavailable due to T012 data failure</td></tr>
          <tr><td>Debt</td><td>30</td><td>Corporate Bond Funds</td><td>Unavailable due to T012 data failure</td></tr>
          <tr><td>Debt</td><td>30</td><td>Short Duration Funds</td><td>Unavailable due to T012 data failure</td></tr>
        </tbody>
      </table>
    </section>

    <section id="recommendations">
      <h2>üîë Key Recommendations</h2>
      <ul>
        <li><b>Proceed with Strategy:</b> The strategic asset allocation of 70% Equity and 30% Debt is sound and aligns with the stated risk profile.</li>
        <li><b>Conduct Manual Research:</b> Until the data pipeline issue is resolved, manual research must be conducted on the recommended fund categories (e.g., Large Cap, Mid Cap) to understand their specific characteristics, objectives, and risks before making investment decisions.</li>
        <li><b>Address Data Integrity:</b> The minor shortfall in the projection model should be reviewed. While small, ensuring precision in financial models is critical for long-term accuracy.</li>
      </ul>
    </section>

    <section id="risk-factors">
      <h2>‚ö†Ô∏è Risk Factors & Uncertainties</h2>
      <p>This plan is subject to market risks and contains known data limitations that must be considered. The 12% annual return is a forward-looking assumption, not a guarantee. Equity markets are inherently volatile, and actual returns may vary significantly from this projection, both positively and negatively. The success of this plan is contingent on consistent, disciplined monthly investments for the entire 10-year period; any interruptions could impact the final corpus. Inflation risk is another key factor; if the actual average inflation rate exceeds the 5.5% assumption, the real value of the final corpus will be lower than intended, potentially affecting its purchasing power in retirement. Additionally, this report has known data integrity issues. A validation check found a minor shortfall of ~0.51% in the final projected corpus versus the target, likely due to cumulative floating-point precision errors. More significantly, descriptive summaries for the recommended fund categories are missing due to an upstream data failure, creating an information gap risk. Investors must conduct their own due diligence on these categories before committing capital.</p>
      <div class='callout warning'><b>Data Integrity Issue (Medium Severity):</b> A validation check (T014) found that the final projected corpus of <b>‚Çπ5,09,81,135.80</b> after 120 months does not precisely match the calculated target of <b>‚Çπ5,12,44,333.71</b>. This represents a shortfall of approximately <b>-0.51%</b>.</div>
    </section>

    <!-- FIXED v11+ Chart Section: Asset Allocation is ABOVE SIP Projection -->
    <section id="sip-charts">
      <h2>üìä SIP Projection & Allocation Charts</h2>
      <div style="display: block;">
        <!-- Asset Allocation FIRST (TOP) -->
        <div class="chart-container" style="margin-bottom: 30px; text-align: center;">
          <h3>Asset Allocation</h3>
          <div style="max-width: 500px; margin: 0 auto;">
            <canvas id="sipAllocationChart" width="400" height="300" style="max-width: 100%; height: auto;"></canvas>
          </div>
        </div>
        
        <!-- SIP Growth Projection SECOND (BOTTOM) -->
        <div class="chart-container" style="text-align: center;">
          <h3>SIP Growth Projection</h3>
          <div style="max-width: 800px; margin: 0 auto;">
            <canvas id="sipProjectionChart" width="600" height="400" style="max-width: 100%; height: auto;"></canvas>
          </div>
        </div>
      </div>
    </section>
    
    <section id="monthly-projection">
      <h2>üìà Monthly Projection (First 12 Months)</h2>
      <table>
        <thead><tr><th>Month</th><th>Cumulative Contribution</th><th>Projected Corpus</th></tr></thead>
        <tbody>
          <tr><td>M1</td><td>‚Çπ2,22,763.58</td><td>‚Çπ2,22,763.58</td></tr>
          <tr><td>M2</td><td>‚Çπ4,45,527.16</td><td>‚Çπ4,47,754.80</td></tr>
          <tr><td>M3</td><td>‚Çπ6,68,290.74</td><td>‚Çπ6,74,995.93</td></tr>
          <tr><td>M4</td><td>‚Çπ8,91,054.32</td><td>‚Çπ9,04,509.47</td></tr>
          <tr><td>M5</td><td>‚Çπ11,13,817.90</td><td>‚Çπ11,36,318.14</td></tr>
          <tr><td>M6</td><td>‚Çπ13,36,581.48</td><td>‚Çπ13,70,444.91</td></tr>
          <tr><td>M7</td><td>‚Çπ15,59,345.06</td><td>‚Çπ16,06,913.94</td></tr>
          <tr><td>M8</td><td>‚Çπ17,82,108.64</td><td>‚Çπ18,45,750.66</td></tr>
          <tr><td>M9</td><td>‚Çπ20,04,872.22</td><td>‚Çπ20,86,981.75</td></tr>
          <tr><td>M10</td><td>‚Çπ22,27,635.80</td><td>‚Çπ23,30,634.15</td></tr>
          <tr><td>M11</td><td>‚Çπ24,50,399.38</td><td>‚Çπ25,76,736.07</td></tr>
          <tr><td>M12</td><td>‚Çπ26,73,162.96</td><td>‚Çπ28,25,316.01</td></tr>
        </tbody>
      </table>
    </section>
    
    <div class="no-print" style="margin: 40px 0; text-align: center;">
      <button onclick="window.print()" style="margin: 5px; padding: 10px 20px; background-color: #3b82f6; color: white; border: none; border-radius: 6px; cursor: pointer;">Print Report</button>
      <button onclick="downloadHTML()" style="margin: 5px; padding: 10px 20px; background-color: #10b981; color: white; border: none; border-radius: 6px; cursor: pointer;">Download HTML</button>
    </div>

  </div>

  <!-- Load Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Embed chart data -->
  <script id="sip-chart-data" type="application/json">
  {"projection":{"labels":["M1","M2","M3","M4","M5","M6","M7","M8","M9","M10","M11","M12","M13","M14","M15","M16","M17","M18","M19","M20","M21","M22","M23","M24","M25","M26","M27","M28","M29","M30","M31","M32","M33","M34","M35","M36","M37","M38","M39","M40","M41","M42","M43","M44","M45","M46","M47","M48","M49","M50","M51","M52","M53","M54","M55","M56","M57","M58","M59","M60","M61","M62","M63","M64","M65","M66","M67","M68","M69","M70","M71","M72","M73","M74","M75","M76","M77","M78","M79","M80","M81","M82","M83","M84","M85","M86","M87","M88","M89","M90","M91","M92","M93","M94","M95","M96","M97","M98","M99","M100","M101","M102","M103","M104","M105","M106","M107","M108","M109","M110","M111","M112","M113","M114","M115","M116","M117","M118","M119","M120"],"datasets":{"cumulative_contribution":[222763.58,445527.16,668290.74,891054.32,1113817.9,1336581.48,1559345.06,1782108.64,2004872.22,2227635.8,2450399.38,2673162.96,2895926.54,3118690.12,3341453.7,3564217.28,3786980.86,4009744.44,4232508.02,4455271.6,4678035.18,4900798.76,5123562.34,5346325.92,5569089.5,5791853.08,6014616.66,6237380.24,6460143.82,6682907.4,6905670.98,7128434.56,7351198.14,7573961.72,7796725.3,8019488.88,8242252.46,8465016.04,8687779.62,8910543.2,9133306.78,9356070.36,9578833.94,9801597.52,10024361.1,10247124.68,10469888.26,10692651.84,10915415.42,11138179,11360942.58,11583706.16,11806469.74,12029233.32,12251996.9,12474760.48,12697524.06,12920287.64,13143051.22,13365814.8,13588578.38,13811341.96,14034105.54,14256869.12,14479632.7,14702396.28,14925159.86,15147923.44,15370687.02,15593450.6,15816214.18,16038977.76,16261741.34,16484504.92,16707268.5,16930032.08,17152795.66,17375559.24,17598322.82,17821086.4,18043849.98,18266613.56,18489377.14,18712140.72,18934904.3,19157667.88,19380431.46,19603195.04,19825958.62,20048722.2,20271485.78,20494249.36,20717012.94,20939776.52,21162540.1,21385303.68,21608067.26,21830830.84,22053594.42,22276358,22499121.58,22721885.16,22944648.74,23167412.32,23390175.9,23612939.48,23835703.06,24058466.64,24281230.22,24503993.8,24726757.38,24949520.96,25172284.54,25395048.12,25617811.7,25840575.28,26063338.86,26286102.44,26508866.02,26731629.6],"projected_corpus":[222763.58,447754.8,674995.93,904509.47,1136318.14,1370444.91,1606913.94,1845750.66,2086981.75,2330634.15,2576736.07,2825316.01,3076402.75,3330024.36,3586209.18,3844985.85,4106383.29,4370430.5,4637156.49,4906590.63,5178762.32,5453701.52,5731438.12,6011999.08,6295412.65,6581708.36,6870915.02,7163061.75,7458177.95,7756293.11,8057436.62,8361638.07,8668927.03,8979333.18,9292886.19,9609615.63,9929551.37,10252723.26,10579161.47,10908896.27,11241958.01,11578377.17,11918184.52,12261410.95,12608087.64,12958245.89,13311917.13,13669132.88,14029925.79,14394328.63,14762372.49,15134089,15509510.47,15888669.25,16271597.52,16658327.48,17048892.33,17443324.43,17841655.26,18243916.39,18650140.13,19060360.11,19474610.29,19892925.97,20315341.81,20741893.81,21172619.13,21607554.9,22046736.03,22490199.97,22937984.55,23390127.97,23846665.83,24307636.07,24773075.01,25243019.14,25717505.91,26196573.55,26680260.46,27168605.65,27661648.28,28159428.35,28661985.21,29169358.24,29681585.4,30198704.83,30720755.46,31247776.6,31779808.94,32316893.01,32859069.52,33406377.79,33958860.15,34516557.33,35079509.48,35647757.16,36221341.31,36800302.3,37384680.9,37974518.29,38569854.05,39170729.17,39777184.04,40389260.46,41007001.64,41630449.24,42259645.31,42894631.34,43535451.23,44182149.32,44834768.4,45493350.66,46157939.75,46828578.52,47505310.89,48188182.58,48877239.98,49572529.56,50274098.44,50981135.8]}},"allocation":{"labels":["Equity","Debt"],"data":[70,30],"meta":{"recommended_fund_categories":{"equity":["Large Cap Funds","Mid Cap Funds","Small Cap Funds"],"debt":["Corporate Bond Funds","Short Duration Funds"],"elss_optional":true}}}}  
  </script>

  <!-- ENHANCED chart rendering with proper layout and sizing -->
  <script>
  function initCharts() {
    if (typeof Chart === 'undefined') {
      console.error('Chart.js not loaded');
      return;
    }
    
    let data;
    try {
      const script = document.getElementById('sip-chart-data');
      data = script ? JSON.parse(script.textContent) : null;
    } catch (e) {
      console.warn('Chart data parse failed');
      data = null;
    }
    
    // Enhanced fallback with complete timeline
    if (!data) {
      console.log("Using fallback chart data.");
      data = {
        projection: {
          labels: ["M1","M2","M3","M4","M5","M6","M7","M8","M9","M10","M11","M12","M13","M14","M15","M16","M17","M18","M19","M20","M21","M22","M23","M24","M25","M26","M27","M28","M29","M30","M31","M32","M33","M34","M35","M36","M37","M38","M39","M40","M41","M42","M43","M44","M45","M46","M47","M48","M49","M50","M51","M52","M53","M54","M55","M56","M57","M58","M59","M60","M61","M62","M63","M64","M65","M66","M67","M68","M69","M70","M71","M72","M73","M74","M75","M76","M77","M78","M79","M80","M81","M82","M83","M84","M85","M86","M87","M88","M89","M90","M91","M92","M93","M94","M95","M96","M97","M98","M99","M100","M101","M102","M103","M104","M105","M106","M107","M108","M109","M110","M111","M112","M113","M114","M115","M116","M117","M118","M119","M120"],
          datasets: {
            cumulative_contribution: [25000,50000,75000,100000,125000,150000,175000,200000,225000,250000,275000,300000,325000,350000,375000,400000,425000,450000,475000,500000,525000,550000,575000,600000,625000,650000,675000,700000,725000,750000,775000,800000,825000,850000,875000,900000,925000,950000,975000,1000000,1025000,1050000,1075000,1100000,1125000,1150000,1175000,1200000,1225000,1250000,1275000,1300000,1325000,1350000,1375000,1400000,1425000,1450000,1475000,1500000,1525000,1550000,1575000,1600000,1625000,1650000,1675000,1700000,1725000,1750000,1775000,1800000,1825000,1850000,1875000,1900000,1925000,1950000,1975000,2000000,2025000,2050000,2075000,2100000,2125000,2150000,2175000,2200000,2225000,2250000,2275000,2300000,2325000,2350000,2375000,2400000,2425000,2450000,2475000,2500000,2525000,2550000,2575000,2600000,2625000,2650000,2675000,2700000,2725000,2750000,2775000,2800000,2825000,2850000,2875000,2900000,2925000,2950000,2975000,3000000],
            projected_corpus: [25250,50755,76519,102543,128831,155386,182212,209312,236692,264356,292308,320552,349093,377935,407082,436540,466312,496404,526821,557567,588648,620068,651832,683945,716412,749239,782430,815991,849927,884244,918948,954045,989540,1025440,1061750,1098476,1135626,1173205,1211220,1249678,1288586,1327951,1367780,1408080,1448859,1490125,1531885,1574148,1616922,1660215,1704035,1748392,1793293,1838750,1884770,1931365,1978544,2026318,2074697,2123692,2173315,2223577,2274490,2326066,2378316,2431252,2484887,2539233,2594302,2650106,2706658,2763971,2822058,2880932,2940607,3001097,3062415,3124575,3187591,3251477,3316247,3381916,3448499,3516010,3584465,3653879,3724267,3795645,3868028,3941432,4015873,4091366,4167928,4245574,4324322,4404188,4485188,4567340,4650661,4735168,4821880,4909814,499990,5091425,5184139,5278150,5373478,5470142,5568161,5667556,5768346,5870552,5974194,6079293,6185870,6293947,6403545,6514686,6627391]
          }
        },
        allocation: { labels: ["Equity", "Debt"], data: [70, 30] }
      };
    }
    
    // Create allocation chart FIRST (TOP POSITION)
    const allocCtx = document.getElementById('sipAllocationChart');
    if (allocCtx) {
      new Chart(allocCtx, {
        type: 'doughnut',
        data: {
          labels: data.allocation.labels,
          datasets: [{ 
            data: data.allocation.data, 
            backgroundColor: ['#3B82F6', '#10B981'],
            borderWidth: 2 
          }]
        },
        options: { 
          responsive: true,
          maintainAspectRatio: true,
          aspectRatio: 1.33,
          plugins: {
            legend: { 
              position: 'bottom',
              labels: { padding: 15 }
            }
          }
        }
      });
    }
    
    // Create projection chart SECOND (BOTTOM POSITION)
    const projCtx = document.getElementById('sipProjectionChart');
    if (projCtx) {
      new Chart(projCtx, {
        type: 'line',
        data: {
          labels: data.projection.labels,
          datasets: [{
            label: 'Projected Corpus',
            data: data.projection.datasets.projected_corpus,
            borderColor: '#3B82F6',
            backgroundColor: 'rgba(59, 130, 246, 0.1)',
            fill: true,
            tension: 0.4,
            pointRadius: 1,
            pointHoverRadius: 4
          }, {
            label: 'Cumulative Contribution', 
            data: data.projection.datasets.cumulative_contribution,
            borderColor: '#EF4444',
            backgroundColor: 'rgba(239, 68, 68, 0.1)',
            fill: false,
            tension: 0.4,
            pointRadius: 1,
            pointHoverRadius: 4
          }]
        },
        options: { 
          responsive: true,
          maintainAspectRatio: true,
          aspectRatio: 1.5,
          interaction: {
            mode: 'nearest',
            intersect: false
          },
          scales: {
            x: {
              title: { display: true, text: 'Time Period (Months)' },
              ticks: { maxTicksLimit: 10 }
            },
            y: {
              beginAtZero: true,
              title: { display: true, text: 'Amount (INR)' },
              ticks: {
                callback: function(value) {
                  if (value >= 10000000) return '‚Çπ' + (value/10000000).toFixed(2) + 'Cr';
                  return '‚Çπ' + (value/100000).toFixed(1) + 'L';
                }
              }
            }
          },
          plugins: {
            tooltip: {
              mode: 'index',
              intersect: false
            }
          }
        }
      });
    }
  }

  // Initialize with enhanced delay for proper loading
  setTimeout(initCharts, 500);
  </script>
  <script>
  function downloadHTML() {
    const html = document.documentElement.outerHTML;
    const blob = new Blob([html], { type: 'text/html' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'sip_comprehensive_report.html';
    a.click();
    URL.revokeObjectURL(url);
  }
  </script>
</body>
</html>