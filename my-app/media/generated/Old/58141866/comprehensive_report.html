<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Comprehensive SIP Analysis Report for Retirement Goal</title>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; margin: 0; padding: 20px; background-color: #f9fafb; color: #1f2937; }
    .container { max-width: 1000px; margin: 0 auto; background-color: #ffffff; padding: 2rem; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
    h1, h2, h3 { color: #111827; margin-top: 1.5em; margin-bottom: 0.5em; border-bottom: 1px solid #e5e7eb; padding-bottom: 0.3em; }
    h1 { font-size: 2em; }
    h2 { font-size: 1.5em; }
    h3 { font-size: 1.2em; border-bottom: none; }
    p, li { line-height: 1.6; color: #374151; }
    table { width: 100%; border-collapse: collapse; margin: 20px 0; }
    th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
    th { background-color: #f3f4f6; font-weight: 600; }
    tr:nth-child(even) { background-color: #f9fafb; }
    .no-print { text-align: center; margin-top: 30px; }
    .button { display: inline-block; margin: 5px; padding: 12px 24px; font-size: 16px; font-weight: bold; color: white; border: none; border-radius: 6px; cursor: pointer; text-decoration: none; }
    .print-btn { background-color: #3B82F6; }
    .download-btn { background-color: #10B981; }
    .print-btn:hover { background-color: #2563EB; }
    .download-btn:hover { background-color: #059669; }
    mark { background-color: #FEF3C7; padding: 2px 4px; border-radius: 3px; }
    @media print {
      .no-print { display: none; }
      body { padding: 0; background-color: #fff; }
      .container { box-shadow: none; border: none; padding: 0; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üìã Comprehensive SIP Analysis for Retirement Goal</h1>
    
    <section id="executive-summary">
      <h2>üéØ Executive Summary</h2>
      <p>This report outlines a comprehensive financial plan to achieve a retirement goal of <b>‚Çπ3,00,00,000</b> in today's value over a <b>10-year period</b>. Accounting for an estimated annual inflation of 5.5%, the future target corpus required is calculated to be <b>‚Çπ5,12,44,328.61</b>. To reach this goal, a monthly Systematic Investment Plan (SIP) of <b>‚Çπ2,50,161.47</b> is required, assuming a 10% annualized return consistent with a 'moderate' risk appetite. The recommended asset allocation is a balanced portfolio of <b>50% in Equity</b> and <b>50% in Debt</b> instruments. This plan has been validated for market viability, confirming that suitable fund categories are available to implement this strategy effectively.</p>
    </section>

    <section id="goal-inputs">
      <h2>üìù Goal Inputs</h2>
      <p>The financial plan is based on the following initial parameters provided by the user.</p>
      <table><thead><tr><th>Parameter</th><th>Value</th></tr></thead><tbody><tr><td>Goal Type</td><td>Retirement</td></tr><tr><td>Target Amount</td><td>‚Çπ3,00,00,000</td></tr><tr><td>Currency</td><td>INR</td></tr><tr><td>Time Horizon</td><td>10 Years (120 Months)</td></tr><tr><td>Risk Appetite</td><td>Moderate</td></tr></tbody></table>
    </section>

    <section id="inflation-adjustment">
      <h2>üíπ Inflation Adjustment</h2>
      <p>To ensure the retirement corpus maintains its purchasing power, the target amount has been adjusted for inflation.</p>
      <table><thead><tr><th>Parameter</th><th>Value</th></tr></thead><tbody><tr><td>Assumed Annual Inflation</td><td>5.5%</td></tr><tr><td>Investment Period</td><td>10 Years</td></tr><tr><td>Unadjusted Target (Today's Value)</td><td>‚Çπ3,00,00,000</td></tr><tr><td><b>Inflation-Adjusted Target (Future Value)</b></td><td><b>‚Çπ5,12,44,328.61</b></td></tr></tbody></table>
    </section>

    <section id="sip-calculation">
      <h2>üßÆ SIP Calculation</h2>
      <p>The required monthly SIP amount is calculated based on the inflation-adjusted target, investment duration, and expected rate of return for a moderate risk profile.</p>
      <table><thead><tr><th>Parameter</th><th>Value</th></tr></thead><tbody><tr><td>Target Corpus</td><td>‚Çπ5,12,44,328.61</td></tr><tr><td>Total Investment Months (n)</td><td>120</td></tr><tr><td>Assumed Annual Return</td><td>10%</td></tr><tr><td>Assumed Monthly Return (r)</td><td>0.833%</td></tr><tr><td><b>Required Monthly SIP</b></td><td><b>‚Çπ2,50,161.47</b></td></tr></tbody></table>
    </section>

    <section id="asset-allocation">
      <h2>üìä Asset Allocation Plan</h2>
      <p>Based on a 'Moderate' risk appetite, a balanced asset allocation is recommended to optimize for growth while managing risk.</p>
      <table><thead><tr><th>Asset Class</th><th>Allocation</th></tr></thead><tbody><tr><td>Equity</td><td>50%</td></tr><tr><td>Debt</td><td>50%</td></tr></tbody></table>
      <h3>Recommended Fund Categories</h3>
      <ul>
        <li><b>Equity (50%):</b><ul><li>Large Cap Funds</li><li>Mid Cap Funds</li></ul></li>
        <li><b>Debt (50%):</b><ul><li>Corporate Bond Funds</li><li>Short Duration Funds</li></ul></li>
      </ul>
    </section>

    <section id="key-recommendations">
      <h2>üîë Key Recommendations</h2>
      <ol>
        <li><b>Proceed with Strategy:</b> The overall plan is mathematically sound and has been validated as viable. It is recommended to proceed with the monthly SIP of ‚Çπ2,50,161.47 into a diversified portfolio as per the 50/50 allocation.</li>
        <li><b>Conduct Fund Selection Due Diligence:</b> This report recommends fund <i>categories</i>, not specific funds. The investor must research and select high-quality funds within each category from reputable asset management companies.</li>
        <li><b>Annual Review and Rebalancing:</b> It is crucial to review the portfolio's performance and asset allocation at least once a year. Rebalance the portfolio back to the strategic 50/50 split if market movements cause it to drift significantly.</li>
        <li><b>Acknowledge Projections are Estimates:</b> The final simulated corpus (‚Çπ5.06 Cr) is slightly (~1.2%) below the calculated target (‚Çπ5.12 Cr). This minor difference highlights that projections are estimates and not guarantees.</li>
      </ol>
    </section>

    <section id="risk-factors">
      <h2>œÅŒØœÉŒ∫ Risk Factors and Uncertainties</h2>
      <p>This investment plan, while mathematically sound, is subject to inherent market risks and uncertainties that must be understood. The projected <b>10% annual return is a long-term average assumption</b> for a 'moderate' risk profile and is not guaranteed. Equity markets can be volatile, and short-term performance may deviate significantly from this projection, impacting the final corpus. Inflation is another critical variable; the plan assumes a 5.5% annual rate, but a <b>higher-than-expected inflation could diminish the purchasing power</b> of the final ‚Çπ5.12 crore target, potentially requiring an increased SIP amount in the future to compensate. Furthermore, this plan's success hinges on disciplined execution. <b>Any missed or delayed SIP payments will disrupt the power of compounding</b> and jeopardize the final outcome. Finally, while the strategy of using diversified fund categories is robust, the actual performance depends on the specific funds selected by the investor. Poor fund selection within the recommended categories remains a tangible risk that requires careful due diligence and periodic portfolio review. Regulatory changes, such as alterations in tax laws for capital gains, could also impact net returns.</p>
    </section>

    <section id="sip-charts">
      <h2>üìä SIP Projection & Allocation Charts</h2>
      <div style="display: block;">
        <!-- Asset Allocation FIRST (TOP) -->
        <div class="chart-container" style="margin-bottom: 30px; text-align: center;">
          <h3>Asset Allocation</h3>
          <div style="max-width: 500px; margin: 0 auto;">
            <canvas id="sipAllocationChart" width="400" height="300" style="max-width: 100%; height: auto;"></canvas>
          </div>
        </div>
        
        <!-- SIP Growth Projection SECOND (BOTTOM) -->
        <div class="chart-container" style="text-align: center;">
          <h3>SIP Growth Projection</h3>
          <div style="max-width: 800px; margin: 0 auto;">
            <canvas id="sipProjectionChart" width="600" height="400" style="max-width: 100%; height: auto;"></canvas>
          </div>
        </div>
      </div>
    </section>

    <section id="monthly-projection">
      <h2>üìà Monthly Projection (First 12 Months)</h2>
      <table>
        <thead><tr><th>Month</th><th>Cumulative Contribution</th><th>Projected Corpus</th></tr></thead>
        <tbody>
          <tr><td>M1</td><td>‚Çπ2,50,161.47</td><td>‚Çπ2,50,161.47</td></tr>
          <tr><td>M2</td><td>‚Çπ5,00,322.94</td><td>‚Çπ5,02,407.62</td></tr>
          <tr><td>M3</td><td>‚Çπ7,50,484.41</td><td>‚Çπ7,56,755.82</td></tr>
          <tr><td>M4</td><td>‚Çπ10,00,645.88</td><td>‚Çπ10,13,223.45</td></tr>
          <tr><td>M5</td><td>‚Çπ12,50,807.35</td><td>‚Çπ12,71,828.01</td></tr>
          <tr><td>M6</td><td>‚Çπ15,00,968.82</td><td>‚Çπ15,32,587.11</td></tr>
          <tr><td>M7</td><td>‚Çπ17,51,130.29</td><td>‚Çπ17,95,518.47</td></tr>
          <tr><td>M8</td><td>‚Çπ20,01,291.76</td><td>‚Çπ20,60,640.00</td></tr>
          <tr><td>M9</td><td>‚Çπ22,51,453.23</td><td>‚Çπ23,27,969.80</td></tr>
          <tr><td>M10</td><td>‚Çπ25,01,614.70</td><td>‚Çπ25,97,526.12</td></tr>
          <tr><td>M11</td><td>‚Çπ27,51,776.17</td><td>‚Çπ28,69,327.30</td></tr>
          <tr><td>M12</td><td>‚Çπ30,01,937.64</td><td>‚Çπ31,43,391.86</td></tr>
        </tbody>
      </table>
      <p><em>Note: The complete 120-month projection is visualized in the SIP Growth Projection chart above.</em></p>
    </section>

    <div class="no-print">
      <button onclick="window.print()" class="button print-btn">Print Report</button>
      <button onclick="downloadHTML()" class="button download-btn">Download HTML</button>
    </div>

  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <script id="sip-chart-data" type="application/json">
  {"projection":{"labels":["M1","M2","M3","M4","M5","M6","M7","M8","M9","M10","M11","M12","M13","M14","M15","M16","M17","M18","M19","M20","M21","M22","M23","M24","M25","M26","M27","M28","M29","M30","M31","M32","M33","M34","M35","M36","M37","M38","M39","M40","M41","M42","M43","M44","M45","M46","M47","M48","M49","M50","M51","M52","M53","M54","M55","M56","M57","M58","M59","M60","M61","M62","M63","M64","M65","M66","M67","M68","M69","M70","M71","M72","M73","M74","M75","M76","M77","M78","M79","M80","M81","M82","M83","M84","M85","M86","M87","M88","M89","M90","M91","M92","M93","M94","M95","M96","M97","M98","M99","M100","M101","M102","M103","M104","M105","M106","M107","M108","M109","M110","M111","M112","M113","M114","M115","M116","M117","M118","M119","M120"],"datasets":{"cumulative_contribution":[250161.47,500322.94,750484.41,1000645.88,1250807.35,1500968.82,1751130.29,2001291.76,2251453.23,2501614.7,2751776.17,3001937.64,3252100.11,3502261.58,3752423.05,4002584.52,4252745.99,4502907.46,4753068.93,5003230.4,5253391.87,5503553.34,5753714.81,6003876.28,6254037.75,6504199.22,6754360.69,7004522.16,7254683.63,7504845.1,7755006.57,8005168.04,8255329.51,8505490.98,8755652.45,9005813.92,9255975.39,9506136.86,9756298.33,10006459.8,10256621.27,10506782.74,10756944.21,11007105.68,11257267.15,11507428.62,11757590.09,12007751.56,12257913.03,12508074.5,12758235.97,13008397.44,13258558.91,13508720.38,13758881.85,14009043.32,14259204.79,14509366.26,14759527.73,15009689.2,15259850.67,15510012.14,15760173.61,16010335.08,16260496.55,16510658.02,16760819.49,17010980.96,17261142.43,17511303.9,17761465.37,18011626.84,18261788.31,18511949.78,18762111.25,19012272.72,19262434.19,19512595.66,19762757.13,20012918.6,20263080.07,20513241.54,20763403.01,21013564.48,21263725.95,21513887.42,21764048.89,22014210.36,22264371.83,22514533.3,22764694.77,23014856.24,23265017.71,23515179.18,23765340.65,24015502.12,24265663.59,24515825.06,24765986.53,25016148.0,25266309.47,25516470.94,25766632.41,26016793.88,26266955.35,26517116.82,26767278.29,27017439.76,27267601.23,27517762.7,27767924.17,28018085.64,28268247.11,28518408.58,28768570.05,29018731.52,29268892.99,29519054.46,29769215.93,30019377.4],"projected_corpus":[250161.47,502407.62,756755.82,1013223.45,1271828.01,1532587.11,1795518.47,2060640.0,2327969.8,2597526.12,2869327.3,3143391.86,3419738.46,3698385.95,3979353.3,4262659.6,4548324.08,4836366.11,5126805.18,5419660.89,5714952.92,6012701.06,6312925.24,6615645.45,6920881.82,7228654.5,7538983.62,7851889.35,8167391.93,8485511.53,8806268.46,9129683.1,9455775.82,9784567.02,10116077.21,10450326.86,10787336.58,11127127.05,11469719.11,11815133.6,12163391.41,12514513.51,12868520.89,13225434.56,13585275.54,13948065.17,14313824.88,14682576.22,15054340.85,15429140.52,15806997.02,16187932.19,16571967.96,16959126.33,17349429.35,17742899.1,18139557.73,18539427.54,18942531.07,19348890.96,19758529.98,20171471.07,20587737.33,21007352.01,21430338.44,21856720.0,22286520.14,22719762.31,23156470.0,23596666.92,24040376.91,24487623.92,24938431.95,25392825.22,25850828.1,26312465.04,26777760.58,27246739.38,27719426.24,28195846.13,28676024.18,29159985.54,29647755.42,30139359.12,30634822.01,31134170.53,31637431.12,32144629.41,32655791.19,33170942.22,33690108.3,34213315.34,34740590.27,35271959.03,35807447.59,36347081.98,36890888.33,37438892.73,37991211.37,38547600.55,39108356.55,39673415.82,40242804.95,40816550.66,41394679.58,41977218.61,42564194.7,43155636.32,43751570.09,44352022.67,44957021.03,45566591.91,46180762.21,46799558.89,47423009.02,48051139.76,48683978.96,49321555.45,49963901.75,50611050.93]}},"allocation":{"labels":["Equity","Debt"],"data":[50,50],"meta":{"recommended_fund_categories":{"equity":["Large Cap Funds","Mid Cap Funds"],"debt":["Corporate Bond Funds","Short Duration Funds"],"elss_optional":true}}}}  
  </script>

  <script>
  function initCharts() {
    if (typeof Chart === 'undefined') {
      console.error('Chart.js not loaded');
      return;
    }
    
    let data;
    try {
      const script = document.getElementById('sip-chart-data');
      data = script ? JSON.parse(script.textContent) : null;
    } catch (e) {
      console.warn('Chart data parse failed');
      data = null;
    }
    
    // Enhanced fallback with complete timeline
    if (!data) {
      console.warn('Using fallback data for charts.');
      data = {
        projection: {
          labels: ["M1","M2","M3","M4","M5","M6","M7","M8","M9","M10","M11","M12","M13","M14","M15","M16","M17","M18","M19","M20","M21","M22","M23","M24","M25","M26","M27","M28","M29","M30","M31","M32","M33","M34","M35","M36","M37","M38","M39","M40","M41","M42","M43","M44","M45","M46","M47","M48","M49","M50","M51","M52","M53","M54","M55","M56","M57","M58","M59","M60","M61","M62","M63","M64","M65","M66","M67","M68","M69","M70","M71","M72","M73","M74","M75","M76","M77","M78","M79","M80","M81","M82","M83","M84","M85","M86","M87","M88","M89","M90","M91","M92","M93","M94","M95","M96","M97","M98","M99","M100","M101","M102","M103","M104","M105","M106","M107","M108","M109","M110","M111","M112","M113","M114","M115","M116","M117","M118","M119","M120"],
          datasets: {
            cumulative_contribution: [25000,50000,75000,100000,125000,150000,175000,200000,225000,250000,275000,300000,325000,350000,375000,400000,425000,450000,475000,500000,525000,550000,575000,600000,625000,650000,675000,700000,725000,750000,775000,800000,825000,850000,875000,900000,925000,950000,975000,1000000,1025000,1050000,1075000,1100000,1125000,1150000,1175000,1200000,1225000,1250000,1275000,1300000,1325000,1350000,1375000,1400000,1425000,1450000,1475000,1500000,1525000,1550000,1575000,1600000,1625000,1650000,1675000,1700000,1725000,1750000,1775000,1800000,1825000,1850000,1875000,1900000,1925000,1950000,1975000,2000000,2025000,2050000,2075000,2100000,2125000,2150000,2175000,2200000,2225000,2250000,2275000,2300000,2325000,2350000,2375000,2400000,2425000,2450000,2475000,2500000,2525000,2550000,2575000,2600000,2625000,2650000,2675000,2700000,2725000,2750000,2775000,2800000,2825000,2850000,2875000,2900000,2925000,2950000,2975000,3000000],
            projected_corpus: [25250,50755,76519,102543,128831,155386,182212,209312,236692,264356,292308,320552,349093,377935,407082,436540,466312,496404,526821,557567,588648,620068,651832,683945,716412,749239,782430,815991,849927,884244,918948,954045,989540,1025440,1061750,1098476,1135626,1173205,1211220,1249678,1288586,1327951,1367780,1408080,1448859,1490125,1531885,1574148,1616922,1660215,1704035,1748392,1793293,1838750,1884770,1931365,1978544,2026318,2074697,2123692,2173315,2223577,2274490,2326066,2378316,2431252,2484887,2539233,2594302,2650106,2706658,2763971,2822058,2880932,2940607,3001097,3062415,3124575,3187591,3251477,3316247,3381916,3448499,3516010,3584465,3653879,3724267,3795645,3868028,3941432,4015873,4091366,4167928,4245574,4324322,4404188,4567340,4650661,4735168,4821880,4909814,4999990,5091425,5184139,5278150,5373478,5470142,5568161,5667556,5768346,5870552,5974194,6079293,6185870,6293947,6403545,6514686,6627391]
          }
        },
        allocation: { labels: ["Equity", "Debt"], data: [70, 30] }
      };
    }
    
    // Create allocation chart FIRST (TOP POSITION)
    const allocCtx = document.getElementById('sipAllocationChart');
    if (allocCtx && data.allocation) {
      new Chart(allocCtx, {
        type: 'doughnut',
        data: {
          labels: data.allocation.labels,
          datasets: [{ 
            data: data.allocation.data, 
            backgroundColor: ['#3B82F6', '#10B981'],
            borderWidth: 2 
          }]
        },
        options: { 
          responsive: true,
          maintainAspectRatio: true,
          aspectRatio: 1.33,
          plugins: {
            legend: { 
              position: 'bottom',
              labels: { padding: 15 }
            }
          }
        }
      });
    }
    
    // Create projection chart SECOND (BOTTOM POSITION)
    const projCtx = document.getElementById('sipProjectionChart');
    if (projCtx && data.projection) {
      new Chart(projCtx, {
        type: 'line',
        data: {
          labels: data.projection.labels,
          datasets: [{
            label: 'Projected Corpus',
            data: data.projection.datasets.projected_corpus,
            borderColor: '#3B82F6',
            backgroundColor: 'rgba(59, 130, 246, 0.1)',
            fill: true,
            tension: 0.4,
            pointRadius: 1,
            pointHoverRadius: 4
          }, {
            label: 'Cumulative Contribution', 
            data: data.projection.datasets.cumulative_contribution,
            borderColor: '#EF4444',
            backgroundColor: 'rgba(239, 68, 68, 0.1)',
            fill: false,
            tension: 0.4,
            pointRadius: 1,
            pointHoverRadius: 4
          }]
        },
        options: { 
          responsive: true,
          maintainAspectRatio: true,
          aspectRatio: 1.5,
          interaction: {
            mode: 'nearest',
            intersect: false
          },
          scales: {
            x: {
              title: { display: true, text: 'Time Period (Months)' },
              ticks: { maxTicksLimit: 10 }
            },
            y: {
              beginAtZero: true,
              title: { display: true, text: 'Amount (INR)' },
              ticks: {
                callback: function(value) {
                  if (value >= 10000000) return '‚Çπ' + (value/10000000).toFixed(2) + 'Cr';
                  return '‚Çπ' + (value/100000).toFixed(1) + 'L';
                }
              }
            }
          },
          plugins: {
            tooltip: {
              mode: 'index',
              intersect: false
            }
          }
        }
      });
    }
  }

  // Initialize with enhanced delay for proper loading
  setTimeout(initCharts, 500);

  function downloadHTML() {
    const html = document.documentElement.outerHTML;
    const blob = new Blob([html], { type: 'text/html' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'sip_comprehensive_report.html';
    a.click();
    URL.revokeObjectURL(url);
  }
  </script>
</body>
</html>