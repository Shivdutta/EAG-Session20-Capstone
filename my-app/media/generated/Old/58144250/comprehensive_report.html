<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Comprehensive SIP Analysis Report for Retirement</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background-color: #f9fafb; color: #333; }
    .container { max-width: 1000px; margin: 0 auto; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
    h1, h2, h3 { color: #111827; }
    h1 { font-size: 1.8em; border-bottom: 2px solid #3B82F6; padding-bottom: 10px; margin-bottom: 20px; }
    h2 { font-size: 1.4em; border-bottom: 1px solid #e5e7eb; padding-bottom: 8px; margin-top: 30px; margin-bottom: 15px; }
    table { width: 100%; border-collapse: collapse; margin: 15px 0; font-size: 0.9em; }
    th, td { border: 1px solid #ddd; padding: 10px; text-align: left; }
    th { background-color: #f8f9fa; font-weight: bold; }
    .callout { padding: 15px; margin: 15px 0; border-left-width: 4px; border-radius: 4px; }
    .callout.warning { border-left-color: #F59E0B; background-color: #FFFBEB; }
    .no-print { display: block; }
    @media print {
      .no-print { display: none; }
      body { box-shadow: none; padding: 0; background-color: white; }
      .container { box-shadow: none; border: none; max-width: 100%; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üìä Comprehensive SIP Analysis for Retirement</h1>

    <!-- Print/Download Controls -->
    <div style="margin: 20px 0; text-align: center;" class="no-print">
      <button onclick="window.print()" style="margin: 5px; padding: 10px 20px; background-color: #3B82F6; color: white; border: none; border-radius: 5px; cursor: pointer;">Print Report</button>
      <button onclick="downloadHTML()" style="margin: 5px; padding: 10px 20px; background-color: #10B981; color: white; border: none; border-radius: 5px; cursor: pointer;">Download HTML</button>
    </div>

    <section id="executive-summary">
      <h2>üéØ Executive Summary</h2>
      <p>This report outlines a strategic investment plan designed to achieve a retirement goal of <b>‚Çπ3,00,00,000</b> over a 10-year period. After adjusting for a projected inflation rate of 5.5%, the target corpus becomes <b>‚Çπ5,12,44,333</b>. Based on a 'moderate' risk profile with an assumed 10% annual return, the required Systematic Investment Plan (SIP) contribution is calculated to be <b>‚Çπ2,50,161.22 per month</b>. The investment strategy is a balanced <b>50/50 allocation between equity and debt</b> instruments.</p>
      <div class='callout warning'>‚ö†Ô∏è <strong>Critical Findings:</strong> Two significant issues were identified during analysis. Firstly, a validation check revealed a <b>mathematical error in the projection model</b>, causing the final projected corpus (‚Çπ5,00,91,410) to fall short of the inflation-adjusted target by approximately ‚Çπ1.15 million. Secondly, the fund reconciliation process highlighted a <b>gap in the debt portfolio</b>; the absence of 'Government Securities' funds in the provided shortlist leads to a concentration of risk in corporate bonds.</div>
      <p>This report provides a detailed breakdown of the calculations, the reconciled asset allocation plan, and strategic recommendations to address the identified gaps and risks before implementation.</p>
    </section>

    <section id='goal-inputs'>
      <h2>üìù Goal Inputs</h2>
      <p>The foundational parameters defined for this financial plan.</p>
      <table><thead><tr><th>Parameter</th><th>Value</th></tr></thead><tbody><tr><td>Goal Type</td><td>Retirement</td></tr><tr><td>Target Amount</td><td>‚Çπ30,000,000</td></tr><tr><td>Time Horizon</td><td>10 Years (120 Months)</td></tr><tr><td>Risk Appetite</td><td>Moderate</td></tr><tr><td>Currency</td><td>INR</td></tr></tbody></table>
    </section>

    <section id='inflation-adjustment'>
      <h2>üí® Inflation Adjustment</h2>
      <p>The target amount adjusted for inflation to reflect future purchasing power.</p>
      <table><thead><tr><th>Parameter</th><th>Value</th></tr></thead><tbody><tr><td>Assumed Annual Inflation</td><td>5.5%</td></tr><tr><td>Investment Duration</td><td>10 Years</td></tr><tr><td>Unadjusted Target Corpus</td><td>‚Çπ30,000,000</td></tr><tr><td><b>Inflation-Adjusted Target Corpus</b></td><td><b>‚Çπ51,244,333.71</b></td></tr></tbody></table>
    </section>

    <section id='sip-calculation'>
      <h2>üßÆ SIP Calculation</h2>
      <div class='callout warning'>‚ö†Ô∏è <strong>Calculation Discrepancy Alert:</strong> The month-by-month projection table provided in the initial data was found to be mathematically flawed. The final projected corpus in that table (‚Çπ5,00,91,410.48) <strong>does not reach</strong> the required adjusted target of ‚Çπ5,12,44,333.71, indicating an error in the compounding logic. The plan requires a corrected projection model.</div>
      <table><thead><tr><th>Parameter</th><th>Value</th></tr></thead><tbody><tr><td>Assumed Annual Return (Moderate Risk)</td><td>10%</td></tr><tr><td>Monthly Return Rate (r)</td><td>0.833%</td></tr><tr><td>Number of Months (n)</td><td>120</td></tr><tr><td>Target Future Value</td><td>‚Çπ51,244,333.71</td></tr><tr><td><b>Required Monthly SIP</b></td><td><b>‚Çπ250,161.22</b></td></tr></tbody></table>
    </section>

    <section id='asset-allocation'>
      <h2>üß© Asset Allocation Plan (Reconciled)</h2>
      <p>A practical allocation of the monthly SIP based on the initial strategy and available fund categories. This plan reflects adjustments made due to the absence of certain fund types in the provided shortlist.</p>
      <div style='display: flex; gap: 20px; flex-wrap: wrap;'>
        <div><h3>Equity Allocation: 50%</h3><ul><li><strong>Large & Mid Cap Funds (30%):</strong> Provides a blend of stability from large-cap stocks and growth from mid-cap stocks.<ul><li><i>Motilal Oswal Large and Midcap Fund</i></li><li><i>Invesco India Large & Mid Cap Fund</i></li></ul></li><li><strong>Mid Cap Funds (20%):</strong> Adds a higher growth potential component to the portfolio.<ul><li><i>PGIM India Midcap Fund</i></li></ul></li></ul></div>
        <div><h3>Debt Allocation: 50%</h3><ul><li><strong>Corporate Bond Funds (50%):</strong> Fulfills the primary debt category, providing relative stability and income.<ul><li><i>HDFC Corporate Bond Fund</i></li><li><i>ICICI Prudential Corporate Bond Fund</i></li></ul></li><li><strong style='color: #D32F2F;'>Government Securities (0%):</strong><div class='callout warning'>‚ö†Ô∏è This category was recommended for safety but no matching funds were found in the provided shortlist. This concentrates debt risk in corporate credit.</div></li></ul></div>
      </div>
    </section>

    <section id='recommendations'>
      <h2>üîë Key Recommendations & Analysis</h2>
      <h3>Risk Profile Alignment</h3><p>The resulting 50/50 equity-debt portfolio is well-aligned with a 'moderate' risk profile. It provides a foundational balance between growth-oriented assets (equity) and income-generating, lower-volatility assets (debt).</p>
      <h3>Gaps and Considerations</h3><p>The primary gap identified is the <b>lack of diversification within the debt allocation</b>. The original plan wisely included 'Government Securities' for maximum safety and to counterbalance the credit risk of corporate bonds. Since no such funds were shortlisted, the current plan concentrates all debt risk in corporate credit.</p>
      <h3>Actionable Steps</h3><ol><li><strong>Correct Projection Model:</strong> The first priority is to re-run the projection calculations to ensure the monthly SIP of ‚Çπ250,161.22 demonstrably achieves the target of ‚Çπ5.12 Cr.</li><li><strong>Diversify Debt Holdings:</strong> Initiate a follow-up action to find suitable 'Government Securities' or Gilt funds.</li><li><strong>Re-balance Debt Allocation:</strong> Once suitable government-backed funds are identified, re-balance the 50% debt allocation, for instance, to a 25/25 split between Corporate Bonds and Government Securities to achieve the intended diversification.</li></ol>
    </section>

    <section id='risk-factors'>
      <h2>üìâ Risk Factors and Uncertainties</h2>
      <p>For a 'moderate' risk profile, it is crucial to understand the inherent risks that could impact the investment plan's outcome. While diversification mitigates some risks, none can be eliminated entirely. The key risks for this 10-year retirement plan include:</p>
      <ul><li><strong>Market Risk:</strong> The value of equity investments can fluctuate significantly due to economic changes, sector-specific news, and investor sentiment. A market downturn, especially closer to the 10-year goal, could impact the final corpus. The 50% allocation to debt is designed to cushion this volatility.</li><li><strong>Inflation Risk:</strong> The plan assumes a 5.5% inflation rate. If actual inflation is consistently higher, the real value of the ‚Çπ5.12 crore target will be eroded, potentially leaving a shortfall in purchasing power at retirement.</li><li><strong>Credit Risk:</strong> <em>This risk is elevated in the current plan.</em> With 100% of the debt portfolio in corporate bonds, there is a concentrated risk of default by the underlying companies. The original intent to include Government Securities was to mitigate this, making diversification an urgent recommendation.</li><li><strong>Shortfall Risk:</strong> As identified by the validation agent, there is a clear risk that the calculated SIP might not be sufficient due to calculation errors or if the assumed 10% annual return is not achieved. Periodic reviews (annual or semi-annual) are essential to adjust the SIP amount upwards if the portfolio is underperforming.</li></ul>
    </section>

    <!-- FIXED v11 Chart Layout: Vertical Stack, Allocation on Top -->
    <section id="sip-charts">
      <h2>üìä SIP Projection & Allocation Charts</h2>
      <div style="display: block;">
        <!-- Asset Allocation FIRST (TOP) -->
        <div class="chart-container" style="margin-bottom: 30px; text-align: center;">
          <h3>Asset Allocation</h3>
          <div style="max-width: 500px; margin: 0 auto;">
            <canvas id="sipAllocationChart" width="400" height="300" style="max-width: 100%; height: auto;"></canvas>
          </div>
        </div>
        
        <!-- SIP Growth Projection SECOND (BOTTOM) -->
        <div class="chart-container" style="text-align: center;">
          <h3>SIP Growth Projection</h3>
          <div style="max-width: 800px; margin: 0 auto;">
            <canvas id="sipProjectionChart" width="600" height="400" style="max-width: 100%; height: auto;"></canvas>
          </div>
        </div>
      </div>
    </section>

    <section id="monthly-projection">
      <h2>üìà Monthly Projection (First 12 Months)</h2>
      <table>
        <thead>
          <tr><th>Month</th><th>Cumulative Contribution</th><th>Projected Corpus</th></tr>
        </thead>
        <tbody>
          <tr><td>M1</td><td>‚Çπ250,161.22</td><td>‚Çπ250,161.22</td></tr><tr><td>M2</td><td>‚Çπ500,322.44</td><td>‚Çπ502,407.45</td></tr><tr><td>M3</td><td>‚Çπ750,483.66</td><td>‚Çπ756,755.40</td></tr><tr><td>M4</td><td>‚Çπ1,000,644.88</td><td>‚Çπ1,013,221.72</td></tr><tr><td>M5</td><td>‚Çπ1,250,806.10</td><td>‚Çπ1,271,823.09</td></tr><tr><td>M6</td><td>‚Çπ1,500,967.32</td><td>‚Çπ1,532,576.25</td></tr><tr><td>M7</td><td>‚Çπ1,751,128.54</td><td>‚Çπ1,795,498.05</td></tr><tr><td>M8</td><td>‚Çπ2,001,289.76</td><td>‚Çπ2,060,605.37</td></tr><tr><td>M9</td><td>‚Çπ2,251,450.98</td><td>‚Çπ2,327,915.08</td></tr><tr><td>M10</td><td>‚Çπ2,501,612.20</td><td>‚Çπ2,597,444.15</td></tr><tr><td>M11</td><td>‚Çπ2,751,773.42</td><td>‚Çπ2,869,209.68</td></tr><tr><td>M12</td><td>‚Çπ3,001,934.64</td><td>‚Çπ3,143,228.86</td></tr>
        </tbody>
      </table>
      <p><em>Note: The projection data shown is based on the initial, flawed calculation and requires revision to accurately reflect the goal. The complete 120-month timeline is visualized in the chart above.</em></p>
    </section>

  </div>

  <!-- Load Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Embed chart data -->
  <script id="sip-chart-data" type="application/json">
  {"projection":{"labels":["M1","M2","M3","M4","M5","M6","M7","M8","M9","M10","M11","M12","M13","M14","M15","M16","M17","M18","M19","M20","M21","M22","M23","M24","M25","M26","M27","M28","M29","M30","M31","M32","M33","M34","M35","M36","M37","M38","M39","M40","M41","M42","M43","M44","M45","M46","M47","M48","M49","M50","M51","M52","M53","M54","M55","M56","M57","M58","M59","M60","M61","M62","M63","M64","M65","M66","M67","M68","M69","M70","M71","M72","M73","M74","M75","M76","M77","M78","M79","M80","M81","M82","M83","M84","M85","M86","M87","M88","M89","M90","M91","M92","M93","M94","M95","M96","M97","M98","M99","M100","M101","M102","M103","M104","M105","M106","M107","M108","M109","M110","M111","M112","M113","M114","M115","M116","M117","M118","M119","M120"],"datasets":{"cumulative_contribution":[250161.22,500322.44,750483.66,1000644.88,1250806.1,1500967.32,1751128.54,2001289.76,2251450.98,2501612.2,2751773.42,3001934.64,3252095.86,3502257.08,3752418.3,4002579.52,4252740.74,4502901.96,4753063.18,5003224.4,5253385.62,5503546.84,5753708.06,6003869.28,6254030.5,6504191.72,6754352.94,7004514.16,7254675.38,7504836.6,7754997.82,8005159.04,8255320.26,8505481.48,8755642.7,9005803.92,9255965.14,9506126.36,9756287.58,10006448.8,10256610.02,10506771.24,10756932.46,11007093.68,11257254.9,11507416.12,11757577.34,12007738.56,12257899.78,12508061,12758222.22,13008383.44,13258544.66,13508705.88,13758867.1,14009028.32,14259189.54,14509350.76,14759511.98,15009673.2,15259834.42,15509995.64,15760156.86,16010318.08,16260479.3,16510640.52,16760801.74,17010962.96,17261124.18,17511285.4,17761446.62,18011607.84,18261769.06,18511930.28,18762091.5,19012252.72,19262413.94,19512575.16,19762736.38,20012897.6,20263058.82,20513220.04,20763381.26,21013542.48,21263703.7,21513864.92,21764026.14,22014187.36,22264348.58,22514509.8,22764671.02,23014832.24,23264993.46,23515154.68,23765315.9,24015477.12,24265638.34,24515799.56,24765960.78,25016122,25266283.22,25516444.44,25766605.66,26016766.88,26266928.1,26517089.32,26767250.54,27017411.76,27267572.98,27517734.2,27767895.42,28018056.64,28268217.86,28518379.08,28768540.3,29018701.52,29268862.74,29519023.96,29769185.18,30019346.4],"projected_corpus":[250161.22,502407.45,756755.4,1013221.72,1271823.09,1532576.25,1795498.05,2060605.37,2327915.08,2597444.15,2869209.68,3143228.86,3419518.93,3698097.22,3978981.04,4262187.87,4547735.21,4835640.69,5125922.03,5418597.02,5713683.47,6011199.3,6311162.46,6613590.95,6918502.87,7225916.39,7535849.72,7848321.13,8163348.97,8480951.64,8801147.6,9123955.33,9449393.36,9777480.2,10108234.54,10441675.16,10777820.89,11116690.73,11458303.81,11802679.35,12149836.65,12499795.12,12852574.11,13208193.09,13566671.55,13928029.07,14292285.34,14659460.05,15029573.05,15402644.22,15778693.45,16157740.75,16539806.29,16924909.5,17313070.08,17704307.73,18098642.3,18496093.65,18896681.76,19300426.61,19707348.13,20117466.36,20530801.38,20947373.4,21367202.51,21790308.83,22216712.57,22646434.01,23079493.53,23515911.64,23955708.9,24398905.9,24845523.45,25295582.48,25749104,26206109.2,26666619.44,27130656.1,27598240.57,28069394.24,28544138.56,29022495.01,29504485.13,29990130.47,30479452.56,30972473,31469213.44,31969695.55,32473940.98,32981971.46,33493808.55,34009473.92,34528989.2,35052376.11,35579656.41,36110851.91,36645984.51,37185076.08,37728148.51,38275223.75,38826323.75,39381470.48,39940685.9,40503991.95,41071410.58,41642963.8,42218673.66,42798562.24,43382651.93,43970965.16,44563524.53,45160352.74,45761472.54,46366906.81,46976678.43,47590810.28,48209325.37,48832246.75,49459600.47,50091410.48]}},"allocation":{"labels":["Equity","Debt"],"data":[50,50],"meta":{"recommended_fund_categories":{"equity":["Large Cap Funds","Mid Cap Funds"],"debt":["Corporate Bond Funds","Government Securities"],"elss_optional":true}}}}  
</script>

  <!-- ENHANCED v11 chart rendering script -->
  <script>
  function initCharts() {
    if (typeof Chart === 'undefined') {
      console.error('Chart.js not loaded');
      return;
    }
    
    let data;
    try {
      const script = document.getElementById('sip-chart-data');
      data = script ? JSON.parse(script.textContent) : null;
    } catch (e) {
      console.warn('Chart data parse failed');
      data = null;
    }
    
    // Enhanced fallback with complete timeline
    if (!data) {
      data = {
        projection: {
          labels: ["M1","M2","M3","M4","M5","M6","M7","M8","M9","M10","M11","M12","M13","M14","M15","M16","M17","M18","M19","M20","M21","M22","M23","M24","M25","M26","M27","M28","M29","M30","M31","M32","M33","M34","M35","M36","M37","M38","M39","M40","M41","M42","M43","M44","M45","M46","M47","M48","M49","M50","M51","M52","M53","M54","M55","M56","M57","M58","M59","M60","M61","M62","M63","M64","M65","M66","M67","M68","M69","M70","M71","M72","M73","M74","M75","M76","M77","M78","M79","M80","M81","M82","M83","M84","M85","M86","M87","M88","M89","M90","M91","M92","M93","M94","M95","M96","M97","M98","M99","M100","M101","M102","M103","M104","M105","M106","M107","M108","M109","M110","M111","M112","M113","M114","M115","M116","M117","M118","M119","M120"],
          datasets: {
            cumulative_contribution: [25000,50000,75000,100000,125000,150000,175000,200000,225000,250000,275000,300000,325000,350000,375000,400000,425000,450000,475000,500000,525000,550000,575000,600000,625000,650000,675000,700000,725000,750000,775000,800000,825000,850000,875000,900000,925000,950000,975000,1000000,1025000,1050000,1075000,1100000,1125000,1150000,1175000,1200000,1225000,1250000,1275000,1300000,1325000,1350000,1375000,1400000,1425000,1450000,1475000,1500000,1525000,1550000,1575000,1600000,1625000,1650000,1675000,1700000,1725000,1750000,1775000,1800000,1825000,1850000,1875000,1900000,1925000,1950000,1975000,2000000,2025000,2050000,2075000,2100000,2125000,2150000,2175000,2200000,2225000,2250000,2275000,2300000,2325000,2350000,2375000,2400000,2425000,2450000,2475000,2500000,2525000,2550000,2575000,2600000,2625000,2650000,2675000,2700000,2725000,2750000,2775000,2800000,2825000,2850000,2875000,2900000,2925000,2950000,2975000,3000000],
            projected_corpus: [25250,50755,76519,102543,128831,155386,182212,209312,236692,264356,292308,320552,349093,377935,407082,436540,466312,496404,526821,557567,588648,620068,651832,683945,716412,749239,782430,815991,849927,884244,918948,954045,989540,1025440,1061750,1098476,1135626,1173205,1211220,1249678,1288586,1327951,1367780,1408080,1448859,1490125,1531885,1574148,1616922,1660215,1704035,1748392,1793293,1838750,1884770,1931365,1978544,2026318,2074697,2123692,2173315,2223577,2274490,2326066,2378316,2431252,2484887,2539233,2594302,2650106,2706658,2763971,2822058,2880932,2940607,3001097,3062415,3124575,3187591,3251477,3316247,3381916,3448499,3516010,3584465,3653879,3724267,3795645,3868028,3941432,4015873,4091366,4167928,4245574,4324322,4404188,4485188,4567340,4650661,4735168,4821880,4909814,4999990,5091425,5184139,5278150,5373478,5470142,5568161,5667556,5768346,5870552,5974194,6079293,6185870,6293947,6403545,6514686,6627391]
          }
        },
        allocation: { labels: ["Equity", "Debt"], data: [70, 30] }
      };
    }
    
    // Create allocation chart FIRST (TOP POSITION)
    const allocCtx = document.getElementById('sipAllocationChart');
    if (allocCtx) {
      new Chart(allocCtx, {
        type: 'doughnut',
        data: {
          labels: data.allocation.labels,
          datasets: [{ 
            data: data.allocation.data, 
            backgroundColor: ['#3B82F6', '#10B981'],
            borderWidth: 2 
          }]
        },
        options: { 
          responsive: true,
          maintainAspectRatio: true,
          aspectRatio: 1.33,
          plugins: {
            legend: { 
              position: 'bottom',
              labels: { padding: 15 }
            }
          }
        }
      });
    }
    
    // Create projection chart SECOND (BOTTOM POSITION)
    const projCtx = document.getElementById('sipProjectionChart');
    if (projCtx) {
      new Chart(projCtx, {
        type: 'line',
        data: {
          labels: data.projection.labels,
          datasets: [{
            label: 'Projected Corpus',
            data: data.projection.datasets.projected_corpus,
            borderColor: '#3B82F6',
            backgroundColor: 'rgba(59, 130, 246, 0.1)',
            fill: true,
            tension: 0.4,
            pointRadius: 1,
            pointHoverRadius: 4
          }, {
            label: 'Cumulative Contribution', 
            data: data.projection.datasets.cumulative_contribution,
            borderColor: '#EF4444',
            backgroundColor: 'rgba(239, 68, 68, 0.1)',
            fill: false,
            tension: 0.4,
            pointRadius: 1,
            pointHoverRadius: 4
          }]
        },
        options: { 
          responsive: true,
          maintainAspectRatio: true,
          aspectRatio: 1.5,
          interaction: {
            mode: 'nearest',
            intersect: false
          },
          scales: {
            x: {
              title: { display: true, text: 'Time Period (Months)' },
              ticks: { maxTicksLimit: 10 }
            },
            y: {
              beginAtZero: true,
              title: { display: true, text: 'Amount (INR)' },
              ticks: {
                callback: function(value) {
                  return '‚Çπ' + (value/100000).toFixed(1) + 'L';
                }
              }
            }
          },
          plugins: {
            tooltip: {
              mode: 'index',
              intersect: false
            }
          }
        }
      });
    }
  }

  // Initialize with enhanced delay for proper loading
  setTimeout(initCharts, 500);
  </script>

  <script>
  function downloadHTML() {
    const html = document.documentElement.outerHTML;
    const blob = new Blob([html], { type: 'text/html' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'sip_report.html';
    a.click();
    URL.revokeObjectURL(url);
  }
  </script>

</body>
</html>