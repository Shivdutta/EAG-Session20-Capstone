<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comprehensive SIP Analysis Report</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .report {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            padding: 20px;
        }
        .report h1 {
            font-size: 2em;
            margin-bottom: 20px;
        }
        .report h2 {
            font-size: 1.5em;
            margin-top: 30px;
            margin-bottom: 15px;
        }
        .report p {
            margin-bottom: 10px;
        }
        .report ul, .report ol {
            margin-bottom: 10px;
            padding-left: 20px;
        }
        .report li {
            margin-bottom: 5px;
        }
        .charts-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        .chart-container {
            border: 1px solid #ddd;
            padding: 10px;
            border-radius: 5px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        .table-container {
            overflow-x: auto;
        }
        @media print {
            .no-print {
                display: none;
            }
        }
    </style>
</head>
<body class="bg-gray-100">

<div class="container mx-auto p-4">
    <div class="report">
        <h1 class="text-2xl font-bold text-center mb-8">ðŸ“Š Comprehensive SIP Analysis Report</h1>

        <section id="executive_summary">
            <h2 class="text-xl font-semibold mb-4">ðŸŽ¯ Executive Summary</h2>
            <p>This report provides a comprehensive analysis of a Systematic Investment Plan (SIP) tailored to meet your retirement goal of â‚¹30,000,000 in 10 years, adjusted for inflation. Key recommendations include a diversified asset allocation strategy with 70% equity and 30% debt, focusing on specific fund categories such as Large Cap, Mid Cap, and Small Cap equity funds and Corporate Bond and Short Duration debt funds. The analysis considers potential risks and uncertainties, providing a balanced perspective for informed decision-making. Based on a high-risk appetite, the suggested monthly SIP amount is â‚¹259,381.19 to reach an inflation-adjusted target of â‚¹51,265,776.57.</p>
        </section>

        <section id="goal_inputs">
            <h2 class="text-xl font-semibold mb-4">Input parameters</h2>
            <p><b>Goal Type:</b> Retirement</p>
            <p><b>Target Amount:</b> â‚¹30,000,000</p>
            <p><b>Time Horizon:</b> 10 years (120 months)</p>
            <p><b>Risk Appetite:</b> High</p>
        </section>

        <section id="inflation_adjustment">
            <h2 class="text-xl font-semibold mb-4">Inflation Adjustment</h2>
            <p><b>Inflation Rate:</b> 5.5%</p>
            <p><b>Unadjusted Target:</b> â‚¹30,000,000</p>
            <p><b>Adjusted Target (after 10 years):</b> â‚¹51,265,776.57</p>
        </section>

        <section id="sip_calculation">
            <h2 class="text-xl font-semibold mb-4">SIP Calculation</h2>
            <p><b>Monthly Return Rate:</b> 1%</p>
            <p><b>Adjusted Target:</b> â‚¹51,265,776.57</p>
            <p><b>Calculated Monthly SIP:</b> â‚¹259,381.19</p>
        </section>

        <section id="asset_allocation_plan">
            <h2 class="text-xl font-semibold mb-4">Asset Allocation Plan</h2>
            <p><b>Equity Allocation:</b> 70%</p>
            <p><b>Debt Allocation:</b> 30%</p>
            <h3 class="text-lg font-semibold mt-2">Recommended Fund Categories</h3>
            <ul>
                <li><b>Equity:</b> Large Cap Funds, Mid Cap Funds, Small Cap Funds</li>
                <li><b>Debt:</b> Corporate Bond Funds, Short Duration Funds</li>
                <li><b>ELSS (Optional)</b></li>
            </ul>
        </section>

        <section id="allocation_notes">
            <h2 class="text-xl font-semibold mb-4">Allocation Notes</h2>
            <p>The asset allocation is based on a high-risk appetite, aiming for higher returns with a greater proportion of equity. The following guidelines were used:</p>
            <ul>
                <li><b>High policy</b> â†’ Aggressive, e.g., 70% equity / 30% debt</li>
            </ul>
        </section>

        <section id="key_recommendations">
            <h2 class="text-xl font-semibold mb-4">Key Recommendations</h2>
            <p>Based on the analysis and fund recommendations from T013, the following recommendations are made:</p>
            <ol>
                <li>Allocate 70% of the portfolio to equity funds and 30% to debt funds.</li>
                <li>Select PGIM India Large Cap Fund, PGIM India Midcap Fund, and PGIM India Small Cap Fund for the equity portion.</li>
                <li>Consider PGIM India ELSS Tax Saver Fund for tax planning benefits.</li>
                <li>Choose Nippon India Corporate Bond Fund, Axis Corporate Bond Fund or ICICI Prudential Corporate Bond Fund for the debt portion.</li>
                <li>Obtain expense ratio data for all funds before investing.</li>
                <li>Review fund performance regularly and adjust the portfolio as needed.</li>
                <li>Consult with a financial advisor for personalized guidance.</li>
            </ol>
            <p><b>Recommended Funds:</b></p>
            <p><b>Equity (70%):</b></p>
            <ul>
                <li><b>Large Cap Funds:</b> PGIM India Large Cap Fund (13.91%)</li>
                <li><b>Mid Cap Funds:</b> PGIM India Midcap Fund (18.90%)</li>
                <li><b>Small Cap Funds:</b> PGIM India Small Cap Fund (15.02%) and Invesco India Smallcap Fund (-0.2%) and Bandhan Small Cap Fund (-3.2%).</li>
                <li><b>ELSS (Optional):</b> PGIM India ELSS Tax Saver Fund (15.44%)</li>
            </ul>
            <p><b>Debt (30%):</b></p>
            <ul>
                <li><b>Corporate Bond Funds:</b> Nippon India Corporate Bond Fund (7.07%), Axis Corporate Bond Fund (6.91%), and ICICI Prudential Corporate Bond Fund (6.83%)</li>
            </ul>
        </section>

        <section id="risk_factors_uncertainties">
            <h2 class="text-xl font-semibold mb-4">Risk Factors and Uncertainties</h2>
            <p>Investing in financial markets involves inherent risks and uncertainties. Here are some key factors to consider:</p>
            <ul>
                <li><b>Market Volatility:</b> Equity markets are subject to fluctuations and volatility, which can impact the value of investments.</li>
                <li><b>Interest Rate Risk:</b> Changes in interest rates can affect the value of debt funds.</li>
                <li><b>Credit Risk:</b> Corporate bond funds carry the risk of default by the issuing company.</li>
                <li><b>Inflation Risk:</b> Inflation can erode the real value of returns over time.</li>
                <li><b>Liquidity Risk:</b> Certain investments may be difficult to sell quickly, leading to potential losses.</li>
                <li><b>Regulatory Risk:</b> Changes in regulations can impact the financial markets and investment performance.</li>
                <li><b>Economic Risk:</b> Economic downturns can negatively affect investment returns.</li>
            </ul>
            <p><b>Additional Risks and Uncertainties:</b></p>
            <ul>
                <li><b>Fund Manager Risk:</b> The performance of the selected funds depends on the fund manager's expertise and decisions.</li>
                <li><b>Expense Ratio Impact:</b> Higher expense ratios can reduce the overall returns on investments.</li>
                <li><b>Tax Implications:</b> Investment returns are subject to tax implications, which can vary based on the investor's tax bracket and applicable regulations.</li>
                <li><b>Rebalancing Risk:</b> The need to rebalance the portfolio periodically to maintain the desired asset allocation can incur transaction costs and tax liabilities.</li>
                <li><b>Unexpected Expenses:</b> Unforeseen expenses or financial emergencies can disrupt the SIP and impact the ability to meet the target amount.</li>
            </ul>
            <p><b>Data Limitations:</b> The absence of expense ratio data limits a complete assessment of fund suitability.  Investors should seek this information before making decisions.</p>
            <p><b>Short-Term Returns:</b> Relying solely on 1-year returns may not be indicative of future performance. Longer-term performance should be considered.</p>
        </section>

        <section id="sip-charts">
            <h2 class="text-xl font-semibold mb-4">ðŸ“Š SIP Projection & Allocation Charts</h2>
            <div class="charts-grid">
                <div class="chart-container">
                    <h3 class="text-lg font-semibold">SIP Growth Projection</h3>
                    <canvas id="sipProjectionChart" width="400" height="300"></canvas>
                </div>
                <div class="chart-container">
                    <h3 class="text-lg font-semibold">Asset Allocation</h3>
                    <canvas id="sipAllocationChart" width="400" height="300"></canvas>
                </div>
            </div>
        </section>

        <section id="sip-projection-long-horizon">
            <h2 class="text-xl font-semibold mb-4">ðŸ“ˆ SIP Projection Summary (First 12 Months)</h2>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Month</th>
                            <th>Cumulative Contribution</th>
                            <th>Projected Corpus</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="3">Data not available</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <section id="disclaimer">
            <h2 class="text-xl font-semibold mb-4">Disclaimer</h2>
            <p>This report is for informational purposes only and does not constitute financial advice. Investment decisions should be made based on individual circumstances and after consulting with a qualified financial advisor. The author is not responsible for any financial losses incurred as a result of using this information.</p>
        </section>
        
        <div class="no-print mt-4">
            <button onclick="window.print()" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mr-2">Print Report</button>
            <button onclick="downloadReport()" class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded">Download HTML</button>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script id="sip-chart-data" type="application/json">{"projection":{"labels":[],"datasets":{"cumulative_contribution":[],"projected_corpus":[]}},"allocation":{"labels":["Equity","Debt"],"data":[70,30],"meta":{"recommended_fund_categories":{"equity":["Large Cap Funds","Mid Cap Funds","Small Cap Funds"],"debt":["Corporate Bond Funds","Short Duration Funds"],"elss_optional":true}}}}</script>
<script id="goal-input-json" type="application/json">{}</script>
<script id="inflation-adjusted-json" type="application/json">{}</script>
<script id="sip-calc-json" type="application/json">{}</script>
<script id="allocation-plan-json" type="application/json">{}</script>
<script id="report-payload" type="application/json">{}</script>

<script>
function initializeCharts() {
    try {
        // Check if Chart.js is loaded
        if (typeof Chart === 'undefined') {
            console.error('Chart.js not loaded');
            return;
        }

        // Get chart data with robust error handling
        let chartData;
        try {
            const dataScript = document.getElementById('sip-chart-data');
            if (dataScript && dataScript.textContent.trim()) {
                chartData = JSON.parse(dataScript.textContent);
            }
        } catch (e) {
            console.warn('Failed to parse chart data, using fallbacks:', e);
        }

        // Robust fallback data
        if (!chartData) {
            chartData = {
                projection: {
                    labels: ["M1","M2","M3","M4","M5","M6","M7","M8","M9","M10","M11","M12"],
                    datasets: {
                        cumulative_contribution: [240372,480745,721117,961490,1201862,1442235,1682607,1922980,2163352,2403725,2644097,2884470],
                        projected_corpus: [242776,485444,730671,978348,1228504,1481162,1736346,1994082,2254395,2517317,2782872,3051094]
                    }
                },
                allocation: {
                    labels: ["Equity", "Debt"],
                    data: [70, 30]
                }
            };
        }

        // Create projection chart with validation
        const projectionCtx = document.getElementById('sipProjectionChart');
        if (projectionCtx) {
            new Chart(projectionCtx.getContext('2d'), {
                type: 'line',
                data: {
                    labels: chartData.projection.labels || [],
                    datasets: [{
                        label: 'Projected Corpus',
                        data: chartData.projection.datasets.projected_corpus || [],
                        borderColor: 'rgb(75, 192, 192)',
                        backgroundColor: 'rgba(75, 192, 192, 0.2)',
                        fill: true,
                        tension: 0.4
                    }, {
                        label: 'Cumulative Contribution',
                        data: chartData.projection.datasets.cumulative_contribution || [],
                        borderColor: 'rgb(255, 99, 132)',
                        backgroundColor: 'rgba(255, 99, 132, 0.2)',
                        fill: false,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: 'Amount (INR)' },
                            ticks: {
                                callback: function(value) {
                                    return '\u20b9' + (value/100000).toFixed(1) + 'L';
                                }
                            }
                        },
                        x: {
                            title: { display: true, text: 'Time Period' }
                        }
                    }
                }
            });
        }

        // Create allocation chart with validation
        const allocationCtx = document.getElementById('sipAllocationChart');
        if (allocationCtx) {
            new Chart(allocationCtx.getContext('2d'), {
                type: 'doughnut',
                data: {
                    labels: chartData.allocation.labels || ['Equity', 'Debt'],
                    datasets: [{
                        data: chartData.allocation.data || [60, 40],
                        backgroundColor: ['#3B82F6', '#10B981'],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: { padding: 20 }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.label + ': ' + context.parsed + '%';
                                }
                            }
                        }
                    }
                }
            });
        }
    } catch (error) {
        console.error('Chart initialization failed:', error);

        // Show error message in chart containers
        const projectionContainer = document.getElementById('sipProjectionChart');
        const allocationContainer = document.getElementById('sipAllocationChart');
        if (projectionContainer) {
            projectionContainer.parentElement.innerHTML = '<p>Chart loading failed. Please refresh the page.</p>';
        }
        if (allocationContainer) {
            allocationContainer.parentElement.innerHTML = '<p>Chart loading failed. Please refresh the page.</p>';
        }
    }
}

// Initialize charts when everything is ready with proper timing
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', function() {
        setTimeout(initializeCharts, 200); // Increased delay to ensure Chart.js is ready
    });
} else {
    setTimeout(initializeCharts, 200);
}

function downloadReport() {
    const htmlContent = document.documentElement.outerHTML;
    const blob = new Blob([htmlContent], { type: 'text/html' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'sip_analysis_report.html';
    a.click();
    URL.revokeObjectURL(url);
}
</script>

</body>
</html>