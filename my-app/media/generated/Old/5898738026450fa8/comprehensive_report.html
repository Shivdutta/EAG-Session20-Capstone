<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Comprehensive SIP Financial Plan for Retirement</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; margin: 0; padding: 20px; background-color: #f9fafb; color: #1f2937; }
    .container { max-width: 1200px; margin: 0 auto; background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
    h1 { font-size: 2.25rem; font-weight: bold; color: #111827; border-bottom: 2px solid #3B82F6; padding-bottom: 0.5rem; margin-bottom: 1.5rem; }
    h2 { font-size: 1.5rem; font-weight: bold; color: #111827; margin-top: 2rem; margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 1px solid #e5e7eb; }
    table { width: 100%; border-collapse: collapse; margin: 1.5rem 0; }
    th, td { border: 1px solid #ddd; padding: 12px; text-align: left; vertical-align: top; }
    th { background-color: #f8f9fa; font-weight: 600; }
    p { line-height: 1.6; margin-bottom: 1rem; }
    ul, ol { margin-left: 1.5rem; margin-bottom: 1rem; }
    li { margin-bottom: 0.5rem; }
    .executive-summary { background-color: #eff6ff; border-left: 4px solid #3B82F6; padding: 1.5rem; margin-bottom: 2rem; border-radius: 4px; }
    .callout.warning { background-color: #fffbeb; border-left: 4px solid #f59e0b; padding: 1rem; margin-bottom: 1rem; border-radius: 4px; }
    .no-print { display: block; }
    @media print {
      body { padding: 0; background-color: #fff; -webkit-print-color-adjust: exact; print-color-adjust: exact; }
      .container { box-shadow: none; border: none; padding: 0.5rem; }
      h1, h2 { margin-top: 1.5rem; }
      .no-print { display: none; }
      section { page-break-inside: avoid; }
      .chart-container { page-break-inside: avoid !important; margin: 15px 0; }
      canvas { max-height: 250px !important; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üìä Comprehensive SIP Financial Plan for Retirement</h1>
    
    <div class="no-print" style="margin: 20px 0; text-align: center;">
      <button onclick="window.print()" style="margin: 5px; padding: 12px 24px; background-color: #3B82F6; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 1rem; font-weight: 500;">Print Report</button>
      <button onclick="downloadHTML()" style="margin: 5px; padding: 12px 24px; background-color: #10B981; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 1rem; font-weight: 500;">Download HTML</button>
    </div>

    <section id="executive-summary">
      <div class="executive-summary">
        <h2>üéØ Executive Summary</h2>
        <p>This report outlines a strategic Systematic Investment Plan (SIP) designed to achieve a retirement corpus of <b>‚Çπ3,00,00,000</b> over a <b>10-year horizon</b>. Factoring in a projected annual inflation rate of 5.5%, the future value of this goal is approximately <b>‚Çπ5,12,44,329</b>. To meet this inflation-adjusted target, a monthly SIP contribution of <b>‚Çπ2,22,763</b> is required, assuming an annualized return of 12% consistent with the investor's 'high' risk appetite. The cornerstone of this strategy is an aggressive asset allocation of <b>70% in Equity and 30% in Debt</b>. The equity component is designed to be the primary growth engine, leveraging Large and Mid Cap funds, while the debt component, comprising Corporate Bond and Short Duration funds, aims to provide stability and capital preservation.</p>
        <div class='callout warning'>‚ö†Ô∏è <b>Critical Caveat:</b> While the strategic framework is sound, a critical upstream data retrieval failure prevented the shortlisting of specific mutual funds. Therefore, this report provides a comprehensive strategic blueprint but is <b>not yet an actionable investment plan</b>. The next step must be to resolve the data issue and select specific, high-quality funds within the recommended categories.</div>
      </div>
    </section>

    <section id='goal-inputs'><h2>üìù Goal Inputs</h2><p>The following parameters form the foundation of this financial plan, based on the user's stated objectives and risk profile.</p><table><thead><tr><th>Parameter</th><th>Value</th></tr></thead><tbody><tr><td>Goal Type</td><td>Retirement</td></tr><tr><td>Current Age</td><td>50</td></tr><tr><td>Target Retirement Age</td><td>60</td></tr><tr><td>Target Amount</td><td>‚Çπ3,00,00,000</td></tr><tr><td>Currency</td><td>INR</td></tr><tr><td>Time Horizon</td><td>10 Years (120 Months)</td></tr><tr><td>Risk Appetite</td><td><b>High</b></td></tr></tbody></table></section>
    <section id='inflation-adjustment'><h2>üéà Inflation Adjustment</h2><p>To ensure the future corpus maintains its present-day purchasing power, the target amount has been adjusted for inflation.</p><table><thead><tr><th>Parameter</th><th>Value</th></tr></thead><tbody><tr><td>Assumed Annual Inflation</td><td>5.5%</td></tr><tr><td>Investment Horizon</td><td>10 Years</td></tr><tr><td>Unadjusted Target Corpus</td><td>‚Çπ3,00,00,000</td></tr><tr><td><b>Inflation-Adjusted Target Corpus</b></td><td><b>‚Çπ5,12,44,329</b></td></tr></tbody></table></section>
    <section id='sip-calculation'><h2>üßÆ Required Monthly SIP Calculation</h2><p>Based on the inflation-adjusted target, the required monthly investment is calculated as follows.</p><table><thead><tr><th>Parameter</th><th>Value</th></tr></thead><tbody><tr><td>Assumed Annualized Return (High Risk)</td><td>12.0%</td></tr><tr><td>Monthly Rate of Return (r)</td><td>1.0%</td></tr><tr><td>Total Investment Period (n)</td><td>120 Months</td></tr><tr><td>Target Corpus</td><td>‚Çπ5,12,44,329</td></tr><tr><td><b>Required Monthly SIP</b></td><td><b>‚Çπ2,22,763</b></td></tr></tbody></table></section>
    <section id='asset-allocation'><h2>üìä Asset Allocation Plan</h2><p>The investment is split between Equity and Debt asset classes to balance growth potential with risk management, aligning with a 'high' risk profile.</p><table><thead><tr><th>Asset Class</th><th>Allocation</th><th>Recommended Fund Categories</th></tr></thead><tbody><tr><td><b>Equity</b></td><td><b>70%</b></td><td><ul><li>Large Cap Funds</li><li>Mid Cap Funds</li></ul></td></tr><tr><td><b>Debt</b></td><td><b>30%</b></td><td><ul><li>Corporate Bond Funds</li><li>Short Duration Funds</li></ul></td></tr></tbody></table></section>
    <section id='allocation-notes'><h2>üìú Allocation Strategy Notes</h2><p>The 'High' risk allocation was selected from a spectrum of potential strategies. This approach prioritizes long-term growth and is suitable for investors with a 10+ year horizon who are comfortable with market volatility.</p><ul><li><i>Very Low:</i> Extremely conservative, e.g., 90% debt / 10% equity</li><li><i>Low:</i> Conservative, e.g., 70% debt / 30% equity</li><li><i>Low-Moderate:</i> Tilted conservative, e.g., 60% debt / 40% equity</li><li><i>Moderate:</i> Balanced mix, e.g., 50% equity / 50% debt</li><li><i>High-Moderate:</i> Tilted aggressive, e.g., 60% equity / 40% debt</li><li><b style='color: #3B82F6;'>High: Aggressive, e.g., 70% equity / 30% debt (Selected Policy)</b></li><li><i>Very High:</i> Extremely aggressive, e.g., 90% equity / 10% debt</li></ul></section>
    <section id='key-recommendations'><h2>üîë Key Recommendations</h2><p>The strategic analysis yields the following core recommendations for moving forward.</p><ul><li><b>Validate Strategy:</b> The proposed 70/30 Equity/Debt asset allocation and the selection of Large Cap, Mid Cap, Corporate Bond, and Short Duration fund categories are strategically sound for the user's retirement goal and high-risk profile.</li><li><b>Resolve Data Failure:</b> It is critical to resolve the upstream data retrieval failure to proceed with the investment plan. The strategy is not actionable without a vetted shortlist of specific funds.</li><li><b>Diversify Fund Houses:</b> Once fund selection is possible, ensure diversification not only across these categories but also across different fund houses (AMCs) to mitigate fund manager risk.</li></ul></section>
    <section id='risk-factors'><h2>üìâ Risk Factors and Uncertainties</h2><p>While this plan is mathematically sound, all investments carry inherent risks that must be understood before committing capital. The primary risk is <b>Market Risk</b>; with a 70% allocation to equities, the portfolio's value will exhibit significant volatility and is susceptible to market downturns, especially in the short to medium term. There is a tangible possibility of capital erosion during periods of market stress. Another key consideration is <b>Inflation Risk</b>. The plan assumes a 5.5% annual inflation rate, but if actual inflation exceeds this projection, the real rate of return will diminish, and the final corpus may possess less purchasing power than intended. Furthermore, this plan faces significant <b>Execution Risk</b>. The success of this strategy is entirely dependent on the selection of high-performing, well-managed mutual funds within the specified categories. The current data failure highlights this dependency; poor fund selection will unequivocally lead to underperformance and failure to meet the goal. Investors should also be aware of <b>Interest Rate Risk</b>, where changes in monetary policy could adversely affect the returns of the 30% debt allocation. Finally, the plan is a blueprint. Regular reviews (at least annually) are essential to rebalance the portfolio and ensure it remains aligned with the investor's goals and changing market conditions.</p></section>

    <!-- v15 FIXED CHART LAYOUT - VERTICAL STACK -->
    <section id="sip-charts">
      <h2>üìä SIP Projection & Allocation Charts</h2>
      <div style="display: block; max-width: 1000px; margin: 0 auto;">
        <!-- Asset Allocation FIRST (TOP) -->
        <div class="chart-container" style="margin-bottom: 30px; text-align: center; border: 1px solid #e5e7eb; padding: 20px; border-radius: 8px;">
          <h3 style="margin-bottom: 15px;">Asset Allocation</h3>
          <div style="max-width: 500px; margin: 0 auto;">
            <canvas id="sipAllocationChart" width="400" height="300" style="max-width: 100%; height: auto;"></canvas>
          </div>
        </div>
        
        <!-- SIP Growth Projection SECOND (BOTTOM) -->
        <div class="chart-container" style="margin-bottom: 30px; text-align: center; border: 1px solid #e5e7eb; padding: 20px; border-radius: 8px;">
          <h3 style="margin-bottom: 15px;">SIP Growth Projection</h3>
          <div style="max-width: 800px; margin: 0 auto;">
            <canvas id="sipProjectionChart" width="600" height="400" style="max-width: 100%; height: auto;"></canvas>
          </div>
        </div>
      </div>
    </section>

    <section id="monthly-projection"><h2>üìà Monthly Projection (First 12 Months)</h2><table><thead><tr><th>Month</th><th>Cumulative Contribution</th><th>Projected Corpus</th></tr></thead><tbody><tr><td>M1</td><td>‚Çπ2,22,763.48</td><td>‚Çπ2,22,763.48</td></tr><tr><td>M2</td><td>‚Çπ4,45,526.96</td><td>‚Çπ4,47,251.11</td></tr><tr><td>M3</td><td>‚Çπ6,68,290.44</td><td>‚Çπ6,73,937.10</td></tr><tr><td>M4</td><td>‚Çπ8,91,053.92</td><td>‚Çπ9,02,840.95</td></tr><tr><td>M5</td><td>‚Çπ11,13,817.40</td><td>‚Çπ11,34,002.84</td></tr><tr><td>M6</td><td>‚Çπ13,36,580.88</td><td>‚Çπ13,67,466.35</td></tr><tr><td>M7</td><td>‚Çπ15,59,344.36</td><td>‚Çπ16,03,274.49</td></tr><tr><td>M8</td><td>‚Çπ17,82,107.84</td><td>‚Çπ18,41,470.71</td></tr><tr><td>M9</td><td>‚Çπ20,04,871.32</td><td>‚Çπ20,82,101.90</td></tr><tr><td>M10</td><td>‚Çπ22,27,634.80</td><td>‚Çπ23,25,216.40</td></tr><tr><td>M11</td><td>‚Çπ24,50,398.28</td><td>‚Çπ25,70,862.04</td></tr><tr><td>M12</td><td>‚Çπ26,73,161.76</td><td>‚Çπ28,19,084.14</td></tr></tbody></table><p><em>Note: Complete projection timeline (all 120 months) is visualized in the chart above.</em></p></section>

  </div>

  <!-- v15 SCRIPTING SECTION -->
  <script id="chart-data" type="application/json">{"projection":{"labels":["M1","M2","M3","M4","M5","M6","M7","M8","M9","M10","M11","M12","M13","M14","M15","M16","M17","M18","M19","M20","M21","M22","M23","M24","M25","M26","M27","M28","M29","M30","M31","M32","M33","M34","M35","M36","M37","M38","M39","M40","M41","M42","M43","M44","M45","M46","M47","M48","M49","M50","M51","M52","M53","M54","M55","M56","M57","M58","M59","M60","M61","M62","M63","M64","M65","M66","M67","M68","M69","M70","M71","M72","M73","M74","M75","M76","M77","M78","M79","M80","M81","M82","M83","M84","M85","M86","M87","M88","M89","M90","M91","M92","M93","M94","M95","M96","M97","M98","M99","M100","M101","M102","M103","M104","M105","M106","M107","M108","M109","M110","M111","M112","M113","M114","M115","M116","M117","M118","M119","M120"],"datasets":{"cumulative_contribution":[222763.48,445526.96,668290.44,891053.92,1113817.4,1336580.88,1559344.36,1782107.84,2004871.32,2227634.8,2450398.28,2673161.76,2918688.72,3164215.68,3409742.64,3655269.6,3900796.56,4146323.52,4391850.48,4637377.44,4882904.4,5128431.36,5373958.32,5619485.28,5865012.24,6110539.2,6356066.16,6601593.12,6847120.08,7092647.04,7338173,7583700.96,7829227.92,8074754.88,8320281.84,8565808.8,8811335.76,9056862.72,9302389.68,9547916.64,9793443.6,10038970.56,10284497.52,10530024.48,10775551.44,11021078.4,11266605.36,11512132.32,11757659.28,12003186.24,12248713.2,12494240.16,12739767.12,12985294.08,13230821.04,13476348,13721874.96,13967401.92,14212928.88,14458455.84,14703982.8,14949509.76,15195036.72,15440563.68,15686090.64,15931617.6,16177144.56,16422671.52,16668198.48,16913725.44,17159252.4,17404779.36,17650306.32,17895833.28,18141360.24,18386887.2,18632414.16,18877941.12,19123468.08,19368995.04,19614522,19860048.96,20105575.92,20351102.88,20596629.84,20842156.8,21087683.76,21333210.72,21578737.68,21824264.64,22069791.6,22315318.56,22560845.52,22806372.48,23051899.44,23297426.4,23542953.36,23788480.32,24034007.28,24279534.24,24525061.2,24770588.16,25016115.12,25261642.08,25507169.04,25752696,25998222.96,26243749.92,26489276.88,26734803.84,26980330.8,27225857.76,27471384.72,27716911.68,27962438.64,28207965.6,28453492.56,28699019.52,28944546.48,29190073.44],"projected_corpus":[222763.48,447251.11,673937.1,902840.95,1134002.84,1367466.35,1603274.49,1841470.71,2082101.9,2325216.4,2570862.04,2819084.14,3069928.46,3323441.22,3579669.81,3838661.99,4100466.09,4365130.23,4632704.01,4903237.53,5176781.39,5453386.78,5733104.13,6016045.65,6302269.59,6591829.77,6884780.05,7181174.33,7481066.55,7784510.69,8091561.78,8402275.88,8716709.62,9034918.19,9356958.85,9682887.92,10012760.28,10346631.36,10684555.15,11026586.18,11372781.52,11723196.82,12077888.27,12436910.63,12800319.42,13168171.09,13540524.28,13917433,14298950.81,14685133.8,15076038.62,15471722.49,15872243.19,16277659.1,16688029.17,17103410.94,17523862.63,17949444.74,18380216.77,18816238.22,19257564.08,19704257.2,20156377.25,20613982.5,21077135.81,21545899.65,22020337.13,22500511.98,22986487.58,23478325.94,23976092.68,24479857.09,24989689.14,25505659.51,26027839.58,26556298.66,27091107.03,27632335.08,28180053.21,28734333.12,29295247.93,29862871.89,30437277.09,31018536.34,31606725.18,32201915.91,32804181.55,33413596.85,34030236.4,34654172.24,35285477.84,35924226.1,36570491.84,37224348.44,37885869.4,38555131.57,39232211.37,39917185.96,40610134.3,41311136.12,42020272.96,42737622.17,43463261.87,44197274.97,44939745.3,45690756.23,46450392.27,47218738.67,47995880.54,48781907.83,49576910.39,50380978.97,51194202.24,52016670.74,52848473.93,53689703.15,54540450.66,55400810.65,56270872.24,57152444.44]}},"allocation":{"labels":["Equity","Debt"],"data":[70,30]}}}</script>

  <script>
  function initCharts() {
    if (typeof Chart === 'undefined') {
      console.error('Chart.js not loaded');
      return;
    }
    
    let data;
    try {
      const script = document.getElementById('chart-data');
      data = script ? JSON.parse(script.textContent) : null;
    } catch (e) {
      console.warn('Chart data parse failed');
      data = null;
    }
    
    // Fallback data if parsing fails or data is missing
    if (!data) {
      console.warn('Using fallback chart data.');
      data = {
        projection: {
          labels: ["M1","M12","M24","M36","M48","M60","M72","M84","M96","M108","M120"],
          datasets: {
            cumulative_contribution: [222763, 2673161, 5619485, 8565808, 11512132, 14458455, 17404779, 20351102, 23297426, 26243749, 29190073],
            projected_corpus: [222763, 2819084, 6016045, 9682887, 13917433, 18816238, 24479857, 31018536, 38555131, 47218738, 57152444]
          }
        },
        allocation: { labels: ["Equity", "Debt"], data: [70, 30] }
      };
    }
    
    // Create allocation chart FIRST (TOP POSITION)
    const allocCtx = document.getElementById('sipAllocationChart');
    if (allocCtx) {
      new Chart(allocCtx, {
        type: 'doughnut',
        data: {
          labels: data.allocation.labels,
          datasets: [{ 
            data: data.allocation.data, 
            backgroundColor: ['#3B82F6', '#10B981'],
            borderWidth: 2 
          }]
        },
        options: { 
          responsive: true,
          maintainAspectRatio: true,
          aspectRatio: 1.33,
          plugins: {
            legend: { 
              position: 'bottom',
              labels: { padding: 15 }
            }
          }
        }
      });
    }
    
    // Create projection chart SECOND (BOTTOM POSITION)
    const projCtx = document.getElementById('sipProjectionChart');
    if (projCtx) {
      new Chart(projCtx, {
        type: 'line',
        data: {
          labels: data.projection.labels,
          datasets: [{
            label: 'Projected Corpus',
            data: data.projection.datasets.projected_corpus,
            borderColor: '#3B82F6',
            backgroundColor: 'rgba(59, 130, 246, 0.1)',
            fill: true,
            tension: 0.4,
            pointRadius: 1,
            pointHoverRadius: 4
          }, {
            label: 'Cumulative Contribution', 
            data: data.projection.datasets.cumulative_contribution,
            borderColor: '#EF4444',
            backgroundColor: 'rgba(239, 68, 68, 0.1)',
            fill: false,
            tension: 0.4,
            pointRadius: 1,
            pointHoverRadius: 4
          }]
        },
        options: { 
          responsive: true,
          maintainAspectRatio: true,
          aspectRatio: 1.5,
          interaction: {
            mode: 'nearest',
            intersect: false
          },
          scales: {
            x: {
              title: { display: true, text: 'Time Period (Months)' },
              ticks: { maxTicksLimit: 12 }
            },
            y: {
              beginAtZero: true,
              title: { display: true, text: 'Amount (INR)' },
              ticks: {
                callback: function(value) {
                  if (value >= 10000000) return '‚Çπ' + (value/10000000).toFixed(2) + 'Cr';
                  return '‚Çπ' + (value/100000).toFixed(1) + 'L';
                }
              }
            }
          },
          plugins: {
            tooltip: {
              mode: 'index',
              intersect: false
            }
          }
        }
      });
    }
  }

  function downloadHTML() {
    const html = document.documentElement.outerHTML;
    const blob = new Blob([html], { type: 'text/html' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'comprehensive_sip_report.html';
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
  }

  // Initialize with enhanced delay for proper loading
  if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', function() { setTimeout(initCharts, 500); });
  } else {
      setTimeout(initCharts, 500);
  }
  </script>
</body>
</html>