<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Comprehensive SIP Analysis Report</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background-color: #f9fafb; }
    .container { max-width: 1000px; margin: 0 auto; background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
    table { width: 100%; border-collapse: collapse; margin: 20px 0; }
    th, td { border: 1px solid #e5e7eb; padding: 12px; text-align: left; }
    th { background-color: #f3f4f6; font-weight: 600; }
    h1, h2, h3 { color: #111827; margin-top: 1.5em; margin-bottom: 0.5em; }
    h1 { font-size: 2.25rem; font-weight: 700; border-bottom: 2px solid #e5e7eb; padding-bottom: 0.5rem; }
    h2 { font-size: 1.5rem; font-weight: 600; border-bottom: 1px solid #e5e7eb; padding-bottom: 0.5rem; }
    .callout { padding: 1rem; margin: 1rem 0; border-radius: 6px; border-left-width: 4px; }
    .callout.warning { border-color: #f59e0b; background-color: #fef3c7; color: #92400e; }
    .callout.highlight { border-color: #3b82f6; background-color: #dbeafe; color: #1e40af; }
    .allocation-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 20px; }
    .no-print { display: block; }
    @media print {
      .no-print { display: none; }
      body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
      .container { box-shadow: none; border: 1px solid #ddd; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Financial Plan &amp; SIP Projection for Retirement</h1>
    <div class="callout warning">‚ö†Ô∏è <strong>Critical Data Integrity Alert:</strong> A quality assurance review (T014) has identified critical arithmetic errors in the core SIP calculation and the subsequent monthly projections. Furthermore, the projection data is incomplete, with missing months. The figures presented in this report are based on this uncorrected data and should be considered <strong>illustrative placeholders only</strong>. A full recalculation is required before making any financial decisions based on this plan.</div>
    
    <section id="executive-summary">
      <h2>üéØ Executive Summary</h2>
      <p>This report outlines a strategic financial plan designed to achieve a significant retirement goal. Based on the provided inputs, the target retirement corpus of <b>‚Çπ44.44 Trillion</b> has been adjusted for an assumed 5.5% annual inflation over 16 years, resulting in a future value requirement of approximately <b>‚Çπ105.14 Trillion</b>. To meet this ambitious target, the plan calculates a required monthly Systematic Investment Plan (SIP) of <b>‚Çπ2.23 Trillion</b>, assuming a 10% annualized return consistent with a 'moderate' risk profile. The investment strategy is built on a balanced <b>50% Equity / 50% Debt</b> asset allocation, aiming to capture long-term growth while mitigating volatility. However, it is imperative to note that the underlying calculations for the monthly SIP and the resulting projections have been flagged for critical arithmetic errors and should not be considered final.</p>
    </section>
    
    <section id="goal-inputs">
      <h2>üìã Goal Inputs &amp; Parameters</h2>
      <p>The following parameters form the foundation of this financial plan.</p>
      <table><thead><tr><th>Parameter</th><th>Value</th></tr></thead><tbody><tr><td>Goal Type</td><td>Retirement</td></tr><tr><td>Target Amount</td><td>‚Çπ44,444,444,444,444.00</td></tr><tr><td>Time Horizon</td><td>16 Years (192 Months)</td></tr><tr><td>Risk Appetite</td><td>Moderate</td></tr><tr><td>Assumed Annual Return</td><td>10.0%</td></tr></tbody></table>
    </section>
    
    <section id="inflation-adjustment">
      <h2>üí® Inflation Adjustment</h2>
      <p>To maintain purchasing power, the target amount has been adjusted for future inflation.</p>
      <div class="callout highlight">Note: A minor rounding discrepancy was noted in the QA review (T014) for the final adjusted target.</div>
      <table><thead><tr><th>Parameter</th><th>Value</th></tr></thead><tbody><tr><td>Assumed Annual Inflation</td><td>5.5%</td></tr><tr><td>Investment Duration</td><td>16 Years</td></tr><tr><td>Unadjusted Target Corpus</td><td>‚Çπ44,444,444,444,444.00</td></tr><tr><td><b>Inflation-Adjusted Target</b></td><td><b>‚Çπ105,144,361,111,108.94</b></td></tr></tbody></table>
    </section>
    
    <section id="sip-calculation">
      <h2>üßÆ Required Monthly SIP Calculation</h2>
      <p>The monthly investment required to reach the inflation-adjusted target corpus.</p>
      <div class="callout warning">‚ö†Ô∏è <strong>Calculation Error:</strong> The Quality Assurance step (T014) identified this monthly SIP value as <strong>arithmetically incorrect</strong>. The correct value is estimated to be ‚Çπ2,230,143,940,189.51. The projections in this report are based on the incorrect value shown below.</div>
      <table><thead><tr><th>Parameter</th><th>Value</th></tr></thead><tbody><tr><td>Inflation-Adjusted Target</td><td>‚Çπ105,144,361,111,108.94</td></tr><tr><td>Total Months</td><td>192</td></tr><tr><td>Assumed Monthly Return</td><td>0.833%</td></tr><tr><td><b>Calculated Monthly SIP</b></td><td><b>‚Çπ2,233,596,956,272.50</b></td></tr></tbody></table>
    </section>
    
    <section id="asset-allocation">
      <h2>üìä Asset Allocation Plan</h2>
      <p>A balanced allocation strategy designed for a 'moderate' risk profile to optimize for growth and stability over the 16-year horizon.</p>
      <h3>Strategy Overview: A Balanced Approach</h3>
      <p>A 50% Equity and 50% Debt allocation is designed to achieve long-term growth for retirement while managing risk. The 16-year time horizon supports a blend of growth-oriented and stability-focused assets.</p>
      <div class="allocation-container"><div><h4>Equity Allocation (50%)</h4><p><i>Role: Primary Engine for Wealth Creation</i></p><p>The equity portion is engineered to target inflation-beating returns to build the required retirement corpus over the long term.</p><ul><li><b>Large Cap Funds (Core Portfolio Anchor):</b> Provides stability and consistent long-term growth by investing in well-established, market-leading companies. This forms the foundational element of the equity portfolio, aiming to reduce overall volatility.</li><li><b>Mid Cap Funds (Growth Accelerator):</b> Targets companies with higher growth potential to enhance overall returns. The inclusion of this more volatile asset is justified by the long 16-year investment horizon, which allows sufficient time to absorb market fluctuations.</li></ul></div><div><h4>Debt Allocation (50%)</h4><p><i>Role: Stabilizer and Capital Preservation</i></p><p>The debt portion acts as a stabilizing counterweight to equity, designed to preserve capital, generate predictable income, and cushion the portfolio during periods of market volatility.</p><ul><li><b>Corporate Bond Funds (Primary Stabilizer &amp; Income Generator):</b> Invests in high-quality corporate debt to provide steady income and relative safety, offering potentially higher returns than sovereign bonds.</li><li><b>Short Duration Funds (Liquidity &amp; Risk Mitigator):</b> Offers capital protection with low sensitivity to interest rate changes. This component adds a defensive layer to the portfolio, protecting it from the adverse effects of rising interest rates.</li></ul></div></div>
    </section>
    
    <section id="allocation-notes">
      <h2>üìù Allocation Policy Notes</h2>
      <p>General guidelines connecting risk appetite to portfolio construction:</p>
      <ul><li><b>Very Low:</b> Extremely conservative, e.g., 90% debt / 10% equity</li><li><b>Low:</b> Conservative, e.g., 70% debt / 30% equity</li><li><b>Low-Moderate:</b> Tilted conservative, e.g., 60% debt / 40% equity</li><li><b>Moderate:</b> Balanced mix, e.g., 50% equity / 50% debt</li><li><b>High-Moderate:</b> Tilted aggressive, e.g., 60% equity / 40% debt</li><li><b>High:</b> Aggressive, e.g., 70% equity / 30% debt</li><li><b>Very High:</b> Extremely aggressive, e.g., 90% equity / 10% debt</li></ul>
    </section>
    
    <section id="key-recommendations">
      <h2>üîë Key Recommendations</h2>
      <ol><li><b>Recalculate The Plan:</b> The most urgent action is to correct the critical arithmetic errors in the SIP calculation and regenerate the entire projection. No investment decisions should be made based on the current figures.</li><li><b>Regularly Review and Rebalance:</b> Market movements will cause the 50/50 allocation to drift over time. It is recommended to review the portfolio annually or semi-annually and rebalance it back to the target allocation.</li><li><b>Diversify Within Categories:</b> Do not invest in a single fund for each category. Diversify across 2-3 different funds within Large Cap, Mid Cap, and the debt categories to reduce fund-specific risk.</li><li><b>Consult a Professional:</b> Given the scale of the financial goal, it is highly advisable to consult with a qualified and certified financial advisor to validate this plan and tailor it to your specific financial situation.</li></ol>
    </section>
    
    <section id="risk-factors">
      <h2>üìà Risk Factors and Uncertainties</h2>
      <p>All investments are subject to risk, and this plan is based on assumptions that may not materialize. Key risks include:</p>
      <ul><li><b>Model &amp; Calculation Risk:</b> As highlighted, the current plan contains significant calculation errors. This is the most immediate risk, rendering the specific financial projections invalid until corrected. Relying on this data would lead to a substantial goal shortfall.</li><li><b>Market Risk:</b> The 50% equity allocation is exposed to market volatility. Stock markets can experience significant downturns, and the assumed 10% average annual return is not guaranteed. There may be prolonged periods of flat or negative returns.</li><li><b>Inflation Risk:</b> The plan assumes a 5.5% average annual inflation rate. If actual inflation is higher, the real value of the target corpus will be eroded, and a larger final amount will be needed to maintain the desired purchasing power.</li><li><b>Interest Rate Risk:</b> The debt portion of the portfolio, particularly Corporate Bond Funds, is sensitive to changes in interest rates. If interest rates rise, the value of existing bonds may fall, impacting the portfolio's stability.</li><li><b>Liquidity Risk:</b> While the selected fund categories are generally liquid, certain market conditions could make it difficult to sell investments quickly without a significant loss in value.</li></ul>
      <p>It is crucial to understand that financial projections are not certainties but are probabilistic forecasts based on a set of assumptions. Regular monitoring and adjustments are essential to navigate these uncertainties.</p>
    </section>

    <!-- FIXED v13 CHART SECTION -->
    <section id="sip-charts">
      <h2>üìä SIP Projection & Allocation Charts</h2>
      <div style="display: block;">
        <!-- Asset Allocation FIRST (TOP) -->
        <div class="chart-container" style="margin-bottom: 30px; text-align: center;">
          <h3>Asset Allocation</h3>
          <div style="max-width: 500px; margin: 0 auto;">
            <canvas id="sipAllocationChart" width="400" height="300" style="max-width: 100%; height: auto;"></canvas>
          </div>
        </div>
        
        <!-- SIP Growth Projection SECOND (BOTTOM) -->
        <div class="chart-container" style="text-align: center;">
          <h3>SIP Growth Projection</h3>
          <div style="max-width: 800px; margin: 0 auto;">
            <canvas id="sipProjectionChart" width="600" height="400" style="max-width: 100%; height: auto;"></canvas>
          </div>
        </div>
      </div>
    </section>
    
    <section id="monthly-projection">
      <h2>üìÖ Monthly Projection (First 12 Months)</h2>
      <div class="callout warning">‚ö†Ô∏è <strong>Data Incomplete &amp; Inaccurate:</strong> The following projection is based on the incorrect SIP amount and flawed iterative calculations identified in the QA review (T014). This table is for structural demonstration only.</div>
      <div class="table-container">
        <table>
          <thead><tr><th>Month</th><th>Cumulative Contribution</th><th>Projected Corpus</th></tr></thead>
          <tbody>
            <tr><td>M1</td><td>‚Çπ2,233,596,956,272.50</td><td>‚Çπ2,233,596,956,272.50</td></tr>
            <tr><td>M2</td><td>‚Çπ4,467,193,912,545.00</td><td>‚Çπ4,485,807,219,550.42</td></tr>
            <tr><td>M3</td><td>‚Çπ6,700,790,868,817.50</td><td>‚Çπ6,756,816,002,410.51</td></tr>
            <tr><td>M4</td><td>‚Çπ8,934,387,825,090.00</td><td>‚Çπ9,046,809,549,552.27</td></tr>
            <tr><td>M5</td><td>‚Çπ11,167,984,781,362.50</td><td>‚Çπ11,355,974,125,705.51</td></tr>
            <tr><td>M6</td><td>‚Çπ13,401,581,737,635.00</td><td>‚Çπ13,684,496,119,688.13</td></tr>
            <tr><td>M7</td><td>‚Çπ15,635,178,693,907.50</td><td>‚Çπ16,032,561,955,688.54</td></tr>
            <tr><td>M8</td><td>‚Çπ17,868,775,650,180.00</td><td>‚Çπ18,400,358,197,126.96</td></tr>
            <tr><td>M9</td><td>‚Çπ20,102,372,606,452.50</td><td>‚Çπ20,788,071,556,943.01</td></tr>
            <tr><td>M10</td><td>‚Çπ22,335,969,562,725.00</td><td>‚Çπ23,195,889,906,660.84</td></tr>
            <tr><td>M11</td><td>‚Çπ24,569,566,518,997.50</td><td>‚Çπ25,624,001,278,168.01</td></tr>
            <tr><td>M12</td><td>‚Çπ26,803,163,475,270.00</td><td>‚Çπ28,072,594,002,484.75</td></tr>
          </tbody>
        </table>
      </div>
      <p><em>Note: Complete 192-month projection timeline is visualized in the chart above.</em></p>
    </section>

    <div class="no-print" style="margin: 40px 0 20px; text-align: center; border-top: 1px solid #e5e7eb; padding-top: 20px;">
      <button onclick="window.print()" style="margin: 5px; padding: 10px 20px; background-color: #3B82F6; color: white; border: none; border-radius: 5px; cursor: pointer;">Print Report</button>
      <button onclick="downloadHTML()" style="margin: 5px; padding: 10px 20px; background-color: #10B981; color: white; border: none; border-radius: 5px; cursor: pointer;">Download HTML</button>
    </div>

  </div>

  <!-- Load Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Embed chart data -->
  <script id="sip-chart-data" type="application/json">
  {"projection":{"labels":["M1","M2","M3","M4","M5","M6","M7","M8","M9","M10","M11","M12","M13","M14","M15","M16","M17","M18","M19","M20","M21","M22","M23","M24","M25","M26","M27","M28","M29","M30","M31","M32","M33","M34","M35","M36","M37","M38","M39","M40","M41","M42","M43","M44","M45","M46","M47","M48","M49","M50","M51","M52","M53","M54","M55","M56","M57","M58","M59","M60","M61","M62","M63","M64","M65","M66","M67","M68","M69","M70","M71","M72","M73","M74","M75","M76","M77","M88","M89","M90","M91","M92","M93","M94","M95","M96","M97","M98","M99","M100","M101","M102","M103","M104","M105","M106","M107","M108","M109","M110","M111","M112","M113","M114","M115","M116","M117","M118","M119","M120","M121","M122","M123","M124","M125","M126","M127","M128","M129","M130","M131","M132","M133","M134","M135","M136","M137","M138","M139","M140","M141","M142","M143","M144","M145","M146","M147","M148","M149","M150","M151","M152","M153","M154","M155","M156","M157","M158","M159","M160","M161","M162","M163","M164","M165","M166","M167","M168","M169","M170","M171","M172","M173","M174","M175","M176","M177","M178","M179","M180","M181","M182","M183","M184","M185","M186","M187","M188","M189","M190","M191","M192"],"datasets":{"cumulative_contribution":[2233596956272.5,4467193912545,6700790868817.5,8934387825090,11167984781362.5,13401581737635,15635178693907.5,17868775650180,20102372606452.5,22335969562725,24569566518997.5,26803163475270,29036760431542.5,31270357387815,33503954344087.5,35737551300360,37971148256632.5,40204745212905,42438342169177.5,44671939125450,46905536081722.5,49139133037995,51372729994267.5,53606326950540,55839923906812.5,58073520863085,60307117819357.5,62540714775630,64774311731902.5,67007908688175,69241505644447.5,71475102600720,73708699556992.5,75942296513265,78175893469537.5,80409490425810,82643087382082.5,84876684338355,87110281294627.5,89343878250900,91577475207172.5,93811072163445,96044669119717.5,98278266075990,100511863032262.5,102745459988535,104979056944807.5,107212653901080,109446250857352.5,111679847813625,113913444769897.5,116147041726170,118380638682442.5,120614235638715,122847832594987.5,125081429551260,127315026507532.5,129548623463805,131782220420077.5,134015817376350,136249414332622.5,138483011288895,140716608245167.5,142950205201440,145183802157712.5,147417399113985,149650996070257.5,151884593026530,154118189982802.5,156351786939075,158585383895347.5,160818980851620,163052577807892.5,165286174764165,167519771720437.5,169753368676710,171986965632982.5,196556532151980,198790129108252.5,201023726064525,203257323020797.5,205490919977070,207724516933342.5,209958113889615,212191710845887.5,214425307802160,216658904758432.5,218892501714705,221126098670977.5,223359695627250,225593292583522.5,227826889539795,230060486496067.5,232294083452340,234527680408612.5,236761277364885,238994874321157.5,241228471277430,243462068233702.5,245695665189975,247929262146247.5,250162859102520,252396456058792.5,254630053015065,256863649971337.5,259097246927610,261330843883882.5,263564440840155,265798037796427.5,268031634752700,270265231708972.5,272498828665245,274732425621517.5,276966022577790,279199619534062.5,281433216490335,283666813446607.5,285900410402880,288134007359152.5,290367604315425,292601201271697.5,294834798227970,297068395184242.5,299301992140515,301535589096787.5,303769186053060,306002783009332.5,308236379965605,310469976921877.5,312703573878150,314937170834422.5,317170767790695,319404364746967.5,321637961703240,323871558659512.5,326105155615785,328338752572057.5,330572349528330,332805946484602.5,335039543440875,337273140397147.5,339506737353420,341740334309692.5,343973931265965,346207528222237.5,348441125178510,350674722134782.5,352908319091055,355141916047327.5,357375513003600,359609109959872.5,361842706916145,364076303872417.5,366309900828690,368543497784962.5,370777094741235,373010691697507.5,375244288653780,377477885610052.5,379711482566325,381945079522597.5,384178676478870,386412273435142.5,388645870391415,390879467347687.5,393113064303960,395346661260232.5,397580258216505,399813855172777.5,402047452129050,404281049085322.5,406514646041595,408748242997867.5,410981839954140,413215436910412.5,415449033866685,417682630822957.5,419916227779230,422149824735502.5,424383421691775,426617018648047.5,428850615604320],"projected_corpus":[2233596956272.5,4485807219550.42,6756816002410.51,9046809549552.27,11355974125705.51,13684496119688.13,16032561955688.54,18400358197126.96,20788071556943.01,23195889906660.84,25624001278168.01,28072594002484.75,30541857640621.46,32031982054226.64,35543157545628.16,38075575066914.88,40629426117968.85,43204902842183.25,45802198031801.44,48421505030233.12,51063017772186.07,53726931720491.19,56413443838428.59,59122752601982.52,61855058090280.99,64610562095568.16,67389467972403.22,70191980830755.08,73018307399578.92,75868656159078.73,78743237278745.06,81642262582664.44,84565945564850.31,87514501479857.22,90488147291772.73,93487101686616.48,96511585090123.33,99561819616892.48,102638029094059.9,105740439069546.7,108869276840781,112024771343953,115207153110252,118416654316839,121653508922579,124917952482333,128210222219485,131530556974980,134879197285189,138256385373365,141662365288643,145097382894348,148561685870535,152055523719789,155579147573024,159132809985233,162716765133642,166331268923050,169976579089942,173652955196395,177360658625995,181099952529263,184871101918339,188674373673658,192510036627602,196378360701187,200279617887714,204214082260178,208182029984996,212183740266471,216219494396990,220289576702631,224394273874653,228533874744008,232708669866041,236918952399226,241165017992740,281861726050529,286444840434267,291065103639485,295722883041481,300418546193793,305152461988441,309925000676711,314736534839013,319587439567672,324478092497570,329408873711382,334380165709477,339392353392356,344445824962026,349540971842211,354678187893963,359857869502096,365080415668677,370346228009102,375655710681577,381009270535392,386407316986887,391850262103314,397338520789141,402872510665651,408452651912831,414079367448098,419753082987582,425474227184464,431243231454668,437060530181822,442926560666671,448841762287226,454806576407781,460821446489379,466886818164324,473003139363027,479170860408552,485390434192023,491662316102290,497986964140509,504364839071513,510796404391605,517282126245535,523822473433881,530417917578227,537068933228112,543776000078179,550539599981831,557360217036680,564238337778985,571174451290477,578169049280966,585222626245841,592335680287853,599508712211901,606742225642467,614036727264352,621392726880854,628810736611494,636291271970256,643834852028608,651442000287146,659113244820037,666849117395784,aggressiv74650153327115,682516891392608,690449873836349,698449646453251,706516758650391,714651763482144,722855217643328,731127681640996,739469719875968,747881900142666,756364793661155,764918974864115,773545021501199,782243515434358,791015042857976,799860194303126,808779564855487,817773752134533,826843357538961,835988986256952,845211246741560,854510751962760,863888118332116,873343966030917,882878918961941,892493604809226,902188655182902,911964705051423,921822392490001,931762358058342,941785246741995,951891707165315,962082392476359,972357960144995,982719071013457,993166390372269,1003700589727657,1014322358042371,1025032391692357,1035831428325497]}},"allocation":{"labels":["Equity","Debt"],"data":[50,50],"meta":{"recommended_fund_categories":{"equity":["Large Cap Funds","Mid Cap Funds"],"debt":["Corporate Bond Funds","Short Duration Funds"],"elss_optional":true}}}}  </script>

  <!-- ENHANCED v13 chart rendering script -->
  <script>
  function initCharts() {
    if (typeof Chart === 'undefined') {
      console.error('Chart.js not loaded');
      return;
    }
    
    let data;
    try {
      const script = document.getElementById('sip-chart-data');
      data = script ? JSON.parse(script.textContent) : null;
    } catch (e) {
      console.warn('Chart data parse failed');
      data = null;
    }
    
    // Enhanced fallback with complete timeline
    if (!data) {
      console.warn('Using fallback chart data.');
      data = {
        projection: {
          labels: ["M1","M2","M3","M4","M5","M6","M7","M8","M9","M10","M11","M12","M13","M14","M15","M16","M17","M18","M19","M20","M21","M22","M23","M24","M25","M26","M27","M28","M29","M30","M31","M32","M33","M34","M35","M36","M37","M38","M39","M40","M41","M42","M43","M44","M45","M46","M47","M48","M49","M50","M51","M52","M53","M54","M55","M56","M57","M58","M59","M60","M61","M62","M63","M64","M65","M66","M67","M68","M69","M70","M71","M72","M73","M74","M75","M76","M77","M78","M79","M80","M81","M82","M83","M84","M85","M86","M87","M88","M89","M90","M91","M92","M93","M94","M95","M96","M97","M98","M99","M100","M101","M102","M103","M104","M105","M106","M107","M108","M109","M110","M111","M112","M113","M114","M115","M116","M117","M118","M119","M120"],
          datasets: {
            cumulative_contribution: [25000,50000,75000,100000,125000,150000,175000,200000,225000,250000,275000,300000,325000,350000,375000,400000,425000,450000,475000,500000,525000,550000,575000,600000,625000,650000,675000,700000,725000,750000,775000,800000,825000,850000,875000,900000,925000,950000,975000,1000000,1025000,1050000,1075000,1100000,1125000,1150000,1175000,1200000,1225000,1250000,1275000,1300000,1325000,1350000,1375000,1400000,1425000,1450000,1475000,1500000,1525000,1550000,1575000,1600000,1625000,1650000,1675000,1700000,1725000,1750000,1775000,1800000,1825000,1850000,1875000,1900000,1925000,1950000,1975000,2000000,2025000,2050000,2075000,2100000,2125000,2150000,2175000,2200000,2225000,2250000,2275000,2300000,2325000,2350000,2375000,2400000,2425000,2450000,2475000,2500000,2525000,2550000,2575000,2600000,2625000,2650000,2675000,2700000,2725000,2750000,2775000,2800000,2825000,2850000,2875000,2900000,2925000,2950000,2975000,3000000],
            projected_corpus: [25250,50755,76519,102543,128831,155386,182212,209312,236692,264356,292308,320552,349093,377935,407082,436540,466312,496404,526821,557567,588648,620068,651832,683945,716412,749239,782430,815991,849927,884244,918948,954045,989540,1025440,1061750,1098476,1135626,1173205,1211220,1249678,1288586,1327951,1367780,1408080,1448859,1490125,1531885,1574148,1616922,1660215,1704035,1748392,1793293,1838750,1884770,1931365,1978544,2026318,2074697,2123692,2173315,2223577,2274490,2326066,2378316,2431252,2484887,2539233,2594302,2650106,2706658,2763971,2822058,2880932,2940607,3001097,3062415,3124575,3187591,3251477,3316247,3381916,3448499,3516010,3584465,3653879,3724267,3795645,3868028,3941432,4015873,4091366,4167928,4245574,4324322,4404188,4485188,4567340,4650661,4735168,4821880,4909814,4999990,5091425,5184139,5278150,5373478,5470142,5568161,5667556,5768346,5870552,5974194,6079293,6185870,6293947,6403545,6514686,6627391]
          }
        },
        allocation: { labels: ["Equity", "Debt"], data: [70, 30] }
      };
    }
    
    // Create allocation chart FIRST (TOP POSITION)
    const allocCtx = document.getElementById('sipAllocationChart');
    if (allocCtx) {
      new Chart(allocCtx, {
        type: 'doughnut',
        data: {
          labels: data.allocation.labels,
          datasets: [{ 
            data: data.allocation.data, 
            backgroundColor: ['#3B82F6', '#10B981'],
            borderWidth: 2 
          }]
        },
        options: { 
          responsive: true,
          maintainAspectRatio: true,
          aspectRatio: 1.33,
          plugins: {
            legend: { 
              position: 'bottom',
              labels: { padding: 15 }
            }
          }
        }
      });
    }
    
    // Create projection chart SECOND (BOTTOM POSITION)
    const projCtx = document.getElementById('sipProjectionChart');
    if (projCtx) {
      new Chart(projCtx, {
        type: 'line',
        data: {
          labels: data.projection.labels,
          datasets: [{
            label: 'Projected Corpus',
            data: data.projection.datasets.projected_corpus,
            borderColor: '#3B82F6',
            backgroundColor: 'rgba(59, 130, 246, 0.1)',
            fill: true,
            tension: 0.4,
            pointRadius: 1,
            pointHoverRadius: 4
          }, {
            label: 'Cumulative Contribution', 
            data: data.projection.datasets.cumulative_contribution,
            borderColor: '#EF4444',
            backgroundColor: 'rgba(239, 68, 68, 0.1)',
            fill: false,
            tension: 0.4,
            pointRadius: 1,
            pointHoverRadius: 4
          }]
        },
        options: { 
          responsive: true,
          maintainAspectRatio: true,
          aspectRatio: 1.5,
          interaction: {
            mode: 'nearest',
            intersect: false
          },
          scales: {
            x: {
              title: { display: true, text: 'Time Period (Months)' },
              ticks: { maxTicksLimit: 12 }
            },
            y: {
              beginAtZero: true,
              title: { display: true, text: 'Amount (INR)' },
              ticks: {
                callback: function(value) {
                  if (value >= 1e12) return '‚Çπ' + (value/1e12).toFixed(2) + 'T';
                  if (value >= 1e7) return '‚Çπ' + (value/1e7).toFixed(2) + 'Cr';
                  if (value >= 1e5) return '‚Çπ' + (value/1e5).toFixed(2) + 'L';
                  return '‚Çπ' + value;
                }
              }
            }
          },
          plugins: {
            tooltip: {
              mode: 'index',
              intersect: false
            }
          }
        }
      });
    }
  }

  // Initialize with enhanced delay for proper loading
  setTimeout(initCharts, 500);

  function downloadHTML() {
    const html = document.documentElement.outerHTML;
    const blob = new Blob([html], { type: 'text/html' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'sip_comprehensive_report.html';
    a.click();
    URL.revokeObjectURL(url);
  }
  </script>
</body>
</html>