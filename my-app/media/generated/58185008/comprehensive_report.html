<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Systematic Investment Plan (SIP) Analysis Report</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background-color: #f9fafb; }
    .container { max-width: 1000px; margin: 20px auto; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
    h1, h2, h3 { color: #1f2937; border-bottom: 2px solid #e5e7eb; padding-bottom: 8px; margin-top: 20px; }
    h1 { font-size: 2.25rem; }
    h2 { font-size: 1.75rem; }
    h3 { font-size: 1.25rem; border-bottom: none; }
    table { width: 100%; border-collapse: collapse; margin: 15px 0; }
    th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
    th { background-color: #f3f4f6; font-weight: bold; }
    p, li { line-height: 1.6; color: #374151; }
    .callout { padding: 15px; margin: 15px 0; border-left-width: 4px; border-radius: 4px; }
    .warning { border-color: #f59e0b; background-color: #fffbeb; }
    .no-print { display: block; }
    @media print {
      .no-print { display: none; }
      body { box-shadow: none; margin: 0; padding: 0; }
      .container { box-shadow: none; border-radius: 0; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üìä Systematic Investment Plan (SIP) Analysis for Retirement</h1>
    <section id="executive-summary">
      <h2>üéØ Executive Summary</h2>
      <p>This report outlines a strategic Systematic Investment Plan (SIP) designed to achieve a retirement corpus of <b>‚Çπ3,00,00,000</b> over a <b>10-year</b> investment horizon for an investor with a 'moderate' risk appetite. After adjusting for a projected annual inflation rate of 5.5%, the target corpus required at retirement is <b>‚Çπ5,12,44,333</b>. To reach this goal, a monthly SIP contribution of <b>‚Çπ2,49,868</b> is calculated, based on an expected annual return of 10%. The core of the strategy is a balanced asset allocation of <b>50% in Equity</b> (split between Large and Mid Cap funds) and <b>50% in Debt</b> (Corporate Bonds and Government Securities). This balanced approach aims to harness the growth potential of equities while leveraging the stability of debt to manage risk. This comprehensive analysis covers the strategic rationale, market sentiment, potential risks, and actionable recommendations to guide the investor towards a successful retirement outcome.</p>
    </section>
    <section id="goal-inputs">
      <h2>üìã Goal Inputs</h2>
      <p>The following parameters form the foundation of this investment plan, based on the user's financial goals and risk profile.</p>
      <table><thead><tr><th>Parameter</th><th>Value</th></tr></thead><tbody><tr><td>Goal Type</td><td>Retirement</td></tr><tr><td>Target Amount</td><td>‚Çπ3,00,00,000</td></tr><tr><td>Time Horizon</td><td>10 Years (120 Months)</td></tr><tr><td>Risk Appetite</td><td>Moderate</td></tr></tbody></table>
    </section>
    <section id="inflation-adjustment">
      <h2>üí® Inflation Adjustment</h2>
      <p>To preserve the future purchasing power of the target corpus, the goal amount has been adjusted for inflation.</p>
      <table><thead><tr><th>Parameter</th><th>Value</th></tr></thead><tbody><tr><td>Projected Annual Inflation</td><td>5.5%</td></tr><tr><td>Unadjusted Target (Today's Value)</td><td>‚Çπ3,00,00,000</td></tr><tr><td><b>Inflation-Adjusted Target (Future Value)</b></td><td><b>‚Çπ5,12,44,333.71</b></td></tr></tbody></table>
    </section>
    <section id="sip-calculation">
      <h2>üßÆ SIP Calculation</h2>
      <p>Based on the inflation-adjusted target and a moderate risk profile, the required monthly SIP is calculated as follows.</p>
      <table><thead><tr><th>Parameter</th><th>Value</th></tr></thead><tbody><tr><td>Expected Annual Return (Moderate Profile)</td><td>10.0%</td></tr><tr><td>Calculated Monthly Rate of Return (r)</td><td>0.8333%</td></tr><tr><td>Investment Duration in Months (n)</td><td>120</td></tr><tr><td><b>Required Monthly SIP</b></td><td><b>‚Çπ2,49,867.75</b></td></tr></tbody></table>
    </section>
    <section id="asset-allocation">
      <h2>üìä Asset Allocation Plan</h2>
      <p>A balanced asset allocation is recommended to align with the 'moderate' risk profile, optimizing for both growth and stability.</p>
      <table><thead><tr><th>Asset Class</th><th>Allocation %</th><th>Recommended Fund Categories</th></tr></thead><tbody><tr><td>Equity</td><td>50%</td><td>Large Cap Funds, Mid Cap Funds</td></tr><tr><td>Debt</td><td>50%</td><td>Corporate Bond Funds, Government Securities</td></tr></tbody></table>
    </section>

    <!-- =============================================================================== -->
    <!--  CHART SECTION - REPLACED WITH v11/v13 FIXED IMPLEMENTATION                     -->
    <!-- =============================================================================== -->
    <section id="sip-charts">
      <h2>üìä SIP Projection & Allocation Charts</h2>
      <div style="display: block;">
        <!-- Asset Allocation FIRST (TOP) -->
        <div class="chart-container" style="margin-bottom: 30px; text-align: center;">
          <h3>Asset Allocation</h3>
          <div style="max-width: 500px; margin: 0 auto;">
            <canvas id="sipAllocationChart" width="400" height="300" style="max-width: 100%; height: auto;"></canvas>
          </div>
        </div>
        
        <!-- SIP Growth Projection SECOND (BOTTOM) -->
        <div class="chart-container" style="text-align: center;">
          <h3>SIP Growth Projection</h3>
          <div style="max-width: 800px; margin: 0 auto;">
            <canvas id="sipProjectionChart" width="600" height="400" style="max-width: 100%; height: auto;"></canvas>
          </div>
        </div>
      </div>
    </section>

    <section id="sip-projection-long-horizon">
      <h2>üìà SIP Projection Summary (Key Milestones)</h2>
        <table><thead><tr><th>Milestone</th><th>Cumulative Contribution</th><th>Projected Corpus</th><th>% of Goal Achieved</th></tr></thead><tbody><tr><td>End of Year 1 (Month 12)</td><td>‚Çπ30,04,048</td><td>‚Çπ31,61,597</td><td>6.2%</td></tr><tr><td>End of Year 5 (Month 60)</td><td>‚Çπ1,50,20,242</td><td>‚Çπ1,97,97,691</td><td>38.6%</td></tr><tr><td>End of Year 10 (Month 120)</td><td>‚Çπ3,00,40,483</td><td>‚Çπ5,16,71,370</td><td>100.8%</td></tr></tbody></table>
    </section>

    <section id="key-recommendations">
      <h2>üîë Key Recommendations</h2>
      <ol>
        <li><b>Implement via SIP (High Priority):</b> Execute the entire investment strategy through monthly Systematic Investment Plans to benefit from rupee cost averaging and enforce disciplined investing.</li>
        <li><b>Diversify Funds (High Priority):</b> Invest in at least two different funds within each asset category (e.g., two Large Cap funds) to mitigate fund-specific and asset management company (AMC) related risks.</li>
        <li><b>Select Quality Funds (High Priority):</b> Prioritize funds with a consistent performance track record of over 5 years, experienced management teams, and expense ratios below their category average.</li>
        <li><b>Annual Review & Rebalancing (Medium Priority):</b> Conduct an annual portfolio review. Rebalance if any asset class deviates more than 5% from its target allocation (e.g., if equity grows to 55%) to maintain the intended 50/50 risk profile.</li>
        <li><b>Consider Tax Savings (Low Priority):</b> If the Section 80C tax deduction limit is not fully utilized, consider allocating a portion of the equity investment to Equity-Linked Savings Schemes (ELSS).</li>
      </ol>
    </section>

    <section id="risks-uncertainties">
      <h2>‚ö†Ô∏è Risk Factors and Uncertainties</h2>
      <p>Investing for retirement involves inherent risks, and it is crucial to understand the uncertainties that could impact the projected outcomes. The 10% expected return is an estimate, not a guarantee. Key risks to this investment plan include:</p>
      <ul>
        <li><b>Market Risk:</b> The 50% equity allocation is exposed to market volatility. A prolonged bear market or a significant economic recession could lead to a substantial decline in the portfolio's value. The positive outlook for mid-cap funds is based on historical data and current trends; a reversal of these trends or sector-specific headwinds could lead to underperformance. As retirement nears, a sharp market downturn could significantly impact the final corpus with limited time for recovery.</li>
        <li><b>Interest Rate Risk:</b> The debt portion of the portfolio is sensitive to changes in interest rates. The current 'cautious' sentiment in the corporate bond market reflects this risk. If the central bank raises interest rates to combat unexpected inflation, the Net Asset Value (NAV) of existing bond funds will decrease, particularly those with longer maturities. This could lead to negative or low returns from the debt allocation in the short to medium term.</li>
        <li><b>Inflation Risk:</b> The plan's calculations are based on a projected inflation rate of 5.5%. If actual long-term inflation is significantly higher, the real purchasing power of the final corpus of ‚Çπ5.12 crore will be eroded. This would mean that the accumulated wealth may not be sufficient to sustain the desired lifestyle in retirement, requiring a higher savings rate or a delayed retirement date.</li>
        <li><b>Credit Risk:</b> While government securities have negligible credit risk, corporate bond funds are exposed to the risk of default by the underlying companies. In a severe economic downturn, corporate defaults could rise, leading to a loss of principal within the corporate bond fund holdings and negatively impacting the overall portfolio's stability.</li>
      </ul>
    </section>

    <div class="no-print" style="margin: 40px 0; text-align: center;">
      <button onclick="window.print()" style="margin: 5px; padding: 12px 24px; background-color: #3B82F6; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 1rem;">Print Report</button>
      <button onclick="downloadHTML()" style="margin: 5px; padding: 12px 24px; background-color: #10B981; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 1rem;">Download HTML</button>
    </div>

  </div>

  <!-- Load Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Embed chart data -->
  <script id="sip-chart-data" type="application/json">
    {"projection":{"labels":["M1","M2","M3","M4","M5","M6","M7","M8","M9","M10","M11","M12","M13","M14","M15","M16","M17","M18","M19","M20","M21","M22","M23","M24","M25","M26","M27","M28","M29","M30","M31","M32","M33","M34","M35","M36","M37","M38","M39","M40","M41","M42","M43","M44","M45","M46","M47","M48","M49","M50","M51","M52","M53","M54","M55","M56","M57","M58","M59","M60","M61","M62","M63","M64","M65","M66","M67","M68","M69","M70","M71","M72","M73","M74","M75","M76","M77","M78","M79","M80","M81","M82","M83","M84","M85","M86","M87","M88","M89","M90","M91","M92","M93","M94","M95","M96","M97","M98","M99","M100","M101","M102","M103","M104","M105","M106","M107","M108","M109","M110","M111","M112","M113","M114","M115","M116","M117","M118","M119","M120"],"datasets":{"cumulative_contribution":[250337.36,500674.72,751012.08,1001349.44,1251686.8,1502024.16,1752361.52,2002698.88,2253036.24,2503373.6,2753710.96,3004048.32,3254385.68,3504723.04,3755060.4,4005397.76,4255735.12,4506072.48,4756409.84,5006747.2,5257084.56,5507421.92,5757759.28,6008096.64,6258434,6508771.36,6759108.72,7009446.08,7259783.44,7510120.8,7760458.16,8010795.52,8261132.88,8511470.24,8761807.6,9012144.96,9262482.32,9512819.68,9763157.04,10013494.4,10263831.76,10514169.12,10764506.48,11014843.84,11265181.2,11515518.56,11765855.92,12016193.28,12266530.64,12516868,12767205.36,13017542.72,13267880.08,13518217.44,13768554.8,14018892.16,14269229.52,14519566.88,14769904.24,15020241.6,15270578.96,15520916.32,15771253.68,16021591.04,16271928.4,16522265.76,16772603.12,17022940.48,17273277.84,17523615.2,17773952.56,18024289.92,18274627.28,18524964.64,18775302,19025639.36,19275976.72,19526314.08,19776651.44,20026988.8,20277326.16,20527663.52,20778000.88,21028338.24,21278675.6,21529012.96,21779350.32,22029687.68,22280025.04,22530362.4,22780699.76,23031037.12,23281374.48,23531711.84,23782049.2,24032386.56,24282723.92,24533061.28,24783398.64,25033736,25284073.36,25534410.72,25784748.08,26035085.44,26285422.8,26535760.16,26786097.52,27036434.88,27286772.24,27537109.6,27787446.96,28037784.32,28288121.68,28538459.04,28788796.4,29039133.76,29289471.12,29539808.48,29790145.84,30040483.2],"projected_corpus":[252840.73,505681.49,760805.96,1018356.38,1278202.31,1540325.9,1804766.52,2071551.55,2340604.42,2611947.83,2885604.67,3161597.08,3439950.41,3720692.28,4003846.57,4289442.39,4577503.47,4868051.84,5161115.72,5456729.24,5754963.9,6055850.89,6359446.76,6665778.59,6974873.74,7286759.84,7601464.8,7918996.81,8239386.14,8562696.97,8888961.3,9218213.27,9550462.76,9885704.75,10223949.16,10565225.91,10909560.53,11257009.5,11607616.95,11961426.48,12318478.11,12678899.25,13042730.6,13409995.27,13780732.58,14154977.27,14532764.4,14914132.4,15299141.08,15687870.05,16080386.11,16476727.33,16876994.56,17281294.87,17689745.18,18102465.99,18519581.01,18941127.18,19367141.81,19797690.59,20232867.86,20672733.9,21117348.6,21566795.44,22021129.75,22480478.41,22944915.55,23414501.07,23889313.44,24370443.94,24857985.74,25352038.96,25852796.71,26359362.03,26871892.01,27390548.3,27915486.15,28446878.37,28984884.52,29530668.73,30084312.77,30645993.25,31215810.55,31793806.02,32380081.44,32974718.61,33577802.15,34189417.53,34810649.07,35441592.92,36082346.21,36733108.65,37394003.37,37395154.52,38266685.24,38978720.68,39701368.02,40434753.47,41179003.25,41934243.59,42700601.72,43478205.88,44267184.34,45067666.38,45879782.28,46703662.33,47539437.82,48387240.06,49247200.36,50119450.06,51004120.5,51901343.01,52811248.95,53734070.65,54669940.46,55619591.73,56582858.82,57560376.08,58552278.84,59558702.43,60579782.21,61615653.48,62666452.61,63732316.95,64813384.85,65909795.66,67021689.76,68149208.54,69292494.38,70451690.68,71626941.84,72818392.27,74026187.41,75250472.7,76491394.59,77749100.53,79023739.01,80315459.52,81624412.6,82950749.78,84294623.62,85656188.7,87035601.62,88433021.0,89848606.49,91282519.74,92734924.43,94206086.27,95696272.0,97205750.38,98734792.19,100283669.26,101852655.45,103442026.66,105052061.8,106683042.82,108335254.7,110008984.48,111704522.23,113422160.08,115162192.17,116924914.69,118710626.88,120519631.01,122351231.38]}},"allocation":{"labels":["Equity","Debt"],"data":[50,50],"meta":{"recommended_fund_categories":{"equity":["Large Cap Funds","Mid Cap Funds"],"debt":["Corporate Bond Funds","Government Securities"],"elss_optional":true}}}}
  </script>

  <!-- ENHANCED chart rendering with proper layout and sizing -->
  <script>
  function initCharts() {
    if (typeof Chart === 'undefined') {
      console.error('Chart.js not loaded');
      return;
    }
    
    let data;
    try {
      const script = document.getElementById('sip-chart-data');
      data = script ? JSON.parse(script.textContent) : null;
    } catch (e) {
      console.warn('Chart data parse failed');
      data = null;
    }
    
    // Enhanced fallback with complete timeline
    if (!data) {
      data = {
        projection: {
          labels: ["M1","M2","M3","M4","M5","M6","M7","M8","M9","M10","M11","M12","M13","M14","M15","M16","M17","M18","M19","M20","M21","M22","M23","M24","M25","M26","M27","M28","M29","M30","M31","M32","M33","M34","M35","M36","M37","M38","M39","M40","M41","M42","M43","M44","M45","M46","M47","M48","M49","M50","M51","M52","M53","M54","M55","M56","M57","M58","M59","M60","M61","M62","M63","M64","M65","M66","M67","M68","M69","M70","M71","M72","M73","M74","M75","M76","M77","M78","M79","M80","M81","M82","M83","M84","M85","M86","M87","M88","M89","M90","M91","M92","M93","M94","M95","M96","M97","M98","M99","M100","M101","M102","M103","M104","M105","M106","M107","M108","M109","M110","M111","M112","M113","M114","M115","M116","M117","M118","M119","M120"],
          datasets: {
            cumulative_contribution: [25000,50000,75000,100000,125000,150000,175000,200000,225000,250000,275000,300000,325000,350000,375000,400000,425000,450000,475000,500000,525000,550000,575000,600000,625000,650000,675000,700000,725000,750000,775000,800000,825000,850000,875000,900000,925000,950000,975000,1000000,1025000,1050000,1075000,1100000,1125000,1150000,1175000,1200000,1225000,1250000,1275000,1300000,1325000,1350000,1375000,1400000,1425000,1450000,1475000,1500000,1525000,1550000,1575000,1600000,1625000,1650000,1675000,1700000,1725000,1750000,1775000,1800000,1825000,1850000,1875000,1900000,1925000,1950000,1975000,2000000,2025000,2050000,2075000,2100000,2125000,2150000,2175000,2200000,2225000,2250000,2275000,2300000,2325000,2350000,2375000,2400000,2425000,2450000,2475000,2500000,2525000,2550000,2575000,2600000,2625000,2650000,2675000,2700000,2725000,2750000,2775000,2800000,2825000,2850000,2875000,2900000,2925000,2950000,2975000,3000000],
            projected_corpus: [25250,50755,76519,102543,128831,155386,182212,209312,236692,264356,292308,320552,349093,377935,407082,436540,466312,496404,526821,557567,588648,620068,651832,683945,716412,749239,782430,815991,849927,884244,918948,954045,989540,1025440,1061750,1098476,1135626,1173205,1211220,1249678,1288586,1327951,1367780,1408080,1448859,1490125,1531885,1574148,1616922,1660215,1704035,1748392,1793293,1838750,1884770,1931365,1978544,2026318,2074697,2123692,2173315,2223577,2274490,2326066,2378316,2431252,2484887,2539233,2594302,2650106,2706658,2763971,2822058,2880932,2940607,3001097,3062415,3124575,3187591,3251477,3316247,3381916,3448499,3516010,3584465,3653879,3724267,3795645,3868028,3941432,4015873,4091366,4167928,4245574,4324322,4404188,4485188,4567340,4650661,4735168,4821880,4909814,4999990,5091425,5184139,5278150,5373478,5470142,5568161,5667556,5768346,5870552,5974194,6079293,6185870,6293947,6403545,6514686,6627391]
          }
        },
        allocation: { labels: ["Equity", "Debt"], data: [70, 30] }
      };
    }
    
    // Create allocation chart FIRST (TOP POSITION)
    const allocCtx = document.getElementById('sipAllocationChart');
    if (allocCtx) {
      new Chart(allocCtx, {
        type: 'doughnut',
        data: {
          labels: data.allocation.labels,
          datasets: [{ 
            data: data.allocation.data, 
            backgroundColor: ['#3B82F6', '#10B981'],
            borderWidth: 2 
          }]
        },
        options: { 
          responsive: true,
          maintainAspectRatio: true,
          aspectRatio: 1.33,
          plugins: {
            legend: { 
              position: 'bottom',
              labels: { padding: 15 }
            }
          }
        }
      });
    }
    
    // Create projection chart SECOND (BOTTOM POSITION)
    const projCtx = document.getElementById('sipProjectionChart');
    if (projCtx) {
      new Chart(projCtx, {
        type: 'line',
        data: {
          labels: data.projection.labels,
          datasets: [{
            label: 'Projected Corpus',
            data: data.projection.datasets.projected_corpus,
            borderColor: '#3B82F6',
            backgroundColor: 'rgba(59, 130, 246, 0.1)',
            fill: true,
            tension: 0.4,
            pointRadius: 1,
            pointHoverRadius: 4
          }, {
            label: 'Cumulative Contribution', 
            data: data.projection.datasets.cumulative_contribution,
            borderColor: '#EF4444',
            backgroundColor: 'rgba(239, 68, 68, 0.1)',
            fill: false,
            tension: 0.4,
            pointRadius: 1,
            pointHoverRadius: 4
          }]
        },
        options: { 
          responsive: true,
          maintainAspectRatio: true,
          aspectRatio: 1.5,
          interaction: {
            mode: 'nearest',
            intersect: false
          },
          scales: {
            x: {
              title: { display: true, text: 'Time Period (Months)' },
              ticks: { maxTicksLimit: 10 }
            },
            y: {
              beginAtZero: true,
              title: { display: true, text: 'Amount (INR)' },
              ticks: {
                callback: function(value) {
                  if (value >= 10000000) return '‚Çπ' + (value/10000000).toFixed(1) + 'Cr';
                  return '‚Çπ' + (value/100000).toFixed(1) + 'L';
                }
              }
            }
          },
          plugins: {
            tooltip: {
              mode: 'index',
              intersect: false
            }
          }
        }
      });
    }
  }

  function downloadHTML() {
    const html = document.documentElement.outerHTML;
    const blob = new Blob([html], { type: 'text/html' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'sip_report.html';
    a.click();
    URL.revokeObjectURL(url);
  }

  // Initialize with enhanced delay for proper loading
  setTimeout(initCharts, 500);
  </script>

</body>
</html>