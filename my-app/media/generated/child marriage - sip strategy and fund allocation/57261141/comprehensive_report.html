<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SIP Financial Analysis Report for Child Marriage</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"; margin: 0; padding: 20px; background-color: #f9fafb; color: #1f2937; }
    .container { max-width: 1000px; margin: 0 auto; background-color: #ffffff; padding: 2rem; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
    h1, h2, h3 { color: #111827; margin-top: 1.5em; margin-bottom: 0.5em; }
    h1 { font-size: 1.875rem; border-bottom: 2px solid #e5e7eb; padding-bottom: 0.5rem; }
    h2 { font-size: 1.5rem; border-bottom: 1px solid #e5e7eb; padding-bottom: 0.25rem; }
    table { width: 100%; border-collapse: collapse; margin: 15px 0; }
    th, td { border: 1px solid #ddd; padding: 12px; text-align: left; vertical-align: top; }
    th { background-color: #f9fafb; font-weight: 600; }
    .callout { padding: 15px; border-left-width: 4px; border-radius: 4px; margin: 20px 0; }
    .callout.warning { background-color: #fffbe6; border-color: #f59e0b; }
    .callout.warning b { color: #b45309; }
    .chart-container { margin: 20px 0; padding: 15px; border: 1px solid #e5e7eb; border-radius: 8px; }
    .no-print { display: block; }
    button { background-color: #3B82F6; color: white; border: none; border-radius: 4px; cursor: pointer; font-weight: 600; }
    button:hover { background-color: #2563EB; }
    @media print {
      .no-print { display: none; }
      body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
      .container { box-shadow: none; border: 1px solid #ddd; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1><span style="font-size: 2rem;">üìä</span> Systematic Investment Plan (SIP) Financial Analysis</h1>
    
    <div class="callout warning">
      <p><strong>Important Validation Finding:</strong> A comprehensive review of the financial calculations revealed a <strong>critical inconsistency</strong>. The recommended monthly SIP of <strong>‚Çπ1,00,890.49</strong> is projected to generate a final corpus of approximately <strong>‚Çπ11.70 Crores</strong>, which significantly <strong>overshoots the inflation-adjusted target of ‚Çπ8.75 Crores by over 33%</strong>. This report presents the plan as initially calculated, but we strongly recommend a revision of the monthly SIP amount to align with the intended financial goal.</p>
    </div>
    
    <section id="executive-summary">
      <h2>üéØ Executive Summary</h2>
      <p>This report outlines a financial plan to achieve the goal of a 'Child Marriage' fund with a target of <strong>‚Çπ3,00,00,000</strong> in today's value. The plan spans a <strong>20-year horizon</strong> (240 months), factoring in a <strong>5.5% annual inflation rate</strong>, which adjusts the future target corpus to <strong>‚Çπ8,75,32,710.28</strong>. Based on a 'high_moderate' risk appetite and an assumed annual return of 11%, the initially calculated monthly SIP is <strong>‚Çπ1,00,890.49</strong>. The proposed asset allocation is a <strong>60/40 split between Equity and Debt</strong>. However, as highlighted above, the core SIP calculation is flawed and requires recalculation to prevent significant over-investment.</p>
    </section>

    <section id="goal-inputs">
      <h2>üìã Goal Inputs & Assumptions</h2>
      <table><thead><tr><th>Parameter</th><th>Value</th></tr></thead><tbody>
        <tr><td><strong>Financial Goal</strong></td><td>Child Marriage</td></tr>
        <tr><td><strong>Present Value Target</strong></td><td>‚Çπ3,00,00,000</td></tr>
        <tr><td><strong>Investment Horizon</strong></td><td>20 Years (240 Months)</td></tr>
        <tr><td><strong>Risk Appetite</strong></td><td>High-Moderate</td></tr>
        <tr><td><strong>Assumed Annual Return</strong></td><td>11.0%</td></tr>
        <tr><td><strong>Assumed Annual Inflation</strong></td><td>5.5%</td></tr>
      </tbody></table>
    </section>

    <section id="inflation-adjustment">
      <h2>üíπ Inflation Adjustment Analysis</h2>
       <table><thead><tr><th>Parameter</th><th>Value</th></tr></thead><tbody>
        <tr><td>Unadjusted Target (Present Value)</td><td>‚Çπ3,00,00,000.00</td></tr>
        <tr><td>Inflation Rate (Annual)</td><td>5.5%</td></tr>
        <tr><td>Time Horizon</td><td>20 Years</td></tr>
        <tr><td><strong>Inflation-Adjusted Target (Future Value)</strong></td><td><strong>‚Çπ8,75,32,710.28</strong></td></tr>
      </tbody></table>
    </section>

    <section id="sip-calculation">
      <h2>üßÆ Monthly SIP Calculation</h2>
      <div class="callout warning"><strong>Validation Error:</strong> The calculated <code>monthly_sip</code> of ‚Çπ1,00,890.49 is mathematically inconsistent with the <code>adjusted_target</code> of ‚Çπ8,75,32,710.28. The plan's own projection shows this SIP leads to a final corpus of ‚Çπ11,69,87,158.42, a ~33% overshoot. <strong>Recalculation is required.</strong></div>
      <table><thead><tr><th>Parameter</th><th>Value</th></tr></thead><tbody>
        <tr><td>Adjusted Target Corpus</td><td>‚Çπ8,75,32,710.28</td></tr>
        <tr><td>Investment Duration (Months)</td><td>240</td></tr>
        <tr><td>Assumed Monthly Rate of Return (r)</td><td>0.9167%</td></tr>
        <tr><td><strong>Calculated Monthly SIP</strong></td><td><strong>‚Çπ1,00,890.49</strong></td></tr>
      </tbody></table>
    </section>

    <section id="asset-allocation">
      <h2>üìä Asset Allocation Plan</h2>
      <p>Based on a 'high_moderate' risk profile, the investment is strategically allocated between growth-oriented equity assets and stability-focused debt instruments.</p>
      <ul><li><strong>Equity Allocation:</strong> 60%</li><li><strong>Debt Allocation:</strong> 40%</li></ul>
      <h3>Recommended Fund Categories</h3>
      <ul>
        <li><strong>Equity (60%):</strong> Large Cap Funds, Mid Cap Funds, ELSS (Optional for tax savings)</li>
        <li><strong>Debt (40%):</strong> Corporate Bond Funds, Government Securities</li>
      </ul>
    </section>
    
    <section id="recommendations">
      <h2>üîë Key Recommendations</h2>
      <ol>
        <li><strong>Recalculate the Monthly SIP:</strong> The immediate and most critical action is to correct the mathematical error in the SIP calculation to accurately target the ‚Çπ8.75 Crore corpus.</li>
        <li><strong>Source Missing Fund Categories:</strong> Before deploying capital, ensure that investment products for the 'Government Securities' category are identified to fulfill the 40% debt allocation.</li>
        <li><strong>Adhere to the Strategic Allocation:</strong> Avoid investing in surplus categories ('Small Cap', 'Dynamic Bond') identified during sourcing analysis to manage risk appropriately.</li>
        <li><strong>Conduct Annual Reviews:</strong> It is imperative to review the portfolio's performance, asset allocation, and progress towards the goal on an annual basis and rebalance if necessary.</li>
      </ol>
    </section>

    <section id="risks">
      <h2>‚öñÔ∏è Risk Factors & Uncertainties</h2>
      <p>Investing in capital markets is subject to various risks that can impact the final outcome of this investment plan. This plan, while structured, does not guarantee returns. Key risks include:</p>
      <ul>
        <li><strong>Market Risk:</strong> The primary risk is the inherent volatility of equity markets. Economic downturns, geopolitical events, or poor corporate performance can lead to a decline in the value of equity investments. The projected 11% annual return is an assumption, not a certainty.</li>
        <li><strong>Inflation Risk:</strong> The plan assumes a 5.5% inflation rate. If actual inflation averages higher over the 20-year period, the real value of the final corpus will be lower than intended, potentially leading to a shortfall in purchasing power.</li>
        <li><strong>Interest Rate Risk:</strong> The debt portion of the portfolio is subject to interest rate risk. If interest rates rise, the value of existing bonds may fall, impacting returns from the debt allocation.</li>
        <li><strong>Calculation Integrity Risk:</strong> As identified by the internal validation process, there is a significant risk stemming from calculation errors. The initial SIP amount was incorrect, and without correction, it would lead to a substantial deviation from the financial goal. This highlights the need for continuous verification.</li>
      </ul>
    </section>

    <!-- v11 FIXED CHART LAYOUT: VERTICAL STACK -->
    <section id="sip-charts">
      <h2>üìà SIP Projection & Allocation Charts</h2>
      <div style="display: block;">
        <!-- Asset Allocation FIRST (TOP) -->
        <div class="chart-container" style="margin-bottom: 30px; text-align: center;">
          <h3>Asset Allocation</h3>
          <div style="max-width: 500px; margin: 0 auto;">
            <canvas id="sipAllocationChart" width="400" height="300" style="max-width: 100%; height: auto;"></canvas>
          </div>
        </div>
        
        <!-- SIP Growth Projection SECOND (BOTTOM) -->
        <div class="chart-container" style="text-align: center;">
          <h3>SIP Growth Projection</h3>
          <div style="max-width: 800px; margin: 0 auto;">
            <canvas id="sipProjectionChart" width="600" height="400" style="max-width: 100%; height: auto;"></canvas>
          </div>
        </div>
      </div>
    </section>

    <section id="monthly-projection">
      <h2>üóìÔ∏è Monthly Projection (First 12 Months)</h2>
      <table>
        <thead><tr><th>Month</th><th>Contribution</th><th>Cumulative</th><th>Projected Corpus</th></tr></thead>
        <tbody>
            <tr><td>M1</td><td>‚Çπ1,00,890.49</td><td>‚Çπ1,00,890.49</td><td>‚Çπ1,00,890.49</td></tr>
            <tr><td>M2</td><td>‚Çπ1,00,890.49</td><td>‚Çπ2,01,780.98</td><td>‚Çπ2,02,705.60</td></tr>
            <tr><td>M3</td><td>‚Çπ1,00,890.49</td><td>‚Çπ3,02,671.47</td><td>‚Çπ3,05,452.40</td></tr>
            <tr><td>M4</td><td>‚Çπ1,00,890.49</td><td>‚Çπ4,03,561.96</td><td>‚Çπ4,09,137.93</td></tr>
            <tr><td>M5</td><td>‚Çπ1,00,890.49</td><td>‚Çπ5,04,452.45</td><td>‚Çπ5,13,769.31</td></tr>
            <tr><td>M6</td><td>‚Çπ1,00,890.49</td><td>‚Çπ6,05,342.94</td><td>‚Çπ6,19,353.76</td></tr>
            <tr><td>M7</td><td>‚Çπ1,00,890.49</td><td>‚Çπ7,06,233.43</td><td>‚Çπ7,25,898.63</td></tr>
            <tr><td>M8</td><td>‚Çπ1,00,890.49</td><td>‚Çπ8,07,123.92</td><td>‚Çπ8,33,411.41</td></tr>
            <tr><td>M9</td><td>‚Çπ1,00,890.49</td><td>‚Çπ9,08,014.41</td><td>‚Çπ9,41,899.69</td></tr>
            <tr><td>M10</td><td>‚Çπ1,00,890.49</td><td>‚Çπ10,08,904.90</td><td>‚Çπ10,51,371.18</td></tr>
            <tr><td>M11</td><td>‚Çπ1,00,890.49</td><td>‚Çπ11,09,795.39</td><td>‚Çπ11,61,833.72</td></tr>
            <tr><td>M12</td><td>‚Çπ1,00,890.49</td><td>‚Çπ12,10,685.88</td><td>‚Çπ12,73,295.29</td></tr>
        </tbody>
      </table>
    </section>

    <div style="margin: 40px 0; text-align: center;" class="no-print">
      <button onclick="window.print()" style="margin: 5px; padding: 12px 24px;">Print Report</button>
      <button onclick="downloadHTML()" style="margin: 5px; padding: 12px 24px; background-color: #10B981;">Download HTML</button>
    </div>

  </div>

  <!-- Load Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Embed chart data -->
  <script id="sip-chart-data" type="application/json">
    {"projection":{"labels":["M1","M2","M3","M4","M5","M6","M7","M8","M9","M10","M11","M12","M24","M36","M48","M60","M72","M84","M96","M108","M120","M132","M144","M156","M168","M180","M192","M204","M216","M228","M240"],"datasets":{"cumulative_contribution":[100890.49,201780.98,302671.47,403561.96,504452.45,605342.94,706233.43,807123.92,908014.41,1008904.9,1109795.39,1210685.88,2421371.76,3632057.64,4842743.52,6053429.4,7264115.28,8474801.16,9685487.04,10896172.92,12106858.8,13317544.68,14528230.56,15738916.44,16949602.32,18160288.2,19370974.08,20581659.96,21792345.84,23003031.72,24213717.6],"projected_corpus":[100890.49,202705.6,305452.4,409137.93,513769.31,619353.76,725898.63,833411.41,941899.69,1051371.18,1161833.72,1273295.29,2704283.65,4323677.12,6165507.03,8267657.49,10672658.23,13429074.45,16591393.38,20220268.32,24383431.13,29156711.23,34623190.26,40875084.77,48015252.37,56158434.98,65433246.06,75983279.16,87968599.55,101569033.44,116987158.42]}},"allocation":{"labels":["Equity","Debt"],"data":[60,40],"meta":{"recommended_fund_categories":{"equity":["Large Cap Funds","Mid Cap Funds"],"debt":["Corporate Bond Funds","Government Securities"],"elss_optional":true}}}}
  </script>

  <!-- v11 ENHANCED chart rendering with proper layout and sizing -->
  <script>
    function initCharts() {
      if (typeof Chart === 'undefined') {
        console.error('Chart.js not loaded');
        return;
      }
      
      let data;
      try {
        const script = document.getElementById('sip-chart-data');
        data = script ? JSON.parse(script.textContent) : null;
      } catch (e) {
        console.warn('Chart data parse failed');
        data = null;
      }
      
      if (!data) {
        console.warn('Using fallback chart data.');
        data = {
          projection: {
            labels: ["M1","M2","M3","M4","M5","M6","M7","M8","M9","M10","M11","M12","M24","M36","M48","M60","M72","M84","M96","M108","M120"],
            datasets: {
              cumulative_contribution: [25000,50000,75000,100000,125000,150000,175000,200000,225000,250000,275000,300000,600000,900000,1200000,1500000,1800000,2100000,2400000,2700000,3000000],
              projected_corpus: [25250,50755,76519,102543,128831,155386,182212,209312,236692,264356,292308,320552,683945,1101863,1586419,2153095,2820541,3611802,4555845,5688560,7054238]
            }
          },
          allocation: { labels: ["Equity", "Debt"], data: [70, 30] }
        };
      }
      
      const allocCtx = document.getElementById('sipAllocationChart');
      if (allocCtx) {
        new Chart(allocCtx, {
          type: 'doughnut',
          data: {
            labels: data.allocation.labels,
            datasets: [{ 
              data: data.allocation.data, 
              backgroundColor: ['#3B82F6', '#10B981'],
              borderWidth: 2 
            }]
          },
          options: { 
            responsive: true,
            maintainAspectRatio: true,
            aspectRatio: 1.33,
            plugins: {
              legend: { 
                position: 'bottom',
                labels: { padding: 15 }
              }
            }
          }
        });
      }
      
      const projCtx = document.getElementById('sipProjectionChart');
      if (projCtx) {
        new Chart(projCtx, {
          type: 'line',
          data: {
            labels: data.projection.labels,
            datasets: [{
              label: 'Projected Corpus',
              data: data.projection.datasets.projected_corpus,
              borderColor: '#3B82F6',
              backgroundColor: 'rgba(59, 130, 246, 0.1)',
              fill: true,
              tension: 0.4,
              pointRadius: 1,
              pointHoverRadius: 4
            }, {
              label: 'Cumulative Contribution', 
              data: data.projection.datasets.cumulative_contribution,
              borderColor: '#EF4444',
              backgroundColor: 'rgba(239, 68, 68, 0.1)',
              fill: false,
              tension: 0.4,
              pointRadius: 1,
              pointHoverRadius: 4
            }]
          },
          options: { 
            responsive: true,
            maintainAspectRatio: true,
            aspectRatio: 1.5,
            interaction: {
              mode: 'nearest',
              intersect: false
            },
            scales: {
              x: {
                title: { display: true, text: 'Time Period (Months)' },
                ticks: { maxTicksLimit: 12 }
              },
              y: {
                beginAtZero: true,
                title: { display: true, text: 'Amount (INR)' },
                ticks: {
                  callback: function(value) {
                    if (value >= 10000000) return '‚Çπ' + (value/10000000).toFixed(2) + 'Cr';
                    return '‚Çπ' + (value/100000).toFixed(1) + 'L';
                  }
                }
              }
            },
            plugins: {
              tooltip: {
                mode: 'index',
                intersect: false
              }
            }
          }
        });
      }
    }

    setTimeout(initCharts, 500);
  </script>
  
  <script>
    function downloadHTML() {
      const html = document.documentElement.outerHTML;
      const blob = new Blob([html], { type: 'text/html' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'sip_comprehensive_report.html';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    }
  </script>
</body>
</html>