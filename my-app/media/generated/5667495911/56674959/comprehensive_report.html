<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Systematic Investment Plan (SIP) Analysis Report</title>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; margin: 0; padding: 20px; background-color: #f9fafb; color: #111827; }
    .container { max-width: 1000px; margin: 20px auto; background-color: #ffffff; padding: 20px 40px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
    h1, h2, h3 { color: #1f2937; border-bottom: 2px solid #e5e7eb; padding-bottom: 10px; margin-top: 20px; }
    h1 { font-size: 2.25rem; text-align: center; border-bottom: none; margin-bottom: 20px; }
    h2 { font-size: 1.5rem; }
    section { margin-bottom: 30px; }
    table { width: 100%; border-collapse: collapse; margin: 20px 0; }
    th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
    th { background-color: #f3f4f6; font-weight: 600; }
    tr:nth-child(even) { background-color: #f9fafb; }
    .no-print { text-align: center; margin: 40px 0; }
    button { background-color: #3b82f6; color: white; padding: 12px 24px; border: none; border-radius: 6px; cursor: pointer; font-size: 1rem; margin: 5px; transition: background-color 0.3s; }
    button:hover { background-color: #2563eb; }
    .highlight { background-color: #eff6ff; border-left: 4px solid #3b82f6; padding: 15px; margin: 15px 0; }
    @media print {
      .no-print { display: none; }
      body { box-shadow: none; margin: 0; padding: 0; }
      .container { box-shadow: none; border: none; }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>üìä Systematic Investment Plan Report</h1>
      <p style="text-align:center; color:#4b5563;">A comprehensive analysis for your goal of 'Child Education'</p>
    </header>

    <section id="executive-summary">
      <h2>üéØ Executive Summary</h2>
      <p>This report outlines a comprehensive financial plan to achieve the goal of funding a child's education. The plan is tailored for a <b>12-year investment horizon</b> with a 'high_moderate' risk appetite. After adjusting for an estimated annual inflation rate of 5.5%, the target corpus required is approximately <b>‚Çπ1.90 crore</b>. To reach this goal, a monthly Systematic Investment Plan (SIP) of <b>‚Çπ63,859</b> is calculated, based on an expected annualized return of 11%. The recommended strategic asset allocation is <b>60% in equity funds</b> and <b>40% in debt funds</b>, balancing growth potential with risk management. Projections indicate that disciplined investment over 144 months will result in a final corpus of approximately <b>‚Çπ1.88 crore</b>, closely aligning with the target.</p>
    </section>

    <section id="goal-inputs">
      <h2>üìã Goal Inputs & Investor Profile</h2>
      <table>
        <thead><tr><th>Parameter</th><th>Value</th></tr></thead>
        <tbody>
          <tr><td><b>Financial Goal</b></td><td>Child Education</td></tr>
          <tr><td><b>Target Amount (Today's Value)</b></td><td>‚Çπ1,00,00,000</td></tr>
          <tr><td><b>Time Horizon</b></td><td>12 Years</td></tr>
          <tr><td><b>Total Investment Period</b></td><td>144 Months</td></tr>
          <tr><td><b>Investor Risk Appetite</b></td><td>High-Moderate</td></tr>
        </tbody>
      </table>
    </section>

    <section id="inflation-adjustment">
      <h2>üéà Inflation Adjustment</h2>
      <p>To ensure the target amount retains its purchasing power, it is adjusted for inflation over the investment period.</p>
      <table>
        <thead><tr><th>Parameter</th><th>Value</th></tr></thead>
        <tbody>
          <tr><td><b>Assumed Annual Inflation Rate</b></td><td>5.5%</td></tr>
          <tr><td><b>Unadjusted Target Amount</b></td><td>‚Çπ1,00,00,000</td></tr>
          <tr><td><b>Inflation-Adjusted Target Corpus</b></td><td><b>‚Çπ1,90,12,070</b></td></tr>
        </tbody>
      </table>
    </section>

    <section id="sip-calculation">
      <h2>üßÆ Required Monthly SIP Calculation</h2>
      <p>This calculation determines the monthly investment required to reach the inflation-adjusted target.</p>
      <table>
        <thead><tr><th>Parameter</th><th>Value</th></tr></thead>
        <tbody>
          <tr><td><b>Expected Annual Return</b></td><td>11%</td></tr>
          <tr><td><b>Total Months (n)</b></td><td>144</td></tr>
          <tr><td><b>Calculated Monthly SIP</b></td><td><b>‚Çπ63,859</b></td></tr>
        </tbody>
      </table>
    </section>

    <section id="asset-allocation-plan">
      <h2>üí∞ Asset Allocation Plan</h2>
      <p>A diversified portfolio is recommended based on the 'high_moderate' risk profile to balance growth with risk.</p>
      <table>
        <thead><tr><th>Asset Class</th><th>Allocation</th></tr></thead>
        <tbody>
          <tr><td>üîµ <b>Equity</b></td><td>60%</td></tr>
          <tr><td>üü¢ <b>Debt</b></td><td>40%</td></tr>
        </tbody>
      </table>
    </section>

    <section id="key-recommendations">
      <h2>üîë Key Recommendations</h2>
      <ol>
        <li><b>Proceed with Plan:</b> The 60% Equity and 40% Debt strategy is confirmed as viable. Begin investing the calculated SIP of ‚Çπ63,859 monthly.</li>
        <li><b>Conduct Due Diligence:</b> Research specific funds within the recommended categories (e.g., Large Cap, Mid Cap, Corporate Bond). Analyze performance, expense ratios, and fund manager history.</li>
        <li><b>Review and Rebalance:</b> Review your portfolio annually. Rebalance if market movements cause the allocation to drift significantly from the original 60/40 split.</li>
      </ol>
      <div class="highlight">
        <p><b>Viability Confirmed:</b> Analysis confirmed that a pool of suitable funds aligning with the recommended categories has been identified, making this strategic plan viable and actionable.</p>
      </div>
    </section>

    <section id="risk-factors">
      <h2>‚ö†Ô∏è Risk Factors & Uncertainties</h2>
      <p>Investing in financial markets involves inherent risks. While this plan uses diversification to mitigate these risks, they cannot be eliminated. <b>Market Volatility</b> is the most significant risk; the 60% equity allocation will be subject to market fluctuations. There is no guarantee that the projected 11% annualized return will be achieved. <b>Inflation Risk</b> is another key concern; if actual inflation outpaces the assumed 5.5%, the real value of the final corpus may be less than anticipated. Furthermore, <b>Interest Rate Risk</b> can affect the debt portion of the portfolio, as changes in rates can impact bond fund values. Finally, achieving this goal is critically dependent on <b>Investment Discipline</b>. Pausing SIPs during market downturns can severely undermine long-term returns. It is crucial to maintain consistent monthly investments throughout the entire 12-year horizon and to independently verify all financial data before investing.</p>
    </section>

    <section id="sip-charts">
      <h2>üìä SIP Projection & Allocation Charts</h2>
      <div style="display: block;">
        <!-- Asset Allocation FIRST (TOP) -->
        <div class="chart-container" style="margin-bottom: 30px; text-align: center;">
          <h3>Asset Allocation</h3>
          <div style="max-width: 500px; margin: 0 auto;">
            <canvas id="sipAllocationChart" width="400" height="300" style="max-width: 100%; height: auto;"></canvas>
          </div>
        </div>
        
        <!-- SIP Growth Projection SECOND (BOTTOM) -->
        <div class="chart-container" style="text-align: center;">
          <h3>SIP Growth Projection</h3>
          <div style="max-width: 800px; margin: 0 auto;">
            <canvas id="sipProjectionChart" width="600" height="400" style="max-width: 100%; height: auto;"></canvas>
          </div>
        </div>
      </div>
    </section>

    <section id="monthly-projection">
      <h2>üìà Monthly Projection (First 12 Months)</h2>
      <p>The table below shows the projected growth of your investment over the first year, illustrating the power of compounding.</p>
      <table>
        <thead>
          <tr><th>Month</th><th>Cumulative Contribution</th><th>Projected Corpus</th></tr>
        </thead>
        <tbody>
          <tr><td>1</td><td>‚Çπ63,859</td><td>‚Çπ63,859</td></tr>
          <tr><td>2</td><td>‚Çπ1,27,718</td><td>‚Çπ1,28,304</td></tr>
          <tr><td>3</td><td>‚Çπ1,91,577</td><td>‚Çπ1,93,340</td></tr>
          <tr><td>4</td><td>‚Çπ2,55,436</td><td>‚Çπ2,58,973</td></tr>
          <tr><td>5</td><td>‚Çπ3,19,295</td><td>‚Çπ3,25,209</td></tr>
          <tr><td>6</td><td>‚Çπ3,83,153</td><td>‚Çπ3,92,052</td></tr>
          <tr><td>7</td><td>‚Çπ4,47,012</td><td>‚Çπ4,59,508</td></tr>
          <tr><td>8</td><td>‚Çπ5,10,871</td><td>‚Çπ5,27,582</td></tr>
          <tr><td>9</td><td>‚Çπ5,74,730</td><td>‚Çπ5,96,280</td></tr>
          <tr><td>10</td><td>‚Çπ6,38,589</td><td>‚Çπ6,65,608</td></tr>
          <tr><td>11</td><td>‚Çπ7,02,448</td><td>‚Çπ7,35,571</td></tr>
          <tr><td>12</td><td>‚Çπ7,66,307</td><td>‚Çπ8,06,175</td></tr>
        </tbody>
      </table>
    </section>
    
    <div class="no-print">
      <button onclick="window.print()">Print Report</button>
      <button onclick="downloadHTML()">Download HTML</button>
    </div>

  </div>

  <!-- Load Chart.js from CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Embed chart data -->
  <script id="sip-chart-data" type="application/json">
  {"projection":{"labels":["M1","M2","M3","M4","M5","M6","M7","M8","M9","M10","M11","M12","M13","M14","M15","M16","M17","M18","M19","M20","M21","M22","M23","M24","M25","M26","M27","M28","M29","M30","M31","M32","M33","M34","M35","M36","M37","M38","M39","M40","M41","M42","M43","M44","M45","M46","M47","M48","M49","M50","M51","M52","M53","M54","M55","M56","M57","M58","M59","M60","M61","M62","M63","M64","M65","M66","M67","M68","M69","M70","M71","M72","M73","M74","M75","M76","M77","M78","M79","M80","M81","M82","M83","M84","M85","M86","M87","M88","M89","M90","M91","M92","M93","M94","M95","M96","M97","M98","M99","M100","M101","M102","M103","M104","M105","M106","M107","M108","M109","M110","M111","M112","M113","M114","M115","M116","M117","M118","M119","M120","M121","M122","M123","M124","M125","M126","M127","M128","M129","M130","M131","M132","M133","M134","M135","M136","M137","M138","M139","M140","M141","M142","M143","M144"],"datasets":{"cumulative_contribution":[63858.91,127717.82,191576.73,255435.64,319294.55,383153.46,447012.37,510871.28,574730.19,638589.1,702448.01,766306.92,830165.83,894024.74,957883.65,1021742.56,1085601.47,1149460.38,1213319.29,1277178.2,1341037.11,1404896.02,1468754.93,1532613.84,1596472.75,1660331.66,1724190.57,1788049.48,1851908.39,1915767.3,1979626.21,2043485.12,2107344.03,2171202.94,2235061.85,2298920.76,2362779.67,2426638.58,2490497.49,2554356.4,2618215.31,2682074.22,2745933.13,2809792.04,2873650.95,2937509.86,3001368.77,3065227.68,3129086.59,3192945.5,3256804.41,3320663.32,3384522.23,3448381.14,3512240.05,3576098.96,3639957.87,3703816.78,3767675.69,3831534.6,3895393.51,3959252.42,4023111.33,4086970.24,4150829.15,4214688.06,4278546.97,4342405.88,4406264.79,4470123.7,4533982.61,4597841.52,4661700.43,4725559.34,4789418.25,4853277.16,4917136.07,4980994.98,5044853.89,5108712.8,5172571.71,5236430.62,5300289.53,5364148.44,5428007.35,5491866.26,5555725.17,5619584.08,5683442.99,5747301.9,5811160.81,5875019.72,5938878.63,6002737.54,6066596.45,6130455.36,6194314.27,6258173.18,6322032.09,6385891.0,6449749.91,6513608.82,6577467.73,6641326.64,6705185.55,6769044.46,6832903.37,6896762.28,6960621.19,7024480.1,7088339.01,7152197.92,7216056.83,7279915.74,7343774.65,7407633.56,7471492.47,7535351.38,7599210.29,7663069.2,7726928.11,7790787.02,7854645.93,7918504.84,7982363.75,8046222.66,8110081.57,8173940.48,8237799.39,8301658.3,8365517.21,8429376.12,8493235.03,8557093.94,8620952.85,8684811.76,8748670.67,8812529.58,8876388.49,8940247.4,9004106.31,9067965.22,9131824.13,9195683.04],"projected_corpus":[63858.91,128303.51,193339.87,258973.18,325208.71,392051.78,459507.78,527582.16,596280.46,665608.28,735571.28,806175.22,877425.91,949329.23,1021891.13,1095117.65,1169014.9,1243589.04,1318846.31,1394793.01,1471435.53,1548780.32,1626833.89,1705602.83,1785093.81,1865313.62,1946269.11,2027967.19,2110414.86,2193619.16,2277587.21,2362326.2,2447843.41,2534146.16,2621241.84,2709137.9,2797841.83,2887361.21,2977703.69,3068877.01,3160888.97,3253747.45,3347459.43,3442031.95,3537472.11,3633787.05,3730984.02,3829070.36,3928053.51,4027940.96,4128740.28,4230459.09,4333105.07,4436685.95,4541209.57,4646683.82,4753116.65,4860516.08,4968890.17,5078247.05,518894.88,5299941.91,5412296.44,5525666.86,5640061.61,5755489.19,5871958.17,5989477.17,6108054.89,6227700.1,6348421.68,6470228.61,6593130.01,6717135.09,6842253.15,6968493.58,7095865.86,7224379.52,7354044.22,7484869.72,7616865.87,7750042.66,7884410.16,8019978.5,8156757.94,8294758.85,8433991.73,8574467.14,8716195.78,8859188.42,9003455.93,9149009.28,9295859.5,9444017.65,9593494.89,9744302.43,9896451.56,10049953.64,10204820.12,10361062.51,10518692.42,10677721.52,10838161.54,11000024.31,11163321.72,11328065.74,11494268.42,11661941.87,11831098.31,12001750.05,12173909.49,12347589.14,12522801.62,12699569.64,12877906.05,13057823.79,13239335.91,13422455.57,13607196.03,13793570.66,13981592.93,14171276.43,14362634.85,14555681.98,14750431.75,14946898.17,15145095.34,15345037.45,15546738.79,15750213.78,15955476.96,16162543.01,16371426.71,16582142.99,16794706.87,17009133.51,17225438.19,17443636.33,17663743.46,17885775.25,18109747.5,18335676.1,18563577.08,18793466.6]}},"allocation":{"labels":["Equity","Debt"],"data":[60,40]}}
  </script>

  <!-- Enhanced chart rendering script -->
  <script>
  function initCharts() {
    if (typeof Chart === 'undefined') {
      console.error('Chart.js not loaded');
      return;
    }
    
    let data;
    try {
      const script = document.getElementById('sip-chart-data');
      data = script ? JSON.parse(script.textContent) : null;
    } catch (e) {
      console.warn('Chart data parse failed');
      data = null;
    }
    
    if (!data) {
      console.warn('Using fallback chart data.');
      data = {
        projection: {
          labels: ["M1","M2","M3","M4","M5","M6","M7","M8","M9","M10","M11","M12"],
          datasets: {
            cumulative_contribution: [25000,50000,75000,100000,125000,150000,175000,200000,225000,250000,275000,300000],
            projected_corpus: [25250,50755,76519,102543,128831,155386,182212,209312,236692,264356,292308,320552]
          }
        },
        allocation: { labels: ["Equity", "Debt"], data: [60, 40] }
      };
    }
    
    // Create allocation chart FIRST (TOP POSITION)
    const allocCtx = document.getElementById('sipAllocationChart');
    if (allocCtx) {
      new Chart(allocCtx, {
        type: 'doughnut',
        data: {
          labels: data.allocation.labels,
          datasets: [{ 
            data: data.allocation.data, 
            backgroundColor: ['#3B82F6', '#10B981'],
            borderWidth: 2 
          }]
        },
        options: { 
          responsive: true,
          maintainAspectRatio: true,
          aspectRatio: 1.33,
          plugins: {
            legend: { 
              position: 'bottom',
              labels: { padding: 15 }
            }
          }
        }
      });
    }
    
    // Create projection chart SECOND (BOTTOM POSITION)
    const projCtx = document.getElementById('sipProjectionChart');
    if (projCtx) {
      new Chart(projCtx, {
        type: 'line',
        data: {
          labels: data.projection.labels,
          datasets: [{
            label: 'Projected Corpus',
            data: data.projection.datasets.projected_corpus,
            borderColor: '#3B82F6',
            backgroundColor: 'rgba(59, 130, 246, 0.1)',
            fill: true,
            tension: 0.4,
            pointRadius: 1,
            pointHoverRadius: 4
          }, {
            label: 'Cumulative Contribution', 
            data: data.projection.datasets.cumulative_contribution,
            borderColor: '#EF4444',
            backgroundColor: 'rgba(239, 68, 68, 0.1)',
            fill: false,
            tension: 0.4,
            pointRadius: 1,
            pointHoverRadius: 4
          }]
        },
        options: { 
          responsive: true,
          maintainAspectRatio: true,
          aspectRatio: 1.5,
          interaction: {
            mode: 'nearest',
            intersect: false
          },
          scales: {
            x: {
              title: { display: true, text: 'Time Period (Months)' },
              ticks: { maxTicksLimit: 12 }
            },
            y: {
              beginAtZero: true,
              title: { display: true, text: 'Amount (INR)' },
              ticks: {
                callback: function(value) {
                  if (value >= 10000000) return '‚Çπ' + (value/10000000).toFixed(2) + 'Cr';
                  return '‚Çπ' + (value/100000).toFixed(1) + 'L';
                }
              }
            }
          },
          plugins: {
            tooltip: {
              mode: 'index',
              intersect: false
            }
          }
        }
      });
    }
  }

  function downloadHTML() {
    const html = document.documentElement.outerHTML;
    const blob = new Blob([html], { type: 'text/html' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'sip_report_for_child_education.html';
    a.click();
    URL.revokeObjectURL(url);
  }

  // Initialize with a delay for proper loading
  setTimeout(initCharts, 500);
  </script>

</body>
</html>