<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Comprehensive SIP Goal Analysis Report</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; margin: 0; padding: 0; background-color: #f8fafc; color: #1f2937; }
    .container { max-width: 1000px; margin: 2rem auto; padding: 2rem; background-color: white; box-shadow: 0 4px 6px rgba(0,0,0,0.1); border-radius: 8px; }
    h1, h2, h3 { color: #111827; font-weight: 600; margin-top: 1.5em; margin-bottom: 0.75em; border-bottom: 1px solid #e5e7eb; padding-bottom: 0.25em; }
    h1 { font-size: 1.875rem; }
    h2 { font-size: 1.5rem; }
    h3 { font-size: 1.25rem; border-bottom: none; }
    p, li { line-height: 1.6; }
    table { width: 100%; border-collapse: collapse; margin: 20px 0; font-size: 0.9em; }
    th, td { border: 1px solid #e5e7eb; padding: 12px; text-align: left; }
    th { background-color: #f9fafb; font-weight: 600; }
    td:first-child { font-weight: 500; }
    .button-controls { margin: 30px 0; text-align: center; padding: 20px; background-color: #f9fafb; border-radius: 8px; }
    button { background-color: #3B82F6; color: white; border: none; padding: 12px 24px; border-radius: 6px; cursor: pointer; font-size: 1rem; margin: 5px; transition: background-color 0.2s; }
    button:hover { background-color: #2563EB; }
    .no-print { display: block; }
    @media print {
      .no-print { display: none; }
      body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
      .container { box-shadow: none; border: 1px solid #ddd; margin: 0; max-width: 100%; }
    }
  </style>
</head>
<body>
  <div class="container">
    <header style="text-align: center; margin-bottom: 2rem;">
      <h1 style="border-bottom: none;">üìã Comprehensive SIP Goal Analysis Report</h1>
      <p style="color: #6b7280;">Personalized Investment Plan for: House Purchase</p>
    </header>

    <!-- 1. Executive Summary -->
    <section id="executive-summary">
      <h2>üéØ Executive Summary</h2>
      <p>This report outlines a personalized investment strategy to achieve the financial goal of a <strong>'House Purchase'</strong> within a <strong>5-year</strong> timeframe. The primary objective is to accumulate a target corpus of <strong>‚Çπ10,000,000</strong>. After adjusting for a 5.5% annual inflation rate, the future value required is approximately <strong>‚Çπ1,30,69,600</strong>. To reach this goal, a monthly Systematic Investment Plan (SIP) of <strong>‚Çπ1,68,772</strong> is required, assuming a 10% annual return consistent with a 'moderate' risk profile. The strategy employs a balanced <strong>50% Equity / 50% Debt</strong> asset allocation to balance growth potential with capital preservation.</p>
    </section>

    <!-- 2. Goal Inputs -->
    <section id="goal-inputs">
      <h2>üì• Goal Inputs</h2>
      <table>
        <thead><tr><th>Parameter</th><th>Value</th></tr></thead>
        <tbody>
          <tr><td>Financial Goal</td><td>House Purchase</td></tr>
          <tr><td>Target Amount (Today's Value)</td><td>‚Çπ10,000,000</td></tr>
          <tr><td>Time Horizon</td><td>5 Years (60 Months)</td></tr>
          <tr><td>Risk Appetite</td><td>Moderate</td></tr>
        </tbody>
      </table>
    </section>

    <!-- 3. Inflation Adjustment -->
    <section id="inflation-adjustment">
      <h2>üå¨Ô∏è Inflation Adjustment</h2>
      <table>
        <thead><tr><th>Parameter</th><th>Value</th></tr></thead>
        <tbody>
          <tr><td>Assumed Annual Inflation</td><td>5.5%</td></tr>
          <tr><td><strong>Inflation-Adjusted Target (in 5 Years)</strong></td><td><strong>‚Çπ1,30,69,600</strong></td></tr>
        </tbody>
      </table>
    </section>

    <!-- 4. SIP Calculation -->
    <section id="sip-calculation">
      <h2>üßÆ SIP Calculation</h2>
      <table>
        <thead><tr><th>Parameter</th><th>Value</th></tr></thead>
        <tbody>
          <tr><td>Adjusted Target Corpus</td><td>‚Çπ1,30,69,600</td></tr>
          <tr><td>Assumed Annual Rate of Return</td><td>10.0%</td></tr>
          <tr><td><strong>Required Monthly SIP</strong></td><td><strong>‚Çπ1,68,772</strong></td></tr>
        </tbody>
      </table>
    </section>

    <!-- 5. Asset Allocation Plan -->
    <section id="asset-allocation">
      <h2>‚öñÔ∏è Asset Allocation Plan</h2>
      <p>A balanced <strong>50% Equity / 50% Debt</strong> allocation is recommended based on the 'moderate' risk profile and 5-year horizon. This mix aims to capture growth through equities while providing stability through debt instruments.</p>
      <ul>
        <li><strong>Equity (50%):</strong> To drive growth and beat inflation. Recommended categories include a mix of Large Cap funds for stability and Mid Cap funds for higher growth potential.</li>
        <li><strong>Debt (50%):</strong> To provide a stabilizing anchor and preserve capital. Recommended categories include Corporate Bond funds for yield and Short Duration funds to mitigate interest rate risk.</li>
      </ul>
    </section>

    <!-- 6. Key Recommendations -->
    <section id="key-recommendations">
        <h2>üîë Key Recommendations</h2>
        <ol>
            <li><strong>Initiate Monthly SIP:</strong> Start a systematic investment of <strong>‚Çπ1,68,772 per month</strong> to leverage compounding over the 60-month period.</li>
            <li><strong>Diversify Investments:</strong> Allocate the SIP amount according to the 50/50 equity-debt strategy, further diversifying within the recommended fund categories.</li>
            <li><strong>Annual Portfolio Review:</strong> Conduct a yearly review to rebalance the asset allocation if it deviates from the target and to assess fund performance.</li>
            <li><strong>Stay Disciplined:</strong> Avoid emotional decisions based on short-term market movements. It is crucial to continue the SIPs without interruption for the entire duration.</li>
        </ol>
    </section>

    <!-- 7. Risk Factors & Uncertainties -->
    <section id="risk-factors">
        <h2>œÅŒØ Risk Factors & Uncertainties</h2>
        <p>While this investment plan is built on sound financial principles and data-driven projections, it is subject to various risks that could impact the final outcome. The projected 10% annual return is an estimate, not a guarantee; actual returns may be higher or lower depending on market conditions. <strong>Market Risk</strong> is the most significant factor, as the 50% equity allocation is exposed to stock market volatility, which can lead to fluctuations in the portfolio's value, especially over a relatively short 5-year horizon. <strong>Inflation Risk</strong> is another concern; if the actual inflation rate exceeds the projected 5.5%, the final corpus may have less purchasing power than anticipated. For the debt portion, <strong>Interest Rate Risk</strong> can affect bond prices, and <strong>Credit Risk</strong>, the possibility of default by corporate bond issuers, could impact returns. The inclusion of Mid Cap funds, while intended for growth, introduces higher volatility compared to Large Caps. Furthermore, changes in regulations or economic policies could also affect investment performance. Regular monitoring and periodic rebalancing are essential mitigation strategies, but they cannot eliminate risk entirely.</p>
    </section>

    <!-- 8. Charts Section (FIXED v11 LAYOUT) -->
    <section id="sip-charts">
      <h2>üìä SIP Projection & Allocation Charts</h2>
      <div style="display: block;">
        <!-- Asset Allocation FIRST (TOP) -->
        <div class="chart-container" style="margin-bottom: 30px; text-align: center;">
          <h3>Asset Allocation</h3>
          <div style="max-width: 500px; margin: 0 auto;">
            <canvas id="sipAllocationChart" width="400" height="300" style="max-width: 100%; height: auto;"></canvas>
          </div>
        </div>
        
        <!-- SIP Growth Projection SECOND (BOTTOM) -->
        <div class="chart-container" style="text-align: center;">
          <h3>SIP Growth Projection</h3>
          <div style="max-width: 800px; margin: 0 auto;">
            <canvas id="sipProjectionChart" width="600" height="400" style="max-width: 100%; height: auto;"></canvas>
          </div>
        </div>
      </div>
    </section>

    <!-- 9. Monthly Projection Table -->
    <section id="monthly-projection">
        <h2>üìà Monthly Projection (First 12 Months)</h2>
        <table>
            <thead>
                <tr><th>Month</th><th>Cumulative Contribution</th><th>Projected Corpus</th></tr>
            </thead>
            <tbody>
              <tr><td>1</td><td>‚Çπ1,68,772</td><td>‚Çπ1,68,772</td></tr>
              <tr><td>2</td><td>‚Çπ3,37,543</td><td>‚Çπ3,39,011</td></tr>
              <tr><td>3</td><td>‚Çπ5,06,315</td><td>‚Çπ5,10,608</td></tr>
              <tr><td>4</td><td>‚Çπ6,75,087</td><td>‚Çπ6,83,571</td></tr>
              <tr><td>5</td><td>‚Çπ8,43,858</td><td>‚Çπ8,57,908</td></tr>
              <tr><td>6</td><td>‚Çπ10,12,630</td><td>‚Çπ10,33,629</td></tr>
              <tr><td>7</td><td>‚Çπ11,81,402</td><td>‚Çπ12,10,741</td></tr>
              <tr><td>8</td><td>‚Çπ13,50,174</td><td>‚Çπ13,89,255</td></tr>
              <tr><td>9</td><td>‚Çπ15,18,945</td><td>‚Çπ15,69,178</td></tr>
              <tr><td>10</td><td>‚Çπ16,87,717</td><td>‚Çπ17,50,520</td></tr>
              <tr><td>11</td><td>‚Çπ18,56,489</td><td>‚Çπ19,33,289</td></tr>
              <tr><td>12</td><td>‚Çπ20,25,260</td><td>‚Çπ21,17,495</td></tr>
            </tbody>
        </table>
        <p style="text-align: center; font-style: italic; color: #6b7280;">Note: Complete 60-month projection is visualized in the chart above. All values are rounded.</p>
    </section>

    <!-- 10. Allocation Notes -->
    <section id="allocation-notes">
      <h2>üìù Allocation Notes & Risk Profiles</h2>
      <p>The 'moderate' allocation was chosen from a spectrum of risk profiles to clarify the strategy. The following guidelines illustrate how allocation typically shifts based on risk tolerance:</p>
      <table>
          <thead><tr><th>Risk Profile</th><th>Guideline</th></tr></thead>
          <tbody>
              <tr><td>Low</td><td>Conservative, e.g., 70% debt / 30% equity</td></tr>
              <tr><td><strong>Moderate</strong></td><td><strong>Balanced mix, e.g., 50% equity / 50% debt</strong></td></tr>
              <tr><td>High</td><td>Aggressive, e.g., 70% equity / 30% debt</td></tr>
          </tbody>
      </table>
    </section>

    <!-- 11. Print/Download Controls -->
    <div class="button-controls no-print">
      <button onclick="window.print()">Print Report</button>
      <button onclick="downloadHTML()">Download HTML</button>
    </div>

  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Embedded Chart Data -->
  <script id="sip-chart-data" type="application/json">
    {"projection": {"labels": ["M1", "M2", "M3", "M4", "M5", "M6", "M7", "M8", "M9", "M10", "M11", "M12", "M13", "M14", "M15", "M16", "M17", "M18", "M19", "M20", "M21", "M22", "M23", "M24", "M25", "M26", "M27", "M28", "M29", "M30", "M31", "M32", "M33", "M34", "M35", "M36", "M37", "M38", "M39", "M40", "M41", "M42", "M43", "M44", "M45", "M46", "M47", "M48", "M49", "M50", "M51", "M52", "M53", "M54", "M55", "M56", "M57", "M58", "M59", "M60"], "datasets": {"cumulative_contribution": [168771.69, 337543.38, 506315.07, 675086.76, 843858.45, 1012630.14, 1181401.83, 1350173.52, 1518945.21, 1687716.9, 1856488.59, 2025260.28, 2194031.97, 2362803.66, 2531575.35, 2700347.04, 2869118.73, 3037890.42, 3206662.11, 3375433.8, 3544205.49, 3712977.18, 3881748.87, 4050520.56, 4219292.25, 4388063.94, 4556835.63, 4725607.32, 4894379.01, 5063150.7, 5231922.39, 5400694.08, 5569465.77, 5738237.46, 5907009.15, 6075780.84, 6244552.53, 6413324.22, 6582095.91, 6750867.6, 6919639.29, 7088410.98, 7257182.67, 7425954.36, 7594726.05, 7763497.74, 7932269.43, 8101041.12, 8269812.81, 8438584.5, 8607356.19, 8776127.88, 8944899.57, 9113671.26, 9282442.95, 9451214.64, 9619986.33, 9788758.02, 9957529.71, 10126301.4], "projected_corpus": [168771.69, 339011.08, 510607.86, 683570.62, 857908.01, 1033628.71, 1210741.45, 1389255.03, 1569178.29, 1750520.1, 1933289.43, 2117495.27, 2303146.69, 2490252.88, 2678823.11, 2868866.7, 3060393.07, 3253411.71, 3447932.14, 3643964.01, 3841517.04, 4040601.05, 4241225.89, 4443401.44, 4647137.62, 4852444.43, 5059332.0, 5267810.43, 5477889.85, 5689580.4, 5902892.24, 6117835.64, 6334420.94, 6552658.45, 6772558.6, 6994131.78, 7217388.56, 7442339.63, 7668995.66, 7897367.46, 8127466.02, 8359302.24, 8592887.09, 8828231.52, 9065346.51, 9304243.1, 9544932.33, 9787425.26, 10031733.14, 10277867.25, 10525838.91, 10775659.57, 11027340.73, 11280893.94, 11536330.72, 11793662.61, 12052901.2, 12314058.04, 12577144.86, 12842173.4]}}, "allocation": {"labels": ["Equity", "Debt"], "data": [50, 50]}}
  </script>

  <!-- Enhanced Chart Rendering Script (v11) -->
  <script>
    function initCharts() {
      if (typeof Chart === 'undefined') {
        console.error('Chart.js not loaded');
        return;
      }
      
      let data;
      try {
        const script = document.getElementById('sip-chart-data');
        data = script ? JSON.parse(script.textContent) : null;
      } catch (e) {
        console.warn('Chart data parse failed');
        data = null;
      }
      
      // Enhanced fallback with complete timeline
      if (!data) {
        console.warn('Using fallback chart data.');
        data = {
          projection: {
            labels: ["M1","M2","M3","M4","M5","M6","M7","M8","M9","M10","M11","M12","M13","M14","M15","M16","M17","M18","M19","M20","M21","M22","M23","M24","M25","M26","M27","M28","M29","M30","M31","M32","M33","M34","M35","M36","M37","M38","M39","M40","M41","M42","M43","M44","M45","M46","M47","M48","M49","M50","M51","M52","M53","M54","M55","M56","M57","M58","M59","M60","M61","M62","M63","M64","M65","M66","M67","M68","M69","M70","M71","M72","M73","M74","M75","M76","M77","M78","M79","M80","M81","M82","M83","M84","M85","M86","M87","M88","M89","M90","M91","M92","M93","M94","M95","M96","M97","M98","M99","M100","M101","M102","M103","M104","M105","M106","M107","M108","M109","M110","M111","M112","M113","M114","M115","M116","M117","M118","M119","M120"],
            datasets: {
              cumulative_contribution: [25000,50000,75000,100000,125000,150000,175000,200000,225000,250000,275000,300000,325000,350000,375000,400000,425000,450000,475000,500000,525000,550000,575000,600000,625000,650000,675000,700000,725000,750000,775000,800000,825000,850000,875000,900000,925000,950000,975000,1000000,1025000,1050000,1075000,1100000,1125000,1150000,1175000,1200000,1225000,1250000,1275000,1300000,1325000,1350000,1375000,1400000,1425000,1450000,1475000,1500000,1525000,1550000,1575000,1600000,1625000,1650000,1675000,1700000,1725000,1750000,1775000,1800000,1825000,1850000,1875000,1900000,1925000,1950000,1975000,2000000,2025000,2050000,2075000,2100000,2125000,2150000,2175000,2200000,2225000,2250000,2275000,2300000,2325000,2350000,2375000,2400000,2425000,2450000,2475000,2500000,2525000,2550000,2575000,2600000,2625000,2650000,2675000,2700000,2725000,2750000,2775000,2800000,2825000,2850000,2875000,2900000,2925000,2950000,2975000,3000000],
              projected_corpus: [25250,50755,76519,102543,128831,155386,182212,209312,236692,264356,292308,320552,349093,377935,407082,436540,466312,496404,526821,557567,588648,620068,651832,683945,716412,749239,782430,815991,849927,884244,918948,954045,989540,1025440,1061750,1098476,1135626,1173205,1211220,1249678,1288586,1327951,1367780,1408080,1448859,1490125,1531885,1574148,1616922,1660215,1704035,1748392,1793293,1838750,1884770,1931365,1978544,2026318,2074697,2123692,2173315,2223577,2274490,2326066,2378316,2431252,2484887,2539233,2594302,2650106,2706658,2763971,2822058,2880932,2940607,3001097,3062415,3124575,3187591,3251477,3316247,3381916,3448499,3516010,3584465,3653879,3724267,3795645,3868028,3941432,4015873,4091366,4167928,4245574,4324322,4404188,4567340,4650661,4735168,4821880,4909814,4999990,5091425,5184139,5278150,5373478,5470142,5568161,5667556,5768346,5870552,5974194,6079293,6185870,6293947,6403545,6514686,6627391]
            }
          },
          allocation: { labels: ["Equity", "Debt"], data: [70, 30] }
        };
      }
      
      // Create allocation chart FIRST (TOP POSITION)
      const allocCtx = document.getElementById('sipAllocationChart');
      if (allocCtx) {
        new Chart(allocCtx, {
          type: 'doughnut',
          data: {
            labels: data.allocation.labels,
            datasets: [{ 
              data: data.allocation.data, 
              backgroundColor: ['#3B82F6', '#10B981'],
              borderWidth: 2 
            }]
          },
          options: { 
            responsive: true,
            maintainAspectRatio: true,
            aspectRatio: 1.33,
            plugins: {
              legend: { 
                position: 'bottom',
                labels: { padding: 15 }
              }
            }
          }
        });
      }
      
      // Create projection chart SECOND (BOTTOM POSITION)
      const projCtx = document.getElementById('sipProjectionChart');
      if (projCtx) {
        new Chart(projCtx, {
          type: 'line',
          data: {
            labels: data.projection.labels,
            datasets: [{
              label: 'Projected Corpus',
              data: data.projection.datasets.projected_corpus,
              borderColor: '#3B82F6',
              backgroundColor: 'rgba(59, 130, 246, 0.1)',
              fill: true,
              tension: 0.4,
              pointRadius: 1,
              pointHoverRadius: 4
            }, {
              label: 'Cumulative Contribution', 
              data: data.projection.datasets.cumulative_contribution,
              borderColor: '#EF4444',
              backgroundColor: 'rgba(239, 68, 68, 0.1)',
              fill: false,
              tension: 0.4,
              pointRadius: 1,
              pointHoverRadius: 4
            }]
          },
          options: { 
            responsive: true,
            maintainAspectRatio: true,
            aspectRatio: 1.5,
            interaction: {
              mode: 'nearest',
              intersect: false
            },
            scales: {
              x: {
                title: { display: true, text: 'Time Period (Months)' },
                ticks: { maxTicksLimit: 10 }
              },
              y: {
                beginAtZero: true,
                title: { display: true, text: 'Amount (INR)' },
                ticks: {
                  callback: function(value) {
                    return '‚Çπ' + (value/100000).toFixed(1) + 'L';
                  }
                }
              }
            },
            plugins: {
              tooltip: {
                mode: 'index',
                intersect: false
              }
            }
          }
        });
      }
    }
    
    // Initialize with enhanced delay for proper loading
    setTimeout(initCharts, 500);
  </script>

  <!-- Download & Print Script -->
  <script>
    function downloadHTML() {
      const html = document.documentElement.outerHTML;
      const blob = new Blob([html], { type: 'text/html' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'sip_report.html';
      a.click();
      URL.revokeObjectURL(url);
    }
  </script>
</body>
</html>