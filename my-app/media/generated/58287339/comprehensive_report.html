<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Comprehensive Retirement SIP Analysis Report</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; margin: 0; padding: 20px; background-color: #f9fafb; color: #1f2937; }
    .container { max-width: 1200px; margin: 0 auto; background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
    h1 { font-size: 2.25rem; font-weight: bold; color: #111827; border-bottom: 2px solid #3B82F6; padding-bottom: 0.5rem; margin-bottom: 1.5rem; }
    h2 { font-size: 1.5rem; font-weight: bold; color: #111827; margin-top: 2rem; margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 1px solid #e5e7eb; }
    table { width: 100%; border-collapse: collapse; margin: 1.5rem 0; }
    th, td { border: 1px solid #ddd; padding: 12px; text-align: left; vertical-align: top; }
    th { background-color: #f8f9fa; font-weight: 600; }
    p { line-height: 1.6; margin-bottom: 1rem; }
    ul, ol { margin-left: 1.5rem; margin-bottom: 1rem; }
    li { margin-bottom: 0.5rem; }
    .executive-summary { background-color: #eff6ff; border-left: 4px solid #3B82F6; padding: 1.5rem; margin-bottom: 2rem; border-radius: 4px; }
    .callout { padding: 1rem; margin: 1.5rem 0; border-left-width: 4px; border-radius: 4px; }
    .warning { background-color: #fffbeb; border-color: #f59e0b; color: #92400e; }
    .no-print { display: block; }
    @media print {
      .no-print { display: none; }
      body { padding: 0; background-color: #fff; }
      .container { box-shadow: none; border: none; padding: 0.5rem; }
      h1, h2 { margin-top: 1.5rem; }
      #sip-charts { page-break-before: always; }
      .chart-container { page-break-inside: avoid !important; margin: 15px 0; }
      canvas { max-height: 250px !important; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üìù Comprehensive Retirement SIP Analysis Report</h1>
    
    <section id="executive-summary">
      <div class="executive-summary">
        <h2>üéØ Executive Summary</h2>
        <p>This report provides a detailed financial plan to achieve a retirement corpus of <b>‚Çπ3 Crore</b> in today's value over a <b>10-year</b> horizon. Factoring in an annual inflation rate of <b>5.5%</b>, the future target corpus required is approximately <b>‚Çπ5.12 Crore</b>. To reach this goal with an assumed annual return of 10% based on a 'moderate' risk profile, a monthly Systematic Investment Plan (SIP) of <b>‚Çπ2,50,161.46</b> is necessary. The recommended strategy involves a balanced portfolio with a <b>50/50 allocation</b> between equity and debt instruments. This plan is supported by visual projections, a detailed breakdown of calculations, and strategic recommendations to guide the investment journey.</p>
      </div>
    </section>

    <section id="goal-inputs">
      <h2>üìã Goal Inputs</h2>
      <p>The following parameters, based on your inputs, form the foundation of this financial plan.</p>
      <table><thead><tr><th>Parameter</th><th>Value</th></tr></thead><tbody><tr><td>Goal Type</td><td>Retirement</td></tr><tr><td>Current Age</td><td>50</td></tr><tr><td>Target Retirement Age</td><td>60</td></tr><tr><td>Target Amount</td><td>‚Çπ30,000,000</td></tr><tr><td>Time Horizon</td><td>10 Years (120 Months)</td></tr><tr><td>Risk Appetite</td><td>Moderate</td></tr></tbody></table>
    </section>

    <section id="inflation-adjustment">
      <h2>üí® Inflation Adjustment</h2>
      <p>To ensure your future corpus has the same purchasing power as your target today, the goal amount has been adjusted for inflation.</p>
      <table><thead><tr><th>Parameter</th><th>Value</th></tr></thead><tbody><tr><td>Assumed Annual Inflation</td><td>5.5%</td></tr><tr><td>Investment Horizon</td><td>10 Years</td></tr><tr><td>Unadjusted Target</td><td>‚Çπ30,000,000</td></tr><tr><td><b>Inflation-Adjusted Target</b></td><td><b>‚Çπ51,244,333.72</b></td></tr></tbody></table>
    </section>

    <section id="sip-calculation">
      <h2>‚öôÔ∏è SIP Calculation</h2>
      <p>Based on the inflation-adjusted target and assumed returns, the following monthly SIP amount has been calculated to achieve your goal.</p>
      <table><thead><tr><th>Parameter</th><th>Value</th></tr></thead><tbody><tr><td>Assumed Annual Return (Moderate Profile)</td><td>10%</td></tr><tr><td>Number of Months (n)</td><td>120</td></tr><tr><td>Target Corpus</td><td>‚Çπ51,244,333.72</td></tr><tr><td><b>Required Monthly SIP</b></td><td><b>‚Çπ250,161.46</b></td></tr></tbody></table>
      <div class='callout warning'>‚ö†Ô∏è <b>Note on Projections:</b> A quality assurance check noted a minor discrepancy of ~0.88% between the final projected corpus in the monthly table (‚Çπ5,07,91,470.47) and the calculated target (‚Çπ5,12,44,333.72). This is likely due to cumulative rounding in the iterative calculation but does not materially impact the overall plan.</div>
    </section>

    <section id="asset-allocation">
      <h2>üèõÔ∏è Asset Allocation Plan</h2>
      <p>A balanced asset allocation is crucial for managing risk while aiming for growth. Based on your 'moderate' risk profile, a 50/50 split between equity and debt is recommended.</p>
      <h3>Allocation Split: <b>50% Equity / 50% Debt</b></h3>
      <h4>Equity Allocation (50%)</h4>
      <table><thead><tr><th>Category</th><th>Example Fund Types</th></tr></thead><tbody><tr><td>Large Cap Funds</td><td>Funds investing primarily in India's top 100 companies by market capitalization.</td></tr><tr><td>Mid Cap Funds</td><td>Funds investing in companies ranked 101-250 by market capitalization, offering higher growth potential.</td></tr></tbody></table>
      <h4>Debt Allocation (50%)</h4>
      <table><thead><tr><th>Category</th><th>Example Fund Types</th></tr></thead><tbody><tr><td>Corporate Bond Funds</td><td>Funds investing in higher-rated corporate debt securities for stable returns.</td></tr><tr><td>Short Duration Funds</td><td>Funds with a portfolio Macaulay duration between 1-3 years, balancing yield and interest rate risk.</td></tr></tbody></table>
    </section>

    <section id="key-recommendations">
      <h2>üîë Key Recommendations</h2>
      <ol>
        <li><b>Maintain Discipline:</b> Consistently invest the calculated monthly SIP of ‚Çπ2,50,161.46 without fail. Automating this investment is the most effective way to ensure discipline.</li>
        <li><b>Adhere to Allocation:</b> Stick to the 50/50 equity-debt allocation. This balance is key to managing risk in line with your moderate profile.</li>
        <li><b>Diversify Within Categories:</b> Spread investments across 2-3 different funds within each recommended category (e.g., Large Cap, Corporate Bond) to reduce fund-specific risk.</li>
        <li><b>Annual Portfolio Review:</b> Review your portfolio at least once a year. Market movements may cause your allocation to drift. Rebalance the portfolio back to the target 50/50 allocation during this review.</li>
      </ol>
    </section>

    <section id="risk-factors">
      <h2>‚öñÔ∏è Risk Factors and Uncertainties</h2>
      <p>All investments are subject to risk, and it is crucial to understand the uncertainties inherent in this financial plan. The projections are based on assumptions that may not hold true in the future. <b>Market Risk</b> is the most significant factor; equity markets are volatile and can experience downturns, causing the value of your investments to fall. The assumed 10% annual return is a long-term average, not a guaranteed year-on-year figure. Secondly, <b>Inflation Risk</b> poses a threat; if the actual rate of inflation is higher than the projected 5.5%, the purchasing power of your final corpus will be lower than anticipated. For the debt portion of your portfolio, <b>Interest Rate Risk</b> is relevant, as rising interest rates can negatively impact the value of existing bonds. Furthermore, this plan carries <b>Model Risk</b>‚Äîit is a mathematical projection, not a guarantee of future results. Unforeseen life events, regulatory changes, or economic shifts can all impact your ability to invest and the returns generated. You should regularly review this plan and adjust it as your circumstances and market conditions change.</p>
    </section>

    <!-- v15 FIXED CHART LAYOUT - VERTICAL STACK -->
    <section id="sip-charts">
      <h2>üìä SIP Projection & Allocation Charts</h2>
      <div style="display: block; max-width: 1000px; margin: 0 auto;">
        <!-- Asset Allocation FIRST (TOP) -->
        <div class="chart-container" style="margin-bottom: 30px; text-align: center; border: 1px solid #e5e7eb; padding: 20px; border-radius: 8px;">
          <h3 style="margin-bottom: 15px;">Asset Allocation</h3>
          <div style="max-width: 500px; margin: 0 auto;">
            <canvas id="sipAllocationChart" width="400" height="300" style="max-width: 100%; height: auto;"></canvas>
          </div>
        </div>
        
        <!-- SIP Growth Projection SECOND (BOTTOM) -->
        <div class="chart-container" style="margin-bottom: 30px; text-align: center; border: 1px solid #e5e7eb; padding: 20px; border-radius: 8px;">
          <h3 style="margin-bottom: 15px;">SIP Growth Projection (10 Years)</h3>
          <div style="max-width: 800px; margin: 0 auto;">
            <canvas id="sipProjectionChart" width="600" height="400" style="max-width: 100%; height: auto;"></canvas>
          </div>
        </div>
      </div>
    </section>

    <section id="monthly-projection">
      <h2>üìà Monthly Projection (First 12 Months)</h2>
      <table>
        <thead><tr><th>Month</th><th>Cumulative Contribution</th><th>Projected Corpus</th></tr></thead>
        <tbody>
          <tr><td>M1</td><td>‚Çπ250,161.46</td><td>‚Çπ250,161.46</td></tr>
          <tr><td>M2</td><td>‚Çπ500,322.92</td><td>‚Çπ502,407.60</td></tr>
          <tr><td>M3</td><td>‚Çπ750,484.38</td><td>‚Çπ756,755.79</td></tr>
          <tr><td>M4</td><td>‚Çπ1,000,645.84</td><td>‚Çπ1,013,223.42</td></tr>
          <tr><td>M5</td><td>‚Çπ1,250,807.30</td><td>‚Çπ1,271,828.02</td></tr>
          <tr><td>M6</td><td>‚Çπ1,500,968.76</td><td>‚Çπ1,532,587.25</td></tr>
          <tr><td>M7</td><td>‚Çπ1,751,130.22</td><td>‚Çπ1,795,518.91</td></tr>
          <tr><td>M8</td><td>‚Çπ2,001,291.68</td><td>‚Çπ2,060,641.03</td></tr>
          <tr><td>M9</td><td>‚Çπ2,251,453.14</td><td>‚Çπ2,327,971.84</td></tr>
          <tr><td>M10</td><td>‚Çπ2,501,614.60</td><td>‚Çπ2,597,529.74</td></tr>
          <tr><td>M11</td><td>‚Çπ2,751,776.06</td><td>‚Çπ2,869,333.32</td></tr>
          <tr><td>M12</td><td>‚Çπ3,001,937.52</td><td>‚Çπ3,143,401.30</td></tr>
        </tbody>
      </table>
    </section>
    
    <div style="margin: 40px 0; text-align: center;" class="no-print">
      <button onclick="window.print()" style="margin: 5px; padding: 12px 24px; background-color: #3B82F6; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 1rem; font-weight: 500;">Print Report</button>
      <button onclick="downloadHTML()" style="margin: 5px; padding: 12px 24px; background-color: #10B981; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 1rem; font-weight: 500;">Download HTML</button>
    </div>

  </div>

  <!-- Embed chart data -->
  <script id="chart-data" type="application/json">
  {"projection":{"labels":["M1","M2","M3","M4","M5","M6","M7","M8","M9","M10","M11","M12","M13","M14","M15","M16","M17","M18","M19","M20","M21","M22","M23","M24","M25","M26","M27","M28","M29","M30","M31","M32","M33","M34","M35","M36","M37","M38","M39","M40","M41","M42","M43","M44","M45","M46","M47","M48","M49","M50","M51","M52","M53","M54","M55","M56","M57","M58","M59","M60","M61","M62","M63","M64","M65","M66","M67","M68","M69","M70","M71","M72","M73","M74","M75","M76","M77","M78","M79","M80","M81","M82","M83","M84","M85","M86","M87","M88","M89","M90","M91","M92","M93","M94","M95","M96","M97","M98","M99","M100","M101","M102","M103","M104","M105","M106","M107","M108","M109","M110","M111","M112","M113","M114","M115","M116","M117","M118","M119","M120"],"datasets":{"cumulative_contribution":[250161.46,500322.92,750484.38,1000645.84,1250807.3,1500968.76,1751130.22,2001291.68,2251453.14,2501614.6,2751776.06,3001937.52,3252098.98,3502260.44,3752421.9,4002583.36,4252744.82,4502906.28,4753067.74,5003229.2,5253390.66,5503552.12,5753713.58,6003875.04,6254036.5,6504197.96,6754359.42,7004520.88,7254682.34,7504843.8,7755005.26,8005166.72,8255328.18,8505489.64,8755651.1,9005812.56,9255974.02,9506135.48,9756296.94,10006458.4,10256619.86,10506781.32,10756942.78,11007104.24,11257265.7,11507427.16,11757588.62,12007750.08,12257911.54,12508073.0,12758234.46,13008395.92,13258557.38,13508718.84,13758880.3,14009041.76,14259203.22,14509364.68,14759526.14,15009687.6,15259849.06,15510010.52,15760171.98,16010333.44,16260494.9,16510656.36,16760817.82,17010979.28,17261140.74,17511302.2,17761463.66,18011625.12,18261786.58,18511948.04,18762109.5,19012270.96,19262432.42,19512593.88,19762755.34,20012916.8,20263078.26,20513239.72,20763401.18,21013562.64,21263724.1,21513885.56,21764047.02,22014208.48,22264369.94,22514531.4,22764692.86,23014854.32,23265015.78,23515177.24,23765338.7,24015500.16,24265661.62,24515823.08,24765984.54,25016146.0,25266307.46,25516468.92,25766630.38,26016791.84,26266953.3,26517114.76,26767276.22,27017437.68,27267599.14,27517760.6,27767922.06,28018083.52,28268244.98,28518406.44,28768567.9,29018729.36,29268890.82,29519052.28,29769213.74,30019375.2],"projected_corpus":[250161.46,502407.6,756755.79,1013223.42,1271828.02,1532587.25,1795518.91,2060641.03,2327971.84,2597529.74,2869333.32,3143401.3,3419752.65,3698406.42,3979381.82,4262698.11,4548374.63,4836430.82,5126886.13,5419760.21,5715072.88,6012844.02,6313093.59,6615841.67,6921108.48,7228914.42,7539279.91,7852225.57,8167772.12,8485940.42,8806751.62,9130226.92,9456387.61,9785255.14,10116851.01,10451196.8,10788314.11,11128224.56,11470950.06,11816512.65,12164934.42,12516237.54,12870444.25,13227576.95,13587658.09,13950710.27,14316756.24,14685818.88,15057921.14,15433086.15,15811337.17,16192697.64,16577191.01,16964840.77,17355670.44,17749703.69,18146964.25,18547475.95,18951262.72,19358348.61,19768757.85,20182514.83,20599644.12,21020170.32,21444118.07,21871512.09,22302377.06,22736737.87,23174619.42,23616046.61,24061044.43,24509638.13,24961853.11,25417714.92,25877249.21,26340481.65,26807437.99,27278144.14,27752626.04,28230909.59,28713020.84,29198985.98,29688831.2,30182582.83,30680267.35,31181911.24,31687541.17,32197184.02,32710866.88,33228617.07,33750462.01,34276429.2,34806546.14,35340840.48,35879339.81,36422071.81,36969064.21,37520344.75,38075941.31,38635881.82,39200194.43,39768907.42,40342049.25,40919648.59,41501734.33,42088335.58,42679481.54,43275201.55,43875525.23,44480482.27,45090102.62,45704416.31,46323452.11,46947239.88,47575810.05,48209193.3,48847420.21,49490522.04,50138529.39,50791470.47]}},"allocation":{"labels":["Equity","Debt"],"data":[50,50]}}
  </script>

  <!-- v15 FIXED chart rendering script -->
  <script>
    function initCharts() {
      if (typeof Chart === 'undefined') { console.error('Chart.js not loaded'); return; }
      let data;
      try {
        const script = document.getElementById('chart-data');
        data = script ? JSON.parse(script.textContent) : null;
      } catch (e) {
        console.warn('Chart data parse failed'); data = null;
      }
      if (!data) { return; }
      
      // Create allocation chart FIRST (TOP POSITION)
      const allocCtx = document.getElementById('sipAllocationChart');
      if (allocCtx && data.allocation) {
        new Chart(allocCtx, {
          type: 'doughnut',
          data: { labels: data.allocation.labels, datasets: [{ data: data.allocation.data, backgroundColor: ['#3B82F6', '#10B981'], borderWidth: 2 }] },
          options: { responsive: true, maintainAspectRatio: true, aspectRatio: 1.33, plugins: { legend: { position: 'bottom', labels: { padding: 15 } } } }
        });
      }
      
      // Create projection chart SECOND (BOTTOM POSITION)
      const projCtx = document.getElementById('sipProjectionChart');
      if (projCtx && data.projection) {
        new Chart(projCtx, {
          type: 'line',
          data: {
            labels: data.projection.labels,
            datasets: [
              { label: 'Projected Corpus', data: data.projection.datasets.projected_corpus, borderColor: '#3B82F6', backgroundColor: 'rgba(59, 130, 246, 0.1)', fill: true, tension: 0.4, pointRadius: 0, pointHoverRadius: 4 },
              { label: 'Cumulative Contribution', data: data.projection.datasets.cumulative_contribution, borderColor: '#EF4444', backgroundColor: 'rgba(239, 68, 68, 0.1)', fill: false, tension: 0.4, pointRadius: 0, pointHoverRadius: 4 }
            ]
          },
          options: { 
            responsive: true, maintainAspectRatio: true, aspectRatio: 1.5, interaction: { mode: 'nearest', intersect: false },
            scales: {
              x: { title: { display: true, text: 'Time Period (Months)' }, ticks: { maxTicksLimit: 12 } },
              y: { beginAtZero: true, title: { display: true, text: 'Amount (INR)' }, ticks: { callback: function(value) { if (value >= 10000000) return '‚Çπ' + (value/10000000).toFixed(1) + 'Cr'; return '‚Çπ' + (value/100000).toFixed(0) + 'L'; } } }
            },
            plugins: { tooltip: { mode: 'index', intersect: false } }
          }
        });
      }
    }
    if (document.readyState === 'loading') { document.addEventListener('DOMContentLoaded', function() { setTimeout(initCharts, 300); }); } else { setTimeout(initCharts, 300); }
  </script>
  <script>
    function downloadHTML() {
      const html = document.documentElement.outerHTML;
      const blob = new Blob([html], { type: 'text/html' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'comprehensive_sip_report.html';
      a.click();
      URL.revokeObjectURL(url);
    }
  </script>

</body>
</html>