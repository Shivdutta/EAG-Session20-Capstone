<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Systematic Investment Plan (SIP) Analysis Report</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"; margin: 0; padding: 20px; background-color: #f9fafb; color: #1f2937; }
    .container { max-width: 1000px; margin: 0 auto; background-color: #ffffff; padding: 2rem; border-radius: 0.5rem; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); }
    h1 { font-size: 2.25rem; font-weight: bold; margin-bottom: 1rem; color: #111827; }
    h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; border-bottom: 2px solid #e5e7eb; padding-bottom: 0.5rem; color: #111827; }
    h3 { font-size: 1.25rem; font-weight: 600; margin-bottom: 0.75rem; color: #374151; }
    p { line-height: 1.6; margin-bottom: 1rem; }
    ul { list-style-type: disc; margin-left: 20px; margin-bottom: 1rem; }
    table { width: 100%; border-collapse: collapse; margin: 1.5rem 0; }
    th, td { border: 1px solid #d1d5db; padding: 0.75rem; text-align: left; }
    th { background-color: #f3f4f6; font-weight: 600; }
    .callout { padding: 1rem; margin: 1.5rem 0; border-left-width: 4px; border-radius: 0.25rem; }
    .callout.warning { border-color: #f59e0b; background-color: #fffbeb; color: #92400e; }
    .callout.warning strong { color: #b45309; }
    .no-print { display: block; }
    @media print {
      .no-print { display: none; }
      body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üìä Systematic Investment Plan (SIP) Goal Report: Retirement</h1>
    
    <section id="executive-summary">
      <h2>üéØ Executive Summary</h2>
      <p>This report details a long-term financial plan designed to achieve a retirement corpus of <b>‚Çπ5 Crore</b> over a <b>30-year</b> horizon. Based on a 'high_moderate' risk profile, the plan utilizes an estimated annual return of <b>11%</b>. After adjusting for an assumed annual inflation rate of <b>5.5%</b>, the target corpus required at retirement is approximately <b>‚Çπ24.92 Crore</b>. To meet this goal, the calculated monthly Systematic Investment Plan (SIP) is <b>‚Çπ87,967.63</b>, allocated with <b>60% in Equity</b> and <b>40% in Debt</b> funds. Strategic recommendations focus on diversification, disciplined cost management, and annual portfolio rebalancing. The following sections provide a detailed breakdown of all calculations, projections, and strategic considerations.</p>
      <div class='callout warning'>‚ö†Ô∏è <strong>CRITICAL VALIDATION WARNING:</strong> An independent validation check (T014) has identified significant mathematical errors in the core calculations of this plan. The calculated monthly SIP of <b>‚Çπ87,967.63</b> is incorrect and will not achieve the target. The provided 360-month projection results in a final corpus of <b>‚Çπ21.76 Crore</b>, which is a <b>shortfall of over ‚Çπ3.16 Crore</b> against the inflation-adjusted target of ‚Çπ24.92 Crore. <b>This plan requires immediate revision and recalculation before any investment decisions are made.</b></div>
    </section>
    
    <section id='goal-inputs'>
      <h2>üìã Goal Inputs</h2>
      <p>These are the foundational parameters provided for the financial goal calculation.</p>
      <table><thead><tr><th>Parameter</th><th>Value</th></tr></thead><tbody><tr><td>Goal Type</td><td>Retirement</td></tr><tr><td>Target Amount (Today's Value)</td><td>‚Çπ5,00,00,000</td></tr><tr><td>Time Horizon</td><td>30 Years (360 Months)</td></tr><tr><td>Risk Appetite</td><td>High-Moderate</td></tr></tbody></table>
    </section>
    
    <section id='inflation-adjustment'>
      <h2>üí® Inflation Adjustment</h2>
      <p>This section outlines the adjustment of the target corpus to account for the future cost of living, preserving its purchasing power.</p>
      <table><thead><tr><th>Parameter</th><th>Value</th></tr></thead><tbody><tr><td>Assumed Annual Inflation</td><td>5.5%</td></tr><tr><td>Investment Horizon</td><td>30 Years</td></tr><tr><td>Unadjusted Target Corpus</td><td>‚Çπ5,00,00,000</td></tr><tr><td><b>Inflation-Adjusted Target Corpus</b></td><td><b>‚Çπ24,91,97,522.69</b></td></tr></tbody></table>
    </section>
    
    <section id='sip-calculation'>
      <h2>üßÆ SIP Calculation</h2>
      <p>The following table shows the calculated monthly SIP required to reach the inflation-adjusted target based on the assumed rate of return.</p>
      <div class='callout warning'>‚ö†Ô∏è <strong>Note on Accuracy:</strong> As highlighted in the Executive Summary, the `Monthly SIP` value presented below has been flagged by a validation agent as mathematically incorrect. Proceed with caution.</div>
      <table><thead><tr><th>Parameter</th><th>Value</th></tr></thead><tbody><tr><td>Inflation-Adjusted Target</td><td>‚Çπ24,91,97,522.69</td></tr><tr><td>Assumed Annual Return</td><td>11%</td></tr><tr><td>Assumed Monthly Return (r)</td><td>0.9167%</td></tr><tr><td>Total Investment Period (n)</td><td>360 Months</td></tr><tr><td><b>Calculated Monthly SIP</b></td><td><b>‚Çπ87,967.63</b></td></tr></tbody></table>
    </section>
    
    <section id='asset-allocation'>
      <h2>‚öñÔ∏è Asset Allocation Plan</h2>
      <p>Based on the 'high_moderate' risk profile and a long-term horizon, the following asset allocation is recommended to balance growth with stability.</p>
      <table><thead><tr><th>Asset Class</th><th>Allocation</th><th>Recommended Fund Categories</th></tr></thead><tbody><tr><td><b>Equity</b></td><td><b>60%</b></td><td>Large Cap Funds, Mid Cap Funds</td></tr><tr><td><b>Debt</b></td><td><b>40%</b></td><td>Corporate Bond Funds, Short Duration Funds</td></tr><tr><td><b>Tax Saver (Optional)</b></td><td>Yes</td><td>ELSS funds can be considered as part of the equity portion for tax benefits under Section 80C.</td></tr></tbody></table>
    </section>
    
    <section id='key-recommendations'>
      <h2>üîë Key Recommendations</h2>
      <h3>Diversify Your Holdings</h3>
      <p>While the categories are defined, avoid concentrating your entire investment in a single fund. Consider a 'Core and Satellite' approach: allocate a larger portion (e.g., 35-40%) to stable Large Cap funds (the 'Core') and a smaller portion (e.g., 20-25%) to Mid Cap funds (the 'Satellite') to capture higher growth. Further diversify across 2-3 different fund houses (AMCs).</p>
      <h3>Prioritize Low Costs</h3>
      <p>When selecting funds, actively seek out those with low expense ratios. Opting for 'Direct' plans over 'Regular' plans can significantly enhance your final corpus over a 30-year period by minimizing costs, as these costs compound over time just like returns.</p>
      <h3>Implement Periodic Reviews and Rebalancing</h3>
      <p>A 30-year journey requires course corrections. Review your portfolio annually to ensure the 60/40 asset allocation has not drifted significantly due to market movements. Rebalance back to the target if the deviation exceeds 5-10%. As you approach retirement (e.g., in the last 5-10 years), gradually de-risk the portfolio by systematically shifting assets from equity to debt to protect your accumulated wealth.</p>
    </section>
    
    <section id='risk-factors'>
      <h2>œÅŒØœÉŒ∫Œø Risk Factors and Uncertainties</h2>
      <p>While your investment plan is structured for long-term success, it is imperative to acknowledge the inherent risks. The 60% allocation to equities subjects your portfolio to <b>Market Volatility</b>. Equity markets do not move in a straight line and will experience periods of significant decline. Your extensive 30-year time horizon is your greatest ally, providing ample time to recover from such downturns, but you must have the discipline to remain invested during these cycles. Secondly, <b>Inflation Risk</b> is a major concern for long-term goals. The plan assumes an average inflation of 5.5%; if the actual rate is persistently higher, the purchasing power of your inflation-adjusted target will be eroded, potentially requiring higher future contributions. Your debt allocation, while safer, is exposed to <b>Interest Rate Risk</b>. When interest rates rise, the value of existing bonds and, consequently, the NAV of your debt funds can decrease in the short term. Finally, behavioral risks are critical. High performance in certain fund categories can lead to <b>Return Chasing</b>, a dangerous bias where investors shift money to recent top performers. Your plan's 11% p.a. return assumption is a prudent, long-term average; deviating from this disciplined strategy based on short-term market euphoria can lead to poor outcomes.</p>
    </section>

    <!-- FIXED CHART LAYOUT (v11+) -->
    <section id="sip-charts">
      <h2>üìä SIP Projection & Allocation Charts</h2>
      <div style="display: block;">
        <!-- Asset Allocation FIRST (TOP) -->
        <div class="chart-container" style="margin-bottom: 30px; text-align: center;">
          <h3>Asset Allocation</h3>
          <div style="max-width: 500px; margin: 0 auto;">
            <canvas id="sipAllocationChart" width="400" height="300" style="max-width: 100%; height: auto;"></canvas>
          </div>
        </div>
        
        <!-- SIP Growth Projection SECOND (BOTTOM) -->
        <div class="chart-container" style="text-align: center;">
          <h3>SIP Growth Projection</h3>
          <div style="max-width: 800px; margin: 0 auto;">
            <canvas id="sipProjectionChart" width="600" height="400" style="max-width: 100%; height: auto;"></canvas>
          </div>
        </div>
      </div>
    </section>

    <section id="monthly-projection">
      <h2>üìà Monthly Projection (First 12 Months)</h2>
      <p>This table shows the month-on-month growth of your investment for the first year. The full 30-year (360 month) projection is visualized in the line chart above.</p>
      <table>
        <thead><tr><th>Month</th><th>Cumulative Contribution</th><th>Projected Corpus</th></tr></thead>
        <tbody>
          <tr><td>M1</td><td>‚Çπ87,967.63</td><td>‚Çπ87,967.63</td></tr>
          <tr><td>M2</td><td>‚Çπ1,75,935.26</td><td>‚Çπ1,76,741.97</td></tr>
          <tr><td>M3</td><td>‚Çπ2,63,902.89</td><td>‚Çπ2,66,331.41</td></tr>
          <tr><td>M4</td><td>‚Çπ3,51,870.52</td><td>‚Çπ3,56,743.43</td></tr>
          <tr><td>M5</td><td>‚Çπ4,39,838.15</td><td>‚Çπ4,47,985.58</td></tr>
          <tr><td>M6</td><td>‚Çπ5,27,805.78</td><td>‚Çπ5,40,065.51</td></tr>
          <tr><td>M7</td><td>‚Çπ6,15,773.41</td><td>‚Çπ6,32,990.93</td></tr>
          <tr><td>M8</td><td>‚Çπ7,03,741.04</td><td>‚Çπ7,26,769.64</td></tr>
          <tr><td>M9</td><td>‚Çπ7,91,708.67</td><td>‚Çπ8,21,409.52</td></tr>
          <tr><td>M10</td><td>‚Çπ8,79,676.30</td><td>‚Çπ9,16,918.52</td></tr>
          <tr><td>M11</td><td>‚Çπ9,67,643.93</td><td>‚Çπ10,13,304.64</td></tr>
          <tr><td>M12</td><td>‚Çπ10,55,611.56</td><td>‚Çπ11,10,575.92</td></tr>
        </tbody>
      </table>
    </section>

    <!-- Print/Download Controls -->
    <div class="no-print" style="margin: 40px 0 20px 0; text-align: center; border-top: 1px solid #e5e7eb; padding-top: 20px;">
      <button onclick="window.print()" style="margin: 5px; padding: 10px 20px; background-color: #3B82F6; color: white; border: none; border-radius: 5px; cursor: pointer;">üñ®Ô∏è Print Report</button>
      <button onclick="downloadHTML()" style="margin: 5px; padding: 10px 20px; background-color: #10B981; color: white; border: none; border-radius: 5px; cursor: pointer;">üíæ Download HTML</button>
    </div>

  </div>

  <!-- Load Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Embed chart data -->
  <script id="sip-chart-data" type="application/json">
    {"projection":{"labels":["M1","M2","M3","M4","M5","M6","M7","M8","M9","M10","M11","M12","M13","M14","M15","M16","M17","M18","M19","M20","M21","M22","M23","M24","M25","M26","M27","M28","M29","M30","M31","M32","M33","M34","M35","M36","M37","M38","M39","M40","M41","M42","M43","M44","M45","M46","M47","M48","M49","M50","M51","M52","M53","M54","M55","M56","M57","M58","M59","M60","M61","M62","M63","M64","M65","M66","M67","M68","M69","M70","M71","M72","M73","M74","M75","M76","M77","M78","M79","M80","M81","M82","M83","M84","M85","M86","M87","M88","M89","M90","M91","M92","M93","M94","M95","M96","M97","M98","M99","M100","M101","M102","M103","M104","M105","M106","M107","M108","M109","M110","M111","M112","M113","M114","M115","M116","M117","M118","M119","M120","M121","M122","M123","M124","M125","M126","M127","M128","M129","M130","M131","M132","M133","M134","M135","M136","M137","M138","M139","M140","M141","M142","M143","M144","M145","M146","M147","M148","M149","M150","M151","M152","M153","M154","M155","M156","M157","M158","M159","M160","M161","M162","M163","M164","M165","M166","M167","M168","M169","M170","M171","M172","M173","M174","M175","M176","M177","M178","M179","M180","M181","M182","M183","M184","M185","M186","M187","M188","M189","M190","M191","M192","M193","M194","M195","M196","M197","M198","M199","M200","M201","M202","M203","M204","M205","M206","M207","M208","M209","M210","M211","M212","M213","M214","M215","M216","M217","M218","M219","M220","M221","M222","M223","M224","M225","M226","M227","M228","M229","M230","M231","M232","M233","M234","M235","M236","M237","M238","M239","M240","M241","M242","M243","M244","M245","M246","M247","M248","M249","M250","M251","M252","M253","M254","M255","M256","M257","M258","M259","M260","M261","M262","M263","M264","M265","M266","M267","M268","M269","M270","M271","M272","M273","M274","M275","M276","M277","M278","M279","M280","M281","M282","M283","M284","M285","M286","M287","M288","M289","M290","M291","M292","M293","M294","M295","M296","M297","M298","M299","M300","M301","M302","M303","M304","M305","M306","M307","M308","M309","M310","M311","M312","M313","M314","M315","M316","M317","M318","M319","M320","M321","M322","M323","M324","M325","M326","M327","M328","M329","M330","M331","M332","M333","M334","M335","M336","M337","M338","M339","M340","M341","M342","M343","M344","M345","M346","M347","M348","M349","M350","M351","M352","M353","M354","M355","M356","M357","M358","M359","M360"],"datasets":{"cumulative_contribution":[87967.63,175935.26,263902.89,351870.52,439838.15,527805.78,615773.41,703741.04,791708.67,879676.3,967643.93,1055611.56,1143579.19,1231546.82,1319514.45,1407482.08,1495449.71,1583417.34,1671384.97,1759352.6,1847320.23,1935287.86,2023255.49,2111223.12,2199190.75,2287158.38,2375126.01,2463093.64,2551061.27,2639028.9,2726996.53,2814964.16,2902931.79,2990899.42,3078867.05,3166834.68,3254802.31,3342769.94,3430737.57,3518705.2,3606672.83,3694640.46,3782608.09,3870575.72,3958543.35,4046510.98,4134478.61,4222446.24,4310413.87,4398381.5,4486349.13,4574316.76,4662284.39,4750252.02,4838219.65,4926187.28,5014154.91,5102122.54,5190090.17,5278057.8,5366025.43,5453993.06,5541960.69,5629928.32,5717895.95,5805863.58,5893831.21,5981798.84,6069766.47,6157734.1,6245701.73,6333669.36,6421636.99,6509604.62,6597572.25,6685539.88,6773507.51,6861475.14,6949442.77,7037410.4,7125378.03,7213345.66,7301313.29,7389280.92,7477248.55,7565216.18,7653183.81,7741151.44,7829119.07,7917086.7,8005054.33,8093021.96,8180989.59,8268957.22,8356924.85,8444892.48,8532860.11,8620827.74,8708795.37,8796763.0,8884730.63,8972698.26,9060665.89,9148633.52,9236601.15,9324568.78,9412536.41,9500504.04,9588471.67,9676439.3,9764406.93,9852374.56,9940342.19,10028309.82,10116277.45,10204245.08,10292212.71,10380180.34,10468147.97,10556115.6,10644083.23,10732050.86,10820018.49,10907986.12,10995953.75,11083921.38,11171889.01,11259856.64,11347824.27,11435791.9,11523759.53,11611727.16,11699694.79,11787662.42,11875630.05,11963597.68,12051565.31,12139532.94,12227500.57,12315468.2,12403435.83,12491403.46,12579371.09,12667338.72,12755306.35,12843273.98,12931241.61,13019209.24,13107176.87,13195144.5,13283112.13,13371079.76,13459047.39,13547015.02,13634982.65,13722950.28,13810917.91,13898885.54,13986853.17,14074820.8,14162788.43,14250756.06,14338723.69,14426691.32,14514658.95,14602626.58,14690594.21,14778561.84,14866529.47,14954497.1,15042464.73,15130432.36,15218399.99,15306367.62,15394335.25,15482302.88,15570270.51,15658238.14,15746205.77,15834173.4,15922141.03,16010108.66,16098076.29,16186043.92,16274011.55,16361979.18,16449946.81,16537914.44,16625882.07,16713849.7,16801817.33,16889784.96,16977752.59,17065720.22,17153687.85,17241655.48,17329623.11,17417590.74,17505558.37,17593526.0,17681493.63,17769461.26,17857428.89,17945396.52,18033364.15,18121331.78,18209299.41,18297267.04,18385234.67,18473202.3,18561169.93,18649137.56,18737105.19,18825072.82,18913040.45,19001008.08,19088975.71,19176943.34,19264910.97,19352878.6,19440846.23,19528813.86,19616781.49,19704749.12,19792716.75,19880684.38,19968652.01,20056619.64,20144587.27,20232554.89,20320522.52,20408490.15,20496457.78,20584425.41,20672393.04,20760360.67,20848328.3,20936295.93,21024263.56,21112231.19,21200198.82,21288166.45,21376134.08,21464101.71,21552069.34,21640036.97,21728004.6,21815972.23,21903939.86,21991907.49,22079875.12,22167842.75,22255810.38,22343778.01,22431745.64,22519713.27,22607680.9,22695648.53,22783616.16,22871583.79,22959551.42,23047519.05,23135486.68,23223454.31,23311421.94,23399389.57,23487357.2,23575324.83,23663292.46,23751260.09,23839227.72,23927195.35,24015162.98,24103130.61,24191098.24,24279065.87,24367033.5,24455001.13,24542968.76,24630936.39,24718904.02,24806871.65,24894839.28,24982806.91,25070774.54,25158742.17,25246709.8,25334677.43,25422645.06,25510612.69,25598580.32,25686547.95,25774515.58,25862483.21,25950450.84,26038418.47,26126386.1,26214353.73,26302321.36,26390288.99,26478256.62,26566224.25,26654191.88,26742159.51,26830127.14,26918094.77,27006062.4,27094030.03,27181997.66,27269965.29,27357932.92,27445900.55,27533868.18,27621835.81,27709803.44,27797771.07,27885738.7,27973706.33,28061673.96,28149641.59,28237609.22,28325576.85,28413544.48,28501512.11,28589479.74,28677447.37,28765415.0,28853382.63,28941350.26,29029317.89,29117285.52,29205253.15,29293220.78,29381188.41,29469156.04,29557123.67,29645091.3,29733058.93,29821026.56,29908994.19,29996961.82,30084929.45,30172897.08,30260864.71,30348832.34,30436799.97,30524767.6,30612735.23,30700702.86,30788670.49,30876638.12,30964605.75,31052573.38,31140541.01,31228508.64,31316476.27,31404443.9,31492411.53,31580379.16,31668346.79],"projected_corpus":[87967.63,176741.97,266331.41,356743.43,447985.58,540065.51,632990.93,726769.64,821409.52,916918.52,1013304.64,1110575.92,1208740.48,1307806.52,1407782.31,1508676.19,1610496.58,1713251.98,1816950.96,1921602.16,2027214.31,2133796.21,2241356.71,2349904.74,2459449.29,2569999.41,2681564.21,2794152.85,2907774.56,3022438.64,3138154.49,3254931.57,3372779.43,3491707.69,3611726.04,3732844.24,3855072.13,3978419.64,4102896.79,4228513.68,4355280.47,4483207.41,4612304.83,4742583.17,4874053.01,5006724.96,5140609.74,5275718.17,5412061.18,5549649.77,5688495.02,5828608.07,5970000.12,6112682.44,6256666.38,6401963.36,6548584.86,6696542.43,6845847.7,6996512.39,7148548.31,7301967.33,7456781.4,7613002.54,7770642.85,7929714.52,8090229.77,8252200.94,8415640.44,8580560.83,8746974.77,8914895.04,9084334.5,9255306.11,9427822.9,9601897.97,9777544.52,9954775.8,10133605.15,10314046.01,10496111.9,10679816.48,10865173.5,11052196.8,11240900.32,11431298.08,11623404.22,11817232.96,12012798.61,12210115.55,12409198.28,12610061.42,12812719.7,13017187.97,13223481.2,13431614.47,13641602.97,13853462.01,14067207.01,14282853.53,14500417.29,14719914.15,14941360.1,15164771.21,15390163.7,15617553.91,15846958.29,16078393.41,16311875.95,16547422.7,16785050.63,17024776.78,17266618.33,17510592.6,17756717.02,18005009.11,18255486.5,18508166.96,18763068.39,19020208.79,19279606.27,19541279.09,19805245.68,20071524.6,20340134.54,20611094.34,20884422.95,21160139.49,21438263.15,21718813.25,22001809.21,22287270.6,22575217.06,22865668.4,23158644.53,23454165.51,23752251.52,24052922.9,24356200.16,24662103.95,24970655.15,25281874.8,25595784.09,25912404.38,26231757.2,26553864.21,26878747.24,27206428.26,27536929.42,27870273.02,28206481.54,28545577.6,28887584.01,29232523.75,29580420.02,29931296.22,30285175.91,30642082.85,31002041.01,31365074.52,31731207.67,32100464.95,32472871.01,32848450.69,33227228.98,33609231.02,33994482.08,34383007.6,34774833.22,35169984.81,35568488.42,35970370.3,36375656.91,36784374.91,37196551.13,37612212.63,38031386.64,38454100.56,38880382.02,39310258.85,39743759.13,40180911.1,40621743.2,41066284.11,41514562.68,41966608.01,42422449.39,42882116.32,43345638.5,43813045.82,44284368.32,44759636.21,45238879.86,45722129.83,46209416.79,46700771.61,47196225.29,47695808.97,48199554.01,48707491.91,49219654.34,49736073.1,50256780.12,50781807.47,51311187.39,51844952.3,52383134.8,52925767.65,53472883.83,54024516.48,54580708.91,55141504.62,55706947.31,56277080.89,56851949.46,57431597.35,58016069.11,58605409.52,59199663.51,59798876.2,60403092.89,61012359.13,61626720.69,62246223.51,62870913.7,63500837.58,64136041.67,64776572.71,65422477.65,66073803.62,66730598.01,67392908.43,68060782.72,68734268.91,69413415.22,70098270.13,70788882.32,71485300.7,72187574.45,72895752.92,73609885.69,74330022.56,75056213.56,75788508.97,76526959.35,77271615.54,78022528.63,78779749.95,79543331.07,80313323.77,81089780.09,81872752.33,82662293.02,83458454.91,84261291.03,85070854.67,85887199.31,86710378.71,87540446.88,88377458.07,89221466.75,90072527.65,90930695.73,91796026.24,92668574.61,93548396.48,94435547.74,95330084.51,96232063.14,97141540.21,98058572.58,98983217.38,99915531.99,100855574.0,101803401.3,102759072.03,103722644.57,104694177.5,105673729.62,106661360.01,107657128.02,108661093.26,109673315.6,110693855.15,111722772.33,112760127.81,113805982.52,114860397.66,115923434.69,116995155.33,118075621.57,119164895.66,120263040.11,121370117.65,122486191.26,123611324.1,124745579.54,125889021.21,127041712.98,128203718.91,129375103.3,130555930.65,131746265.69,132946173.37,134155718.84,135374967.49,136603985.01,137842837.3,139091590.49,140350310.98,141619065.41,142897920.68,144186943.91,145486202.43,146795763.8,148115695.83,149446066.56,150786944.33,152138400.73,153500507.6,154873337.07,156256961.54,157651453.7,159056886.49,160473333.15,161900867.24,163339562.6,164789493.31,166250733.72,167723358.46,169207442.4,170703060.72,172210288.79,173729202.26,175259877.06,176802389.41,178356815.79,179923232.95,181501717.91,183092348.02,184695200.86,186310354.34,187937886.68,189577876.43,191230402.48,192895544.02,194573380.52,196264002.01,197967489.01,199683922.56,201413384.05,203155955.07,204911717.51,206680753.53,208463145.54,210258976.24,212068328.66,213891286.13,215727932.22,217578350.77]}},"allocation":{"labels":["Equity","Debt"],"data":[60,40],"meta":{"recommended_fund_categories":{"equity":["Large Cap Funds","Mid Cap Funds"],"debt":["Corporate Bond Funds","Short Duration Funds"],"elss_optional":true}}}} 
  </script>

  <!-- ENHANCED chart rendering with proper layout and sizing -->
  <script>
  function initCharts() {
    if (typeof Chart === 'undefined') {
      console.error('Chart.js not loaded');
      return;
    }
    
    let data;
    try {
      const script = document.getElementById('sip-chart-data');
      data = script ? JSON.parse(script.textContent) : null;
    } catch (e) {
      console.warn('Chart data parse failed');
      data = null;
    }
    
    // Enhanced fallback with a complete timeline
    if (!data) {
      console.warn('Using fallback chart data.');
      data = {
        projection: {
          labels: ["M1","M12","M24","M36","M48","M60","M72","M84","M96","M108","M120"],
          datasets: {
            cumulative_contribution: [25000,300000,600000,900000,1200000,1500000,1800000,2100000,2400000,2700000,3000000],
            projected_corpus: [25250,320552,683945,1098476,1574148,2123692,2763971,3516010,4404188,5458070,6708450]
          }
        },
        allocation: { labels: ["Equity", "Debt"], data: [70, 30] }
      };
    }
    
    // Create allocation chart FIRST (TOP POSITION)
    const allocCtx = document.getElementById('sipAllocationChart');
    if (allocCtx) {
      new Chart(allocCtx, {
        type: 'doughnut',
        data: {
          labels: data.allocation.labels,
          datasets: [{ 
            data: data.allocation.data, 
            backgroundColor: ['#3B82F6', '#10B981'],
            borderWidth: 2 
          }]
        },
        options: { 
          responsive: true,
          maintainAspectRatio: true,
          aspectRatio: 1.33,
          plugins: {
            legend: { 
              position: 'bottom',
              labels: { padding: 15 }
            }
          }
        }
      });
    }
    
    // Create projection chart SECOND (BOTTOM POSITION)
    const projCtx = document.getElementById('sipProjectionChart');
    if (projCtx) {
      new Chart(projCtx, {
        type: 'line',
        data: {
          labels: data.projection.labels,
          datasets: [{
            label: 'Projected Corpus',
            data: data.projection.datasets.projected_corpus,
            borderColor: '#3B82F6',
            backgroundColor: 'rgba(59, 130, 246, 0.1)',
            fill: true,
            tension: 0.4,
            pointRadius: 1,
            pointHoverRadius: 4
          }, {
            label: 'Cumulative Contribution', 
            data: data.projection.datasets.cumulative_contribution,
            borderColor: '#EF4444',
            backgroundColor: 'rgba(239, 68, 68, 0.1)',
            fill: false,
            tension: 0.4,
            pointRadius: 1,
            pointHoverRadius: 4
          }]
        },
        options: { 
          responsive: true,
          maintainAspectRatio: true,
          aspectRatio: 1.5,
          interaction: {
            mode: 'nearest',
            intersect: false
          },
          scales: {
            x: {
              title: { display: true, text: 'Time Period (Months)' },
              ticks: { maxTicksLimit: 12 }
            },
            y: {
              beginAtZero: true,
              title: { display: true, text: 'Amount (INR)' },
              ticks: {
                callback: function(value) {
                  if (value >= 10000000) return '‚Çπ' + (value/10000000).toFixed(2) + 'Cr';
                  return '‚Çπ' + (value/100000).toFixed(1) + 'L';
                }
              }
            }
          },
          plugins: {
            tooltip: {
              mode: 'index',
              intersect: false
            }
          }
        }
      });
    }
  }

  // Initialize with enhanced delay for proper loading
  setTimeout(initCharts, 500);
  </script>

  <script>
  function downloadHTML() {
    const html = document.documentElement.outerHTML;
    const blob = new Blob([html], { type: 'text/html' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'sip_comprehensive_report.html';
    a.click();
    URL.revokeObjectURL(url);
  }
  </script>

</body>
</html>